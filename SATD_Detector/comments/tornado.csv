file path,line #,comment,satd
tornado/setup.py,1,,
tornado/setup.py,2,Copyright 2009 Facebook,
tornado/setup.py,3,,
tornado/setup.py,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/setup.py,5,not use this file except in compliance with the License. You may obtain,
tornado/setup.py,6,a copy of the License at,
tornado/setup.py,7,,
tornado/setup.py,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/setup.py,9,,
tornado/setup.py,10,"Unless required by applicable law or agreed to in writing, software",
tornado/setup.py,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/setup.py,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/setup.py,13,License for the specific language governing permissions and limitations,
tornado/setup.py,14,under the License.,
tornado/setup.py,16,type: ignore,
tornado/setup.py,24,"Use setuptools if available, for install_requires (among other things).",
tornado/setup.py,33,The following code is copied from,
tornado/setup.py,34,https://github.com/mongodb/mongo-python-driver/blob/master/setup.py,
tornado/setup.py,35,to support installing without the extension on platforms where,
tornado/setup.py,36,no compiler is available.,
tornado/setup.py,128,"This extension builds and works on pypy as well, although pypy's jit",
tornado/setup.py,129,produces equivalent performance.,
tornado/setup.py,135,"Unless the user has specified that the extension is mandatory,",
tornado/setup.py,136,fall back to the pure-python implementation on any build failure.,
tornado/setup.py,149,data files need to be listed both here (which determines what gets,
tornado/setup.py,150,installed) and in MANIFEST.in (which determines what gets included,
tornado/setup.py,151,in the sdist tarball),
tornado/,1,,
tornado/,2,Copyright 2014 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,133,"The body limits can be altered by the delegate, so save them",
tornado/,134,here instead of just referencing self.params later.,
tornado/,137,"_write_finished is set to True when finish() has been called,",
tornado/,138,i.e. there will be no more data sent.  Data may still be in the,
tornado/,139,stream's write buffer.,
tornado/,141,True when we have read the entire incoming body.,
tornado/,143,_finish_future resolves when all data has been written and flushed,
tornado/,144,to the IOStream.,
tornado/,145,type: Future[None],
tornado/,146,"If true, the connection should be closed after this request",
tornado/,147,"(after the response has been written in the server side,",
tornado/,148,and after it has been read in the client),
tornado/,151,Save the start lines after we read or write them; they,
tornado/,152,affect later processing (e.g. 304 responses and HEAD methods,
tornado/,153,have content-length but no bodies),
tornado/,154,type: Optional[httputil.RequestStartLine],
tornado/,155,type: Optional[httputil.ResponseStartLine],
tornado/,156,type: Optional[httputil.HTTPHeaders],
tornado/,157,True if we are writing output with chunked encoding.,
tornado/,159,"While reading a body with a content-length, this is the",
tornado/,160,amount left to read.,
tornado/,161,type: Optional[int],
tornado/,162,"A Future for our outgoing writes, returned by IOStream.write.",
tornado/,163,type: Optional[Future[None]],
tornado/,204,"type: Union[httputil.RequestStartLine, httputil.ResponseStartLine]",
tornado/,205,TODO: this will need to change to support client-side keepalive,
tornado/,221,We've been detached.,
tornado/,234,304 responses may include the content-length header,
tornado/,235,but do not actually have a body.,
tornado/,236,http://tools.ietf.org/html/rfc7230#section-3.3,
tornado/,239,1xx responses should never indicate the presence of,
tornado/,240,a body.,
tornado/,245,TODO: client delegates will get headers_received twice,
tornado/,246,in the case of a 100-continue.  Document or change?,
tornado/,274,If we're waiting for the application to produce an asynchronous,
tornado/,275,"response, and we're not detached, register a close callback",
tornado/,276,on the stream (we didn't need one while we were reading),
tornado/,298,type: ignore,
tornado/,309,type: Optional[Future[None]],
tornado/,310,"type: Optional[Callable[[], None]]",
tornado/,329,Note that this callback is only registered on the IOStream,
tornado/,330,when we have finished reading the request and are waiting for,
tornado/,331,the application to produce its response.,
tornado/,357,type: ignore,
tornado/,388,Client requests with a non-empty body must have either a,
tornado/,389,Content-Length or a Transfer-Encoding.,
tornado/,405,TODO: should this use,
tornado/,406,self._request_start_line.version or,
tornado/,407,start_line.version?,
tornado/,409,Omit payload header field for HEAD request.,
tornado/,411,"1xx, 204 and 304 responses have no body (not even a zero-length",
tornado/,412,"body), and so should not have either Content-Length or",
tornado/,413,Transfer-Encoding headers.,
tornado/,416,No need to chunk the output if a Content-Length is specified.,
tornado/,418,"Applications are discouraged from touching Transfer-Encoding,",
tornado/,419,"but if they do, leave it alone.",
tornado/,422,"If connection to a 1.1 client will be closed, inform client",
tornado/,428,"If a 1.0 client asked for keep-alive, add the header.",
tornado/,445,"TODO: headers are supposed to be of type str, but we still have some",
tornado/,446,cases that let bytes slip through. Remove these native_str calls when those,
tornado/,447,are fixed.,
tornado/,473,Close the stream now to stop further framing errors.,
tornado/,479,Don't write out empty chunks because that means END-OF-STREAM,
tornado/,480,with chunked encoding,
tornado/,520,"If the app finished the request while we're still reading,",
tornado/,521,divert any remaining data away from the delegate and,
tornado/,522,close the connection when we're done sending our response.,
tornado/,523,Closing the connection is the only way to avoid reading the,
tornado/,524,whole input body.,
tornado/,527,"No more data is coming, so instruct TCP to send any remaining",
tornado/,528,data immediately instead of waiting for a full packet or ack.,
tornado/,563,start_line may be a request or response start line; only,
tornado/,564,the former has a method attribute.,
tornado/,573,"Turn Nagle's algorithm back on, leaving the stream in its",
tornado/,574,default state for the next request.,
tornado/,580,The lstrip removes newlines that some implementations sometimes,
tornado/,581,"insert between messages of a reused connection.  Per RFC 7230,",
tornado/,582,we SHOULD ignore at least one empty line before the request.,
tornado/,583,http://tools.ietf.org/html/rfc7230#section-3.5,
tornado/,585,RFC 7230 section allows for both CRLF and bare LF.,
tornado/,599,Response cannot contain both Content-Length and,
tornado/,600,Transfer-Encoding headers.,
tornado/,601,http://tools.ietf.org/html/rfc7230#section-3.3.3,
tornado/,606,Proxies sometimes cause Content-Length headers to get,
tornado/,607,duplicated.  If all the values are identical then we can,
tornado/,608,use them but if they differ it's an error.,
tornado/,618,type: Optional[int],
tornado/,620,Handles non-integer Content-Length value.,
tornado/,632,"This response code is not allowed to have a non-empty body,",
tornado/,633,and has an implicit length of zero instead of read-until-close.,
tornado/,634,http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.3,
tornado/,664,"TODO: ""chunk extensions"" http://tools.ietf.org/html/rfc2616#section-3.6.1",
tornado/,690,chunk ends with \r\n,
tornado/,712,type: Optional[GzipDecompressor],
tornado/,721,"Downstream delegates will only see uncompressed data,",
tornado/,722,so rename the content-encoding header.,
tornado/,723,(but note that curl_httpclient doesn't do this).,
tornado/,749,The tail should always be empty: decompress returned,
tornado/,750,all that it can in data_received and the only,
tornado/,751,purpose of the flush call is to detect errors such,
tornado/,752,as truncated input. If we did legitimately get a new,
tornado/,753,chunk at this point we'd need to change the,
tornado/,754,interface to make finish() a coroutine.,
tornado/,784,type: Optional[Future[None]],
tornado/,792,"Block until the serving loop is done, but ignore any exceptions",
tornado/,793,(start_serving is already responsible for logging them).,
tornado/,808,Register the future on the IOLoop so its errors get logged.,
tornado/,827,This exception was already logged.,
tornado/,1,-*- coding: utf-8 -*-,
tornado/,2,,
tornado/,3,Copyright 2009 Facebook,
tornado/,4,,
tornado/,5,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,6,not use this file except in compliance with the License. You may obtain,
tornado/,7,a copy of the License at,
tornado/,8,,
tornado/,9,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,10,,
tornado/,11,"Unless required by applicable law or agreed to in writing, software",
tornado/,12,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,13,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,14,License for the specific language governing permissions and limitations,
tornado/,15,under the License.,
tornado/,57,"type: Dict[str, Any]",
tornado/,142,Try to autodetect encoding based on the BOM.,
tornado/,148,"utf-8-sig is ""utf-8 with optional BOM"". It's discouraged",
tornado/,149,in most cases but is common with CSV files because Excel,
tornado/,150,cannot read utf-8 files without a BOM.,
tornado/,152,python 3: csv.reader requires a file open in text mode.,
tornado/,153,Specify an encoding to avoid dependence on $LANG environment variable.,
tornado/,205,"skip .svn, etc",
tornado/,233,"type: Dict[str, Locale]",
tornado/,263,type: Locale,
tornado/,280,Initialize strings for date formatting,
tornado/,354,"Due to click skew, things are some things slightly",
tornado/,355,in the future. Round timestamps in the immediate,
tornado/,356,future down to now in relative mode.,
tornado/,359,"Otherwise, future dates always use the full format.",
tornado/,392,"11mo, since confusing for same month last year",
tornado/,523,"self.gettext must exist before __init__ is called, since it",
tornado/,524,calls into self.translate,
tornado/,574,Translation not found,
tornado/,581,Translation not found,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,128,noqa: F401,
tornado/,131,The following types are accepted by RequestHandler.set_header,
tornado/,132,and related methods.,
tornado/,192,"type: Dict[str, template.BaseLoader]",
tornado/,198,Will be set in _execute.,
tornado/,199,type: List[OutputTransform],
tornado/,200,type: List[str],
tornado/,201,"type: Dict[str, str]",
tornado/,220,UIModules are available as both `modules` and `_tt_modules` in the,
tornado/,221,template namespace.  Historically only `modules` was available,
tornado/,222,but could be clobbered by user additions to the namespace.,
tornado/,223,The template {% module %} directive looks in `_tt_modules` to avoid,
tornado/,224,possible conflicts.,
tornado/,229,TODO: need to add set_close_callback to HTTPConnection interface,
tornado/,230,type: ignore,
tornado/,233,type: ignore,
tornado/,238,"type: Callable[..., None]",
tornado/,266,"type: Callable[..., Optional[Awaitable[None]]]",
tornado/,267,"type: Callable[..., Optional[Awaitable[None]]]",
tornado/,268,"type: Callable[..., Optional[Awaitable[None]]]",
tornado/,269,"type: Callable[..., Optional[Awaitable[None]]]",
tornado/,270,"type: Callable[..., Optional[Awaitable[None]]]",
tornado/,271,"type: Callable[..., Optional[Awaitable[None]]]",
tornado/,272,"type: Callable[..., Optional[Awaitable[None]]]",
tornado/,329,type: List[bytes],
tornado/,396,Convert the input value to a str. This type check is a bit,
tornado/,397,"subtle: The bytes case only executes on python 3, and the",
tornado/,398,"unicode case only executes on python 2, because the other",
tornado/,399,cases are covered by the first match for str.,
tornado/,402,py3,
tornado/,403,"Non-ascii characters in headers are not well supported,",
tornado/,404,"but if you pass bytes, use latin1 so they pass through as-is.",
tornado/,406,py2,
tornado/,407,"TODO: This is inconsistent with the use of latin1 above,",
tornado/,408,but it's been that way for a long time. Should it change?,
tornado/,411,return immediately since we know the converted value will be safe,
tornado/,417,"If \n is allowed into the header, it is possible to inject",
tornado/,418,additional headers or split the request.,
tornado/,428,noqa: F811,
tornado/,434,noqa: F811,
tornado/,439,noqa: F811,
tornado/,465,Make sure `get_arguments` isn't accidentally being called with a,
tornado/,466,positional argument that's assumed to be a default (like in,
tornado/,467,`get_argument`.),
tornado/,549,Get rid of any weird control chars (unless decoding gave,
tornado/,550,"us bytes, in which case leave it alone)",
tornado/,620,"The cookie library only accepts type str, in both python 2 and 3",
tornado/,624,Don't let us accidentally inject bad stuff,
tornado/,629,type: http.cookies.SimpleCookie,
tornado/,646,skip falsy values for httponly and secure flags because,
tornado/,647,SimpleCookie sets them regardless,
tornado/,839,noqa: E501,
tornado/,865,Insert the additional JS and CSS added by the modules on the page,
tornado/,899,Maintain order of JavaScript files given by modules,
tornado/,930,type: Set[str],
tornado/,965,type: Set[str],
tornado/,994,"If no template_path is specified, use the path of the calling file",
tornado/,1051,"autoescape=None means ""no escaping"", so we have to be sure",
tornado/,1052,to only pass this kwarg if the user asked for it.,
tornado/,1082,Ignore the chunk and only write the headers for HEAD requests,
tornado/,1086,Finalize the cookie headers (which have been stored in a side,
tornado/,1087,object so an outgoing cookie could be overwritten before it,
tornado/,1088,is sent).,
tornado/,1100,Ignore the chunk and only write the headers for HEAD requests,
tornado/,1104,type: Future[None],
tornado/,1129,Automatically support ETags and add the Content-Length header if,
tornado/,1130,we have not flushed any content yet.,
tornado/,1151,"Now that the request is finished, clear the callback we",
tornado/,1152,set on the HTTPConnection (which would otherwise prevent the,
tornado/,1153,garbage collection of the RequestHandler when there,
tornado/,1154,are keepalive connections),
tornado/,1155,type: ignore,
tornado/,1177,TODO: add detach to HTTPConnection?,
tornado/,1178,type: ignore,
tornado/,1181,Break up a reference cycle between this handler and the,
tornado/,1182,_ui_module closures to allow for faster GC on CPython.,
tornado/,1183,type: ignore,
tornado/,1199,"If we get an error between writing headers and finishing,",
tornado/,1200,we are unlikely to be able to finish due to a,
tornado/,1201,Content-Length mismatch. Try anyway to release the,
tornado/,1202,socket.,
tornado/,1236,"in debug mode, try to send a traceback",
tornado/,1473,Treat unknown versions as not present instead of failing.,
tornado/,1481,We don't have a usable timestamp in older versions.,
tornado/,1485,Catch exceptions and return nothing instead of failing.,
tornado/,1507,"Prior to release 1.1.1, this check was ignored if the HTTP header",
tornado/,1508,``X-Requested-With: XMLHTTPRequest`` was present.  This exception,
tornado/,1509,has been shown to be insecure and has been removed.  For more,
tornado/,1510,information please see,
tornado/,1511,http://www.djangoproject.com/weblog/2011/feb/08/security/,
tornado/,1512,http://weblog.rubyonrails.org/2011/2/8/csrf-protection-bypass-in-ruby-on-rails,
tornado/,1638,Find all weak and strong etag values from If-None-Match header,
tornado/,1639,because RFC 7232 allows multiple etag values in a single header.,
tornado/,1650,Use a weak comparison when comparing entity-tags.,
tornado/,1672,"If XSRF cookies are turned on, reject form submissions without",
tornado/,1673,the proper cookie,
tornado/,1685,Tell the Application we've finished with prepare(),
tornado/,1686,and are ready for the body to arrive.,
tornado/,1692,In streaming mode request.body is a Future that signals,
tornado/,1693,the body has been completely received.  The Future has no,
tornado/,1694,result; the data has been passed to self.data_received,
tornado/,1695,instead.,
tornado/,1713,Unset result to avoid circular references,
tornado/,1716,"In case we failed before setting _prepared_future, do it",
tornado/,1717,now (to unblock the HTTP server).  Note that this is not,
tornado/,1718,in a finally block to avoid GC issues prior to Python 3.4.,
tornado/,1748,Not an error; just finish the request without logging.,
tornado/,1755,An error here should still get a best-effort send_error(),
tornado/,1756,to avoid leaking the connection.,
tornado/,1759,Extra errors after the request has been finished should,
tornado/,1760,"be logged, but there is no reason to continue to try and",
tornado/,1761,send a response.,
tornado/,1793,type: ignore,
tornado/,1797,type: ignore,
tornado/,1799,"type: Dict[str, UIModule]",
tornado/,1811,304 responses should not contain representation metadata,
tornado/,1812,headers (defined in,
tornado/,1813,https://tools.ietf.org/html/rfc7231#section-3.1),
tornado/,1814,not explicitly allowed by,
tornado/,1815,https://tools.ietf.org/html/rfc7232#section-4.1,
tornado/,1841,noqa: E501,
tornado/,1865,type: ignore,
tornado/,1871,don't try to redirect '/' to '',
tornado/,1894,type: ignore,
tornado/,1933,type: ignore,
tornado/,2043,type: List[Type[OutputTransform]],
tornado/,2055,"type: Dict[str, Callable[..., str]]",
tornado/,2085,Automatically reload modified modules,
tornado/,2166,Legacy HTTPServer interface,
tornado/,2266,type: List[bytes],
tornado/,2298,type: ignore,
tornado/,2301,"If template cache is disabled (usually in the debug mode),",
tornado/,2302,re-compile templates and reload static files on every,
tornado/,2303,request so you don't need to restart to see changes,
tornado/,2318,Note that if an exception escapes handler._execute it will be,
tornado/,2319,"trapped in the Future it returns (which we are ignoring here,",
tornado/,2320,leaving it to be logged when the Future is GC'd).,
tornado/,2321,"However, that shouldn't happen because _execute has a blanket",
tornado/,2322,"except handler, and we cannot easily access the IOLoop here to",
tornado/,2323,call add_future (because of the requirement to remain compatible,
tornado/,2324,with WSGI),
tornado/,2329,"If we are streaming the request body, then execute() is finished",
tornado/,2330,"when the handler has prepared to receive the body.  If not,",
tornado/,2331,it doesn't matter when execute() finishes (so we return None),
tornado/,2437,"POSTs to an ErrorHandler don't actually have side effects,",
tornado/,2438,so we don't need to check the xsrf token.  This allows POSTs,
tornado/,2439,to the wrong url to return a 404 instead of 403.,
tornado/,2483,TODO: figure out typing for the next line.,
tornado/,2486,type: ignore,
tornado/,2558,10 years,
tornado/,2560,"type: Dict[str, Optional[str]]",
tornado/,2561,protects _static_hashes,
tornado/,2576,Set up our path instance variables.,
tornado/,2578,make sure we don't refer to path instead of self.path again,
tornado/,2594,"As per RFC 2616 14.16, if an invalid Range header is specified,",
tornado/,2595,the request will be treated as if the header didn't exist.,
tornado/,2609,"As per RFC 2616 14.35.1, a range is not satisfiable only: if",
tornado/,2610,the first requested byte is equal to or greater than the,
tornado/,2611,"content, or when a suffix with length 0 is specified.",
tornado/,2612,https://tools.ietf.org/html/rfc7233#section-2.1,
tornado/,2613,A byte-range-spec is invalid if the last-byte-pos value is present,
tornado/,2614,and less than the first-byte-pos.,
tornado/,2615,Range Not Satisfiable,
tornado/,2620,Clients sometimes blindly use a large range to limit their,
tornado/,2621,download size; cap the endpoint at the actual file size.,
tornado/,2623,Note: only return HTTP 206 if less than the entire range has been,
tornado/,2624,"requested. Not only is this semantically correct, but Chrome",
tornado/,2625,refuses to play audio if it gets an HTTP 206 in response to,
tornado/,2626,``Range: bytes=0-``.,
tornado/,2628,Partial Content,
tornado/,2703,"If client sent If-None-Match, use it, ignore If-Modified-Since",
tornado/,2707,"Check the If-Modified-Since, and don't send the result if the",
tornado/,2708,content has not been modified,
tornado/,2757,os.path.abspath strips a trailing /.,
tornado/,2758,We must add it back to `root` so that we only match files,
tornado/,2759,in a directory named `root` instead of files starting with,
tornado/,2760,that prefix.,
tornado/,2763,"abspath always removes a trailing slash, except when",
tornado/,2764,"root is '/'. This is an unusual case, but several projects",
tornado/,2765,have independently discovered this technique to disable,
tornado/,2766,"Tornado's path validation and (hopefully) do their own,",
tornado/,2767,so we need to support it.,
tornado/,2769,The trailing slash also needs to be temporarily added back,
tornado/,2770,the requested path so a request to root/ will match.,
tornado/,2774,need to look at the request.path here for when path is empty,
tornado/,2775,but there is some prefix to the path that was already,
tornado/,2776,trimmed by the routing,
tornado/,2809,type: Optional[int],
tornado/,2873,"NOTE: Historically, this used stat_result[stat.ST_MTIME],",
tornado/,2874,which truncates the fractional portion of the timestamp. It,
tornado/,2875,was changed from that form to stat_result.st_mtime to,
tornado/,2876,"satisfy mypy (which disallows the bracket operator), but the",
tornado/,2877,latter form returns a float instead of an int. For,
tornado/,2878,consistency with the past (and because we have a unit test,
tornado/,2879,"that relies on this), we truncate the float here, although",
tornado/,2880,I'm not sure that's the right thing to do.,
tornado/,2891,"per RFC 6713, use the appropriate type for a gzip compressed file",
tornado/,2894,As of 2015-07-21 there is no bzip2 encoding defined at,
tornado/,2895,http://www.iana.org/assignments/media-types/media-types.xhtml,
tornado/,2896,"So for that (and any other encoding), use octet-stream.",
tornado/,2901,"if mime_type not detected, use application/octet-stream",
tornado/,3065,Whitelist of compressible mime types (in addition to any types,
tornado/,3066,"beginning with ""text/"").",
tornado/,3078,"Python's GzipFile defaults to level 9, while most other gzip",
tornado/,3079,"tools (including gzip itself) default to 6, which is probably a",
tornado/,3080,better CPU/size tradeoff.,
tornado/,3082,Responses that are too short are unlikely to benefit from gzipping,
tornado/,3083,"after considering the ""Content-Encoding: gzip"" header and the header",
tornado/,3084,inside the gzip encoding.,
tornado/,3085,Note that responses written in multiple chunks will be compressed,
tornado/,3086,regardless of size.,
tornado/,3102,TODO: can/should this type be inherited from the superclass?,
tornado/,3122,The original content length is no longer correct.,
tornado/,3123,"If this is the last (and only) chunk, we can set the new",
tornado/,3124,content-length; otherwise we remove it and fall back to,
tornado/,3125,chunked encoding.,
tornado/,3160,type: ignore,
tornado/,3168,"if login url is absolute, make next absolute too",
tornado/,3250,type: ignore,
tornado/,3255,type: ignore,
tornado/,3277,keep resources in both a list and a dict to preserve order,
tornado/,3278,"type: List[Dict[str, Any]]",
tornado/,3279,"type: Dict[str, Dict[str, Any]]",
tornado/,3281,type: ignore,
tornado/,3282,type: ignore,
tornado/,3370,The v2 format consists of a version number and a series of,
tornado/,3371,"length-prefixed fields ""%d:%s"", the last of which is a",
tornado/,3372,"signature, all separated by pipes.  All numbers are in",
tornado/,3373,decimal format with no leading zeros.  The signature is an,
tornado/,3374,"HMAC-SHA256 of the whole string up to that point, including",
tornado/,3375,the final pipe.,
tornado/,3376,,
tornado/,3377,The fields are:,
tornado/,3378,- format version (i.e. 2; no length prefix),
tornado/,3379,"- key version (integer, default is 0)",
tornado/,3380,- timestamp (integer seconds since epoch),
tornado/,3381,- name (not encoded; assumed to be ~alphanumeric),
tornado/,3382,- value (base64-encoded),
tornado/,3383,- signature (hex-encoded; no length prefix),
tornado/,3411,A leading version number in decimal,
tornado/,3412,"with no leading zeros, followed by a pipe.",
tornado/,3417,Figures out what version value is.  Version 1 did not include an,
tornado/,3418,"explicit version field and started with arbitrary base64 data,",
tornado/,3419,which makes this tricky.,
tornado/,3427,Certain payloads from the version-less v1 format may,
tornado/,3428,be parsed as valid integers.  Due to base64 padding,
tornado/,3429,"restrictions, this can only happen for numbers whose",
tornado/,3430,"length is a multiple of 4, so we can treat all",
tornado/,3431,"numbers up to 999 as versions, and for the rest we",
tornado/,3432,fall back to v1 format.,
tornado/,3489,_cookie_signature does not hash a delimiter between the,
tornado/,3490,"parts of the cookie, so an attacker could transfer trailing",
tornado/,3491,digits from the payload to the timestamp without altering the,
tornado/,3492,"signature.  For backwards compatibility, sanity-check timestamp",
tornado/,3493,here instead of modifying _cookie_signature.,
tornado/,3510,"In python 3, indexing bytes returns small integers; we must",
tornado/,3511,use a slice to get a byte string as in python 2.,
tornado/,3517,remove version number,
tornado/,3557,The signature has expired.,
tornado/,97,noqa: F401,
tornado/,128,StopIteration has a value attribute beginning in py33.,
tornado/,129,So does our Return class.,
tornado/,134,Cython backports coroutine functionality by putting the value in,
tornado/,135,e.args[0].,
tornado/,142,type: Future,
tornado/,143,Fixup asyncio debug info by removing extraneous stack entries,
tornado/,146,Each traceback entry is equivalent to a,
tornado/,147,"(filename, self.lineno, self.name, self.line) tuple",
tornado/,186,"type: (*Any, **Any) -> Future[_T]",
tornado/,187,This function is type-annotated with a comment to work around,
tornado/,188,https://bitbucket.org/pypy/pypy/issues/2868/segfault-with-args-type-annotation-in,
tornado/,199,Avoid circular references,
tornado/,200,type: ignore,
tornado/,203,Inline the first iteration of Runner.run.  This lets us,
tornado/,204,avoid the cost of creating a Runner when the coroutine,
tornado/,205,"never actually yields, which in turn allows us to",
tornado/,206,"use ""optional"" coroutines in critical path code without",
tornado/,207,performance penalty for the synchronous case.,
tornado/,217,Provide strong references to Runner objects as long,
tornado/,218,as their result future objects also have strong,
tornado/,219,references (typically from the parent coroutine's,
tornado/,220,Runner). This keeps the coroutine's Runner alive.,
tornado/,221,We do this by exploiting the public API,
tornado/,222,add_done_callback() instead of putting a private,
tornado/,223,attribute on the Future.,
tornado/,224,"(Github issues #1769, #2229).",
tornado/,231,"Subtle memory optimization: if next() raised an exception,",
tornado/,232,the future's exc_info contains a traceback which,
tornado/,233,"includes this stack frame.  This creates a cycle,",
tornado/,234,which will be collected at the next full GC but has,
tornado/,235,been shown to greatly increase memory usage of,
tornado/,236,benchmarks (relative to the refcount-based scheme,
tornado/,237,used in the absence of cycles).  We can avoid the,
tornado/,238,cycle by clearing the local variable after we return it.,
tornado/,239,type: ignore,
tornado/,243,type: ignore,
tornado/,244,type: ignore,
tornado/,281,Cython recognizes subclasses of StopIteration with a .args tuple.,
tornado/,340,"type: Dict[Future, Union[int, str]]",
tornado/,348,type: Sequence[Future],
tornado/,353,type: Deque[Future],
tornado/,354,"type: Optional[Union[str, int]]",
tornado/,355,type: Optional[Future],
tornado/,356,type: Optional[Future],
tornado/,365,Clear the 'current' values when iteration is done.,
tornado/,404,Lookup by name to silence pyflakes on older versions.,
tornado/,482,type: Optional[List],
tornado/,483,type: Iterable,
tornado/,518,type: Set[Future],
tornado/,581,It's tempting to optimize this by cancelling the input future on timeout,
tornado/,582,"instead of creating a new one, but A) we can't know if we are the only",
tornado/,583,"one waiting on the input future, so cancelling it might disrupt other",
tornado/,584,callers and B) concurrent futures can only be cancelled while they are,
tornado/,585,"in the queue, so cancellation cannot reliably bound our waiting time.",
tornado/,605,"In case the wrapped future goes on to fail, log it.",
tornado/,610,"We know this future will resolve on the IOLoop, so we don't",
tornado/,611,need the extra thread-safety of IOLoop.add_future (and we also,
tornado/,612,don't care about StackContext here.,
tornado/,617,"concurrent.futures.Futures may resolve on any thread, so we",
tornado/,618,need to route them back to the IOLoop.,
tornado/,666,_null_future is used as a dummy value in the coroutine runner. It differs,
tornado/,667,from moment in that moment always adds a delay of one IOLoop iteration,
tornado/,668,while _null_future is processed as soon as possible.,
tornado/,708,"type: Union[None, Future]",
tornado/,713,type: ignore,
tornado/,742,type: ignore,
tornado/,744,Break up a reference to itself,
tornado/,745,for faster GC on CPython.,
tornado/,756,type: ignore,
tornado/,762,type: ignore,
tornado/,785,Break a reference cycle to speed GC.,
tornado/,786,noqa: F841,
tornado/,805,Convert Awaitables into Futures.,
tornado/,809,"asyncio.ensure_future was introduced in Python 3.4.4, but",
tornado/,810,Debian jessie still ships with 3.4.2 so try the old name.,
tornado/,836,type: ignore,
tornado/,840,type: ignore,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,58,noqa: F401,
tornado/,65,type: ignore,
tornado/,67,These errnos indicate that a connection has been abruptly terminated.,
tornado/,68,They should be caught and handled less noisily than other errors.,
tornado/,72,type: ignore,
tornado/,73,type: ignore,
tornado/,74,type: ignore,
tornado/,75,type: ignore,
tornado/,79,OSX appears to have a race condition that causes send(2) to return,
tornado/,80,EPROTOTYPE if called while a socket is being torn down:,
tornado/,81,http://erickt.github.io/blog/2014/11/19/adventures-in-debugging-a-potential-osx-kernel-bug/,
tornado/,82,"Since the socket is being closed anyway, treat this as an ECONNRESET",
tornado/,83,instead of an unexpected error.,
tornado/,84,type: ignore,
tornado/,130,"A sequence of (False, bytearray) and (True, memoryview) objects",
tornado/,133,"type: Deque[Tuple[bool, Union[bytearray, memoryview]]]",
tornado/,134,Position in the first buffer,
tornado/,141,Data above this size will be appended separately instead,
tornado/,142,of extending an existing bytearray,
tornado/,163,type: ignore,
tornado/,204,Amortized O(1) shrink for Python 2,
tornado/,257,A chunk size that is too close to max_buffer_size can cause,
tornado/,258,spurious failures.,
tornado/,261,type: Optional[BaseException],
tornado/,266,type: Optional[bytearray],
tornado/,270,type: Optional[bytes],
tornado/,271,type: Optional[Pattern],
tornado/,272,type: Optional[int],
tornado/,273,type: Optional[int],
tornado/,276,type: Optional[Future],
tornado/,279,"type: Deque[Tuple[int, Future[None]]]",
tornado/,280,"type: Optional[Callable[[], None]]",
tornado/,281,type: Optional[Future[IOStream]],
tornado/,282,_ssl_connect_future should be defined in SSLIOStream,
tornado/,283,but it's here so we can clean it up in _signal_closed,
tornado/,284,TODO: refactor that so subclasses can add additional futures,
tornado/,285,to be cancelled.,
tornado/,286,type: Optional[Future[SSLIOStream]],
tornado/,288,type: Optional[int],
tornado/,363,Handle this the same way as in _handle_events.,
tornado/,368,Ensure that the future doesn't log an error because its,
tornado/,369,failure was never examined.,
tornado/,400,Handle this the same way as in _handle_events.,
tornado/,456,First copy data already in read buffer,
tornado/,469,Set up the supplied buffer as our temporary read buffer.,
tornado/,470,The original (if it had any data remaining) has been,
tornado/,471,saved for later.,
tornado/,545,type: Future[None],
tornado/,603,resolve reads that are pending and ready to complete,
tornado/,619,type: List[Future],
tornado/,631,"Reference the exception to silence warnings. Annoyingly,",
tornado/,632,"this raises if the future was cancelled, but just",
tornado/,633,returns any other error.,
tornado/,639,_ssl_connect_future expects to see the real exception (typically,
tornado/,640,"an ssl.SSLError), not just StreamClosedError.",
tornado/,652,Clear the buffers so they can be cleared immediately even,
tornado/,653,if the IOStream object is kept alive by a reference cycle.,
tornado/,654,TODO: Clear the read buffer too; it currently breaks some tests.,
tornado/,655,type: ignore,
tornado/,693,Most IOLoops will report a write failed connect,
tornado/,694,"with the WRITE event, but SelectIOLoop reports a",
tornado/,695,READ as well so we must check for connecting before,
tornado/,696,either.,
tornado/,710,We may have queued up a user callback in _handle_read or,
tornado/,711,"_handle_write, so don't close the IOStream until those",
tornado/,712,callbacks have had a chance to run.,
tornado/,721,"If the connection is idle, listen for reads too so",
tornado/,722,we can tell if the connection is closed.  If there is,
tornado/,723,data in the read buffer we won't run the close callback,
tornado/,724,"yet anyway, so we don't need to listen in this case.",
tornado/,741,This method is called from _handle_read and _try_inline_read.,
tornado/,743,type: Optional[int],
tornado/,747,"For read_until without max_bytes, or",
tornado/,748,"read_until_close, read as much as we can before",
tornado/,749,scanning for the delimiter.,
tornado/,755,Read from the socket until we get EWOULDBLOCK or equivalent.,
tornado/,756,"SSL sockets do some internal buffering, and if the data is",
tornado/,757,sitting in the SSL object's buffer select() and friends,
tornado/,758,can't see it; the only way to find out if it's there is to,
tornado/,759,try to read it.,
tornado/,763,"If we've read all the bytes we can use, break out of",
tornado/,764,this loop.,
tornado/,766,"If we've reached target_bytes, we know we're done.",
tornado/,770,"Otherwise, we need to call the more expensive find_read_pos.",
tornado/,771,"It's inefficient to do this on every read, so instead",
tornado/,772,do it on the first read and whenever the read buffer,
tornado/,773,size has doubled.,
tornado/,797,It is an error to start a read while a prior read is unresolved.,
tornado/,798,"However, if the prior read is unresolved because the stream was",
tornado/,799,"closed without satisfying it, it's better to raise",
tornado/,800,"StreamClosedError instead of AssertionError. In particular, this",
tornado/,801,situation occurs in harmless situations in http1connection.py and,
tornado/,802,an AssertionError would be logged noisily.,
tornado/,803,,
tornado/,804,"On the other hand, it is legal to start a new read while the",
tornado/,805,"stream is closed, in case the read can be satisfied from the",
tornado/,806,read buffer. So we only want to check the closed status of the,
tornado/,807,stream if we need to decide what kind of error to raise for,
tornado/,808,"""already reading"".",
tornado/,809,,
tornado/,810,These conditions have proven difficult to test; we have no,
tornado/,811,unittests that reliably verify this behavior so be careful,
tornado/,812,when making changes here. See #2651 and #2719.,
tornado/,825,"type: Union[int, bytes]",
tornado/,841,See if we've already got the data from a previous read,
tornado/,851,"We couldn't satisfy the read inline, so make sure we're",
tornado/,852,listening for new data unless the stream is closed.,
tornado/,869,"type: Union[memoryview, bytearray]",
tornado/,874,ssl.SSLError is a subclass of socket.error,
tornado/,876,Treat ECONNRESET as a connection close rather than,
tornado/,877,an error to minimize log spam  (the exception will,
tornado/,878,be available on self.error for apps that care).,
tornado/,893,Break the reference to buf so we don't waste a chunk's worth of,
tornado/,894,memory in case an exception hangs on to our stack frame.,
tornado/,926,Multi-byte delimiters (e.g. '\r\n') may straddle two,
tornado/,927,"chunks in the read buffer, so we can't easily find them",
tornado/,928,"without collapsing the buffer.  However, since protocols",
tornado/,929,using delimited reads (as opposed to reads of a known,
tornado/,930,"length) tend to be ""line"" oriented, the delimiter is likely",
tornado/,931,to be in the first few chunks.  Merge the buffer gradually,
tornado/,932,since large merges are relatively expensive and get undone in,
tornado/,933,_consume().,
tornado/,969,"On windows, socket.send blows up if given a",
tornado/,970,"write buffer that's too large, instead of just",
tornado/,971,returning the number of bytes it was able to,
tornado/,972,process.  Therefore we must not call socket.send,
tornado/,973,with more than 128KB at a time.,
tornado/,985,Broken pipe errors are usually caused by connection,
tornado/,986,"reset, and its better to not log EPIPE errors to",
tornado/,987,minimize log spam,
tornado/,1000,Consume loc bytes from the read buffer and return them,
tornado/,1004,"Slice the bytearray buffer into bytes, without intermediate copying",
tornado/,1012,Amortized O(1) shrink,
tornado/,1013,(this heuristic is implemented natively in Python 3.4+,
tornado/,1014,but is replicated here for Python 2),
tornado/,1025,This method is part of an optimization: to detect a connection that,
tornado/,1026,"is closed when we're not actively reading or writing, we must listen",
tornado/,1027,"for read events.  However, it is inefficient to do this when the",
tornado/,1028,connection is first established because we are going to read or write,
tornado/,1029,"immediately anyway.  Instead, we insert checks at various times to",
tornado/,1030,see if the connection is idle and add the read listener then.,
tornado/,1059,"connection has been closed, so there can be no future events",
tornado/,1137,type: ignore,
tornado/,1153,type: ignore,
tornado/,1155,"Avoid keeping to data, which can be a memoryview.",
tornado/,1156,See https://github.com/tornadoweb/tornado/pull/2008,
tornado/,1207,type: Future[_IOStreamType],
tornado/,1212,In non-blocking mode we expect connect() to raise an,
tornado/,1213,exception with EINPROGRESS or EWOULDBLOCK.,
tornado/,1216,"On freebsd, other errors such as ECONNREFUSED may be",
tornado/,1217,returned immediately when attempting to connect to,
tornado/,1218,"localhost, so handle them the same way as an error",
tornado/,1219,reported later in _handle_connect.,
tornado/,1284,type: ignore,
tornado/,1295,type: Future[SSLIOStream],
tornado/,1307,Hurd doesn't allow SO_ERROR for loopback sockets because all,
tornado/,1308,errors for such sockets are reported synchronously.,
tornado/,1313,IOLoop implementations may vary: some of them return,
tornado/,1314,"an error state before the socket becomes writable, so",
tornado/,1315,in that case a connection failure would be handled by the,
tornado/,1316,error path in _handle_events instead of here.,
tornado/,1341,Sometimes setsockopt will fail if the socket is closed,
tornado/,1342,at the wrong time.  This can happen with HTTPServer,
tornado/,1343,resetting the value to ``False`` between requests.,
tornado/,1360,type: ssl.SSLSocket,
tornado/,1372,type: Optional[str],
tornado/,1374,"If the socket is already connected, attempt to start the handshake.",
tornado/,1380,"Indirectly start the handshake, which will run on the next",
tornado/,1381,IOLoop iteration and then the real IO state will be set in,
tornado/,1382,_handle_events.,
tornado/,1392,Based on code from test_ssl.py in the python stdlib,
tornado/,1417,Some port scans (e.g. nmap in -sT mode) have been known,
tornado/,1418,"to cause do_handshake to raise EBADF and ENOTCONN, so make",
tornado/,1419,those errors quiet as well.,
tornado/,1420,https://groups.google.com/forum/?fromgroups#!topic/python-tornado/ApucKJat1_0,
tornado/,1421,Errno 0 is also possible in some cases (nc -z).,
tornado/,1422,https://github.com/tornadoweb/tornado/issues/2504,
tornado/,1431,"On Linux, if the connection was reset before the call to",
tornado/,1432,"wrap_socket, do_handshake will fail with an",
tornado/,1433,AttributeError.,
tornado/,1491,"Ignore the result of connect(). If it fails,",
tornado/,1492,wait_for_handshake will raise an error too. This is,
tornado/,1493,necessary for the old semantics of the connect callback,
tornado/,1494,(which takes no arguments). In 6.0 this can be refactored to,
tornado/,1495,be a regular coroutine.,
tornado/,1496,"TODO: This is trickier than it looks, since if write()",
tornado/,1497,"is called with a connect() pending, we want the connect",
tornado/,1498,to resolve before the write. Or do we care about this?,
tornado/,1499,"(There's a test for it, but I think in practice users",
tornado/,1500,either wait for the connect before performing a write or,
tornado/,1501,they don't care about the connect Future at all),
tornado/,1507,Call the superclass method to check for errors.,
tornado/,1511,"When the connection is complete, wrap the socket for SSL",
tornado/,1512,traffic.  Note that we do this by overriding _handle_connect,
tornado/,1513,instead of by passing a callback to super().connect because,
tornado/,1514,"user callbacks are enqueued asynchronously on the IOLoop,",
tornado/,1515,but since _handle_events calls _handle_connect immediately,
tornado/,1516,followed by _handle_write we need this to be synchronous.,
tornado/,1517,,
tornado/,1518,The IOLoop will get confused if we swap out self.socket while the,
tornado/,1519,"fd is registered, so remove it now and re-register after",
tornado/,1520,wrap_socket().,
tornado/,1567,type: ignore,
tornado/,1570,"In Python 3.5+, SSLSocket.send raises a WANT_WRITE error if",
tornado/,1571,the socket is not writeable; we need to transform this into,
tornado/,1572,"an EWOULDBLOCK socket.error or a zero return value,",
tornado/,1573,either of which will be recognized by the caller of this,
tornado/,1574,"method. Prior to Python 3.5, an unwriteable socket would",
tornado/,1575,simply return 0 bytes written.,
tornado/,1579,"Avoid keeping to data, which can be a memoryview.",
tornado/,1580,See https://github.com/tornadoweb/tornado/pull/2008,
tornado/,1586,"If the handshake hasn't finished yet, there can't be anything",
tornado/,1587,to read (attempting to read may or may not raise an exception,
tornado/,1588,depending on the SSL version),
tornado/,1593,"SSLError is a subclass of socket.error, so this except",
tornado/,1594,block must come first.,
tornado/,1633,type: ignore,
tornado/,1635,"Avoid keeping to data, which can be a memoryview.",
tornado/,1636,See https://github.com/tornadoweb/tornado/pull/2008,
tornado/,1641,type: ignore,
tornado/,1644,"If the writing half of a pipe is closed, select will",
tornado/,1645,report it as readable but reads will fail with EBADF.,
tornado/,35,Additional imports only used in type comments.,
tornado/,36,This lets us make these imports lazy.,
tornado/,37,noqa: F401,
tornado/,38,noqa: F401,
tornado/,39,noqa: F401,
tornado/,40,noqa: F401,
tornado/,42,Aliases for types that are spelled differently in different Python,
tornado/,43,versions. bytes_type is deprecated and no longer used in Tornado,
tornado/,44,itself but is left in case anyone outside Tornado is using it.,
tornado/,52,Emulate it,
tornado/,54,type: List[None],
tornado/,58,Not referencing any globals here,
tornado/,98,Magic parameter makes zlib module understand gzip header,
tornado/,99,http://stackoverflow.com/questions/1838699/how-can-i-decompress-a-gzip-stream-with-zlib,
tornado/,100,"This works on cpython and pypy, but not jython.",
tornado/,164,exec(string) inherits the caller's future imports; compile,
tornado/,165,the string first to prevent that.,
tornado/,171,"type: Tuple[Optional[type], Optional[BaseException], Optional[TracebackType]]",
tornado/,173,type: (...) -> typing.NoReturn,
tornado/,174,,
tornado/,175,This function's type annotation must use comments instead of,
tornado/,176,real annotations because typing.NoReturn does not exist in,
tornado/,177,python 3.5's typing module. The formatting is funky because this,
tornado/,178,is apparently what flake8 wants.,
tornado/,185,Clear the traceback reference from our stack frame to,
tornado/,186,minimize circular references that slow down GC.,
tornado/,201,type: ignore,
tornado/,260,Type annotations on this class are mostly done with comments,
tornado/,261,"because they need to refer to Configurable, which isn't defined",
tornado/,262,until after the class definition block. These can use regular,
tornado/,263,annotations when our minimum python version is 3.7.,
tornado/,264,,
tornado/,265,There may be a clever way to use generics here to get more,
tornado/,266,"precise types (i.e. for a particular Configurable subclass T,",
tornado/,267,"all the types are subclasses of T, not just Configurable).",
tornado/,268,type: Optional[Type[Configurable]],
tornado/,269,"type: Dict[str, Any]",
tornado/,273,"type: Dict[str, Any]",
tornado/,282,"The impl class is itself configurable, so recurse.",
tornado/,285,initialize vs __init__ chosen for compatibility with AsyncHTTPClient,
tornado/,286,singleton magic.  If we get rid of that we can switch to __init__,
tornado/,287,here too.,
tornado/,293,type: () -> Type[Configurable],
tornado/,305,type: () -> Type[Configurable],
tornado/,312,"type: Callable[..., None]",
tornado/,323,"type: (Union[None, str, Type[Configurable]], Any) -> None",
tornado/,340,type: () -> Type[Configurable],
tornado/,343,Manually mangle the private name to see whether this base,
tornado/,344,has been configured (and not another base higher in the,
tornado/,345,hierarchy).,
tornado/,351,"Should be impossible, but mypy wants an explicit check.",
tornado/,356,"type: () -> Tuple[Optional[Type[Configurable]], Dict[str, Any]]",
tornado/,362,"type: (Tuple[Optional[Type[Configurable]], Dict[str, Any]]) -> None",
tornado/,379,type: Optional[int],
tornado/,381,Not a positional parameter,
tornado/,389,Cython-generated code has all the attributes needed,
tornado/,390,"by inspect.getfullargspec, but the inspect module only",
tornado/,391,works with ordinary functions. Inline the portion of,
tornado/,392,getfullargspec that we need here. Note that for static,
tornado/,393,functions the @cython.binding(True) decorator must,
tornado/,394,be used (for methods it works out of the box).,
tornado/,395,type: ignore,
tornado/,424,The arg to replace is passed positionally,
tornado/,426,*args is normally a tuple,
tornado/,429,The arg to replace is either omitted or passed by keyword.,
tornado/,436,type: (datetime.timedelta) -> float,
tornado/,458,These environment variables exist to make it easier to do performance,
tornado/,459,comparisons; they are not guaranteed to remain supported in the future.,
tornado/,471,type: () -> unittest.TestSuite,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,135,we have to use self.__dict__ because we override setattr.,
tornado/,271,"Can be called directly, or through top level define() fn, in which",
tornado/,272,"case, step up above that frame to look for real caller.",
tornado/,288,type: Optional[str],
tornado/,330,type: List[str],
tornado/,332,All things after the last option are command line arguments,
tornado/,433,"type: Dict[str, List[_Option]]",
tornado/,442,Always print names with dashes in a CLI context.,
tornado/,502,Modify __dict__ directly to bypass __setattr__,
tornado/,519,"This class could almost be made generic, but the way the types",
tornado/,520,interact with the multiple argument makes this tricky. (default,
tornado/,521,"and the callback use List[T], but type is still Type[T]).",
tornado/,549,type: Any,
tornado/,562,"type: Callable[[str], Any]",
tornado/,567,allow ranges of the form X:Y (inclusive at both ends),
tornado/,603,Supported date/time formats in our options,
tornado/,734,Default options,
tornado/,94,Initialize self._closed at the beginning of the constructor,
tornado/,95,so that an exception raised here doesn't lead to confusing,
tornado/,96,failures in __del__.,
tornado/,102,"Create the client while our IOLoop is ""current"", without",
tornado/,103,clobbering the thread's real current IOLoop (if any).,
tornado/,179,"type: Dict[IOLoop, AsyncHTTPClient]",
tornado/,206,type: ignore,
tornado/,207,Make sure the instance knows which cache to remove itself from.,
tornado/,208,It can't simply call _async_clients() because we may be in,
tornado/,209,__new__(AsyncHTTPClient) but instance.__class__ may be,
tornado/,210,SimpleAsyncHTTPClient.,
tornado/,241,If there's an object other than self in the instance,
tornado/,242,"cache for our IOLoop, something has gotten mixed up. A",
tornado/,243,value of None appears to be possible when this is called,
tornado/,244,from a destructor (HTTPClient.__del__) as the weakref,
tornado/,245,gets cleared before the destructor runs.,
tornado/,292,"We may modify this (to add Host, Accept-Encoding, etc),",
tornado/,293,so make sure we don't modify the caller's object.  This is also,
tornado/,294,where normal dicts get converted to HTTPHeaders objects.,
tornado/,297,type: Future[HTTPResponse],
tornado/,342,"type: Union[Dict[str, str], httputil.HTTPHeaders]",
tornado/,344,Default values for HTTPRequest parameters.,
tornado/,345,Merged with the values on the request object by AsyncHTTPClient,
tornado/,346,implementations.,
tornado/,507,Note that some of these attributes go through property setters,
tornado/,508,defined below.,
tornado/,509,type: ignore,
tornado/,521,type: ignore,
tornado/,532,type: Optional[bool],
tornado/,551,TODO: headers may actually be a plain dict until fairly late in,
tornado/,552,"the process (AsyncHTTPClient.fetch), but practically speaking,",
tornado/,553,whenever the property is used they're already HTTPHeaders.,
tornado/,554,type: ignore,
tornado/,561,type: ignore,
tornado/,622,I'm not sure why these don't get type-inferred from the references in __init__.,
tornado/,623,type: Optional[BaseException],
tornado/,625,type: HTTPRequest,
tornado/,651,type: Optional[bytes],
tornado/,723,"There is a cyclic reference between self and self.response,",
tornado/,724,which breaks the default __repr__ implementation.,
tornado/,725,"(especially on pypy, which doesn't have the same recursion",
tornado/,726,detection as cpython).,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,43,noqa: F401,
tornado/,145,Ignore args to __init__; real initialization belongs in,
tornado/,146,initialize since we're Configurable. (there's something,
tornado/,147,"weird in initialization order between this class,",
tornado/,148,"Configurable, and TCPServer so we can't leave __init__ out",
tornado/,149,completely),
tornado/,171,This method's signature is not extracted with autodoc,
tornado/,172,because we want its arguments to appear on the class,
tornado/,173,"constructor. When changing this signature, also update the",
tornado/,174,copy in httpserver.rst.,
tornado/,193,type: Set[HTTP1ServerConnection],
tornado/,219,Peek at an arbitrary element of the set,
tornado/,256,type: Optional[httputil.HTTPServerRequest],
tornado/,258,type: List[bytes],
tornado/,295,Save the socket's address family now so we know how to,
tornado/,296,interpret self.address even after the stream is closed,
tornado/,297,and its socket attribute replaced with None.,
tornado/,302,"In HTTPServerRequest we want an IP, not a full socket address.",
tornado/,309,Unix (or other) socket; fake the remote address.,
tornado/,325,"Python 3 with the -bb option warns about str(bytes),",
tornado/,326,so convert it explicitly.,
tornado/,327,Unix socket addresses are str on mac but bytes on linux.,
tornado/,334,"Squid uses X-Forwarded-For, others use X-Real-Ip",
tornado/,336,Skip trusted downstream hosts in X-Forwarded-For list,
tornado/,343,AWS uses X-Forwarded-Proto,
tornado/,348,use only the last proto entry if there is more than one,
tornado/,349,TODO: support trusting mutiple layers of proxied protocol,
tornado/,378,TODO: either make context an official part of the,
tornado/,379,HTTPConnection interface or figure out some other way to do this.,
tornado/,380,type: ignore,
tornado/,395,type: ignore,
tornado/,1,,
tornado/,2,Copyright 2012 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,38,type: ignore,
tornado/,45,type: ignore,
tornado/,49,Logger objects for internal tornado use,
tornado/,68,Very broad exception handling because it's always better to,
tornado/,69,fall back to non-colored logs than to break at startup.,
tornado/,106,noqa: E501,
tornado/,109,Blue,
tornado/,110,Green,
tornado/,111,Yellow,
tornado/,112,Red,
tornado/,113,Magenta,
tornado/,142,"type: Dict[int, str]",
tornado/,148,Convert the terminal control characters from,
tornado/,149,bytes to unicode strings for easier use with the,
tornado/,150,logging module.,
tornado/,156,If curses is not present (currently we'll only get here for,
tornado/,157,"colorama on windows), assume hard-coded ANSI color codes.",
tornado/,167,guaranteed by logging,
tornado/,168,Encoding notes:  The logging module prefers to work with character,
tornado/,169,"strings, but only enforces that log messages are instances of",
tornado/,170,"basestring.  In python 2, non-ascii bytestrings will make",
tornado/,171,their way through the logging framework until they blow up with,
tornado/,172,an unhelpful decoding error (with this formatter it happens,
tornado/,173,"when we attach the prefix, but there are other opportunities for",
tornado/,174,exceptions further along in the framework).,
tornado/,175,,
tornado/,176,"If a byte string makes it this far, convert it to unicode to",
tornado/,177,ensure it will make it out to the logs.  Use repr() as a fallback,
tornado/,178,"to ensure that all byte strings can be converted successfully,",
tornado/,179,but don't do it by default so we don't add extra quotes to ascii,
tornado/,180,"bytestrings.  This is a bit of a hacky place to do this, but",
tornado/,181,it's worth it since the encoding errors that would otherwise,
tornado/,182,result are so useless (and tornado is fond of using utf8-encoded,
tornado/,183,byte strings wherever possible).,
tornado/,202,exc_text contains multiple lines.  We need to _safe_unicode,
tornado/,203,each line separately so that non-utf8 bytes don't cause,
tornado/,204,all the newlines to turn into '\n'.,
tornado/,236,type: logging.Handler,
tornado/,255,Set up color if we are in a tty and curses is installed,
tornado/,271,late import to prevent cycle,
tornado/,1,,
tornado/,2,Copyright 2012 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,43,No longer used; was previously used by @return_future,
tornado/,60,type: futures.Future[_T],
tornado/,115,"Fully type-checking decorators is tricky, and this one is",
tornado/,116,discouraged anyway so it doesn't have all the generic magic.,
tornado/,122,type: Future,
tornado/,158,type: ignore,
tornado/,159,type: ignore,
tornado/,168,concurrent.futures.Future,
tornado/,241,noqa: F811,
tornado/,248,noqa: F811,
tornado/,60,The zlib compressor types aren't actually exposed anywhere,
tornado/,61,"publicly, so declare protocols for the portions we use.",
tornado/,70,type: bytes,
tornado/,76,The common base interface implemented by WebSocketHandler on,
tornado/,77,the server side and WebSocketClientConnection on the client,
tornado/,78,side.,
tornado/,225,type: Optional[WebSocketProtocol],
tornado/,226,type: Optional[int],
tornado/,227,type: Optional[str],
tornado/,228,type: Optional[IOStream],
tornado/,235,Upgrade header should be present and should be equal to WebSocket,
tornado/,243,Connection header should be upgrade.,
tornado/,244,Some proxy servers/load balancers,
tornado/,245,might mess with it.,
tornado/,257,Handle WebSocket Origin naming convention differences,
tornado/,258,The difference between version 8 and 13 is that in 8 the,
tornado/,259,"client sends a ""Sec-Websocket-Origin"" header and in 13 it's",
tornado/,260,"simply ""Origin"".",
tornado/,266,"If there was an origin header, check to make sure it matches",
tornado/,267,"according to check_origin. When the origin is None, we assume it",
tornado/,268,did not come from a browser and that it can be passed on.,
tornado/,397,TODO: Add wbits option.,
tornado/,542,"Check to see that origin matches host directly, including ports",
tornado/,579,"WebSocketHandlers call finish() early, but we don't want to",
tornado/,580,break up reference cycles (which makes it impossible to call,
tornado/,581,self.render_string) until after we've really closed the,
tornado/,582,"connection (if it was established in the first place,",
tornado/,583,indicated by status code 101).,
tornado/,591,"If we get an uncaught exception during the handshake,",
tornado/,592,we have no choice but to abruptly close the connection.,
tornado/,593,"TODO: for uncaught exceptions after the handshake,",
tornado/,594,we can close the connection more gracefully.,
tornado/,610,disable non-WS methods,
tornado/,634,type: Optional[IOStream],
tornado/,667,forcibly tear down the connection,
tornado/,668,let the subclass cleanup,
tornado/,697,"The entry points below are used by WebSocketClientConnection,",
tornado/,698,which was introduced after we only supported a single version of,
tornado/,699,WebSocketProtocol. The WebSocketProtocol/WebSocketProtocol13,
tornado/,700,boundary is currently pretty ad-hoc.,
tornado/,729,There is no symbolic constant for the minimum wbits value.,
tornado/,752,type: Optional[_Compressor],
tornado/,789,type: Optional[_Decompressor],
tornado/,813,Bit masks for the first byte of a frame.,
tornado/,821,type: IOStream,
tornado/,835,type: Optional[bytes],
tornado/,837,type: Optional[bytes],
tornado/,839,type: object,
tornado/,841,type: Optional[_PerMessageDeflateDecompressor],
tornado/,842,type: Optional[_PerMessageDeflateCompressor],
tornado/,843,type: Optional[bool],
tornado/,844,The total uncompressed size of all messages received or sent.,
tornado/,845,Unicode messages are encoded to utf8.,
tornado/,846,Only for testing; subject to change.,
tornado/,849,The total size of all packets received or sent.  Includes,
tornado/,850,"the effect of compression, frame overhead, and control frames.",
tornado/,853,type: Optional[PeriodicCallback],
tornado/,856,type: Optional[int],
tornado/,857,type: Optional[str],
tornado/,859,Use a property for this to satisfy the abc.,
tornado/,905,Magic value,
tornado/,927,TODO: negotiate parameters if compression_options,
tornado/,928,specifies limits.,
tornado/,934,Don't echo an offered client_max_window_bits,
tornado/,935,parameter with no value.,
tornado/,1004,"type: Dict[str, Any]",
tornado/,1019,TODO: handle invalid parameters gracefully,
tornado/,1047,All control frames MUST have a payload length of 125,
tornado/,1048,bytes or less and MUST NOT be fragmented.,
tornado/,1090,"For historical reasons, write methods in Tornado operate in a semi-synchronous",
tornado/,1091,mode in which awaiting the Future they return is optional (But errors can,
tornado/,1092,still be raised). This requires us to go through an awkward dance here,
tornado/,1093,to transform the errors that may be returned while presenting the same,
tornado/,1094,semi-synchronous interface.,
tornado/,1127,Read the frame header.,
tornado/,1135,"Compression flag is present in the first frame's header,",
tornado/,1136,but we can't decompress until we have all the frames of,
tornado/,1137,the message.,
tornado/,1141,client is using as-yet-undefined extensions; abort,
tornado/,1147,Parse and validate the length.,
tornado/,1149,control frames must have payload < 126,
tornado/,1168,"Read the payload, unmasking if necessary.",
tornado/,1176,Decide what to do with this frame.,
tornado/,1178,control frames may be interleaved with a series of fragmented,
tornado/,1179,"data frames, so control frames must not interact with",
tornado/,1180,self._fragmented_*,
tornado/,1182,control frames must not be fragmented,
tornado/,1185,continuation frame,
tornado/,1187,nothing to continue,
tornado/,1195,start of new data message,
tornado/,1197,can't start new message until the old one is finished,
tornado/,1224,UTF-8 data,
tornado/,1233,Binary data,
tornado/,1237,Close,
tornado/,1243,"Echo the received close code, if any (RFC 6455 section 5.5.1).",
tornado/,1246,Ping,
tornado/,1253,Pong,
tornado/,1265,"""normal closure"" status code",
tornado/,1283,"Give the client a few seconds to complete a clean shutdown,",
tornado/,1284,otherwise just close the connection.,
tornado/,1332,Check for timeout on pong. Make sure that we really have,
tornado/,1333,sent a recent ping in case the machine with both server and,
tornado/,1334,client has been suspended since the last ping.,
tornado/,1361,type: WebSocketProtocol,
tornado/,1373,type: Future[WebSocketClientConnection],
tornado/,1374,"type: Queue[Union[None, str, bytes]]",
tornado/,1377,type: Optional[int],
tornado/,1378,type: Optional[str],
tornado/,1400,Always offer to let the server set our max_wbits (and even though,
tornado/,1401,"we don't offer it, we will accept a client_no_context_takeover",
tornado/,1402,from the server).,
tornado/,1403,TODO: set server parameters for deflate extension,
tornado/,1404,if requested in self.compression_options.,
tornado/,1435,type: ignore,
tornado/,1484,"Once we've taken over the connection, clear the final callback",
tornado/,1485,we set on the http request.  This deactivates the error handling,
tornado/,1486,in simple_httpclient that would otherwise interfere with our,
tornado/,1487,ability to see exceptions.,
tornado/,1488,type: ignore,
tornado/,1642,Copy and convert the headers dict/object (see comments in,
tornado/,1643,AsyncHTTPClient.fetch),
tornado/,41,noqa: F401,
tornado/,89,type: ignore,
tornado/,135,"type: Deque[Tuple[object, HTTPRequest, Callable[[HTTPResponse], None]]]",
tornado/,138,"type: Dict[object, Tuple[HTTPRequest, Callable[[HTTPResponse], None]]]",
tornado/,141,"type: Dict[object, Tuple[HTTPRequest, Callable[[HTTPResponse], None], object]]",
tornado/,145,"TCPClient could create a Resolver for us, but we have to do it",
tornado/,146,ourselves to support hostname_mapping.,
tornado/,278,type: Optional[int],
tornado/,279,type: Optional[httputil.HTTPHeaders],
tornado/,280,type: List[bytes],
tornado/,282,Timeout handle returned by IOLoop.add_timeout,
tornado/,283,type: object,
tornado/,294,"urlsplit results have hostname and port results, but they",
tornado/,295,didn't support ipv6 literals until python 2.7.,
tornado/,303,raw ipv6 addresses in urls are enclosed in brackets,
tornado/,305,save final host for _on_connect,
tornado/,340,final_callback is cleared if we've hit our timeout.,
tornado/,396,Some HTTP methods nearly always have bodies while others,
tornado/,397,almost never do. Fail in this case unless the user has,
tornado/,398,opted out of sanity checks with allow_nonstandard_methods.,
tornado/,415,When body_producer is used the caller is responsible for,
tornado/,416,setting Content-Length (or else chunked encoding will be used).,
tornado/,449,"If we are using the defaults, don't construct a",
tornado/,450,new SSLContext.,
tornado/,469,See netutil.ssl_options_to_context,
tornado/,526,type: ignore,
tornado/,533,type: ignore,
tornado/,560,TODO: this may cause a StreamClosedError to be raised,
tornado/,561,by the connection's Future.  Should we cancel the,
tornado/,562,connection more gracefully?,
tornado/,566,"If our callback has already been called, we are probably",
tornado/,567,catching an exception that is not caused by us but rather,
tornado/,568,"some child of our callback. Rather than drop it on the floor,",
tornado/,569,"pass it along, unless it's just the stream being closed.",
tornado/,599,Reassemble the start line.,
tornado/,629,https://tools.ietf.org/html/rfc7231#section-6.4,
tornado/,630,,
tornado/,631,The original HTTP spec said that after a 301 or 302,
tornado/,632,"redirect, the request method should be preserved.",
tornado/,633,"However, browsers implemented this by changing the",
tornado/,634,"method to GET, and the behavior stuck. 303 redirects",
tornado/,635,always specified this POST-to-GET behavior (arguably 303,
tornado/,636,"redirects should change *all* requests to GET, but",
tornado/,637,libcurl only does this for POST so we follow their,
tornado/,638,example).,
tornado/,663,TODO: don't require one big string?,
tornado/,682,We're going to follow a redirect so just discard the body.,
tornado/,1,,
tornado/,2,Copyright 2011 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,43,noqa: F401,
tornado/,45,Re-export this exception for convenience.,
tornado/,58,type: ignore,
tornado/,70,"If os.urandom is available, this method does the same thing as",
tornado/,71,random.seed (at least as of python 2.6).  If os.urandom is not,
tornado/,72,"available, we mix in the pid in addition to a timestamp.",
tornado/,121,The exact form of this condition matters to mypy; it understands,
tornado/,122,if but not assert in this context.,
tornado/,137,child process,
tornado/,179,"All child processes exited cleanly, so exit the master process",
tornado/,180,instead of just returning to right after the call to,
tornado/,181,fork_processes (which will probably just start up another IOLoop,
tornado/,182,unless the caller checks the return value).,
tornado/,220,type: ignore,
tornado/,225,All FDs we create should be closed on error; those in to_close,
tornado/,226,should be closed in the parent process on success.,
tornado/,227,type: List[int],
tornado/,228,type: List[int],
tornado/,257,don't clobber streams set above,
tornado/,259,"type: Optional[Callable[[int], None]]",
tornado/,260,type: Optional[int],
tornado/,302,type: Future[int],
tornado/,306,Unfortunately we don't have the original args any more.,
tornado/,350,make a copy,
tornado/,356,type: ignore,
tornado/,374,We've taken over wait() duty from the subprocess.Popen,
tornado/,375,"object. If we don't inform it of the process's return code,",
tornado/,376,it will log a warning at destruction in python 3.6+.,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,49,sys.path handling,
tornado/,50,-----------------,
tornado/,51,,
tornado/,52,"If a module is run with ""python -m"", the current directory (i.e. """")",
tornado/,53,"is automatically prepended to sys.path, but not if it is run as",
tornado/,54,"""path/to/file.py"".  The processing for ""-m"" rewrites the former to",
tornado/,55,"the latter, so subsequent executions won't have the same path as the",
tornado/,56,original.,
tornado/,57,,
tornado/,58,"Conversely, when run as path/to/file.py, the directory containing",
tornado/,59,"file.py gets added to the path, which can cause confusion as imports",
tornado/,60,may become relative in spite of the future import.,
tornado/,61,,
tornado/,62,We address the former problem by reconstructing the original command,
tornado/,63,line (Python >= 3.4) or by setting the $PYTHONPATH environment,
tornado/,64,variable (Python < 3.4) before re-execution so the new process will,
tornado/,65,see the correct path.  We attempt to address the latter problem when,
tornado/,66,tornado.autoreload is run as __main__.,
tornado/,69,This sys.path manipulation must come before our imports (as much,
tornado/,70,as possible - if we introduced a tornado.sys or tornado.os,
tornado/,71,"module we'd be in trouble), or else our imports would become",
tornado/,72,relative again despite the future import.,
tornado/,73,,
tornado/,74,There is a separate __main__ block at the end of the file to call main().,
tornado/,81,type: ignore,
tornado/,96,type: ignore,
tornado/,102,noqa: F401,
tornado/,104,os.execv is broken on Windows and can't properly parse command line,
tornado/,105,arguments and executable name if they contain whitespaces. subprocess,
tornado/,106,fixes that behavior.,
tornado/,112,type: ignore,
tornado/,114,type: Optional[List[str]],
tornado/,130,"type: Dict[str, float]",
tornado/,169,"We already tried to reload and it didn't work, so don't try again.",
tornado/,172,We're in a child process created by fork_processes.  If child,
tornado/,173,"processes restarted themselves, they'd all restart and then",
tornado/,174,all call fork_processes again.,
tornado/,177,Some modules play games with sys.modules (e.g. email/__init__.py,
tornado/,178,"in the standard library), and occasionally this can cause strange",
tornado/,179,failures in getattr.  Just ignore anything that's not an ordinary,
tornado/,180,module.,
tornado/,212,Clear the alarm signal set by,
tornado/,213,ioloop.set_blocking_log_threshold so it doesn't fire,
tornado/,214,after the exec.,
tornado/,216,sys.path fixes: see comments at top of file.  If __main__.__spec__,
tornado/,217,"exists, we were invoked with -m and the effective path is about to",
tornado/,218,change on re-exec.  Reconstruct the original command line to,
tornado/,219,ensure that the new process sees the same path we did.  If,
tornado/,220,"__spec__ is not available (Python < 3.4), check instead if",
tornado/,221,sys.path[0] is an empty string and add the current directory to,
tornado/,222,$PYTHONPATH.,
tornado/,245,Mac OS X versions prior to 10.6 do not support execv in,
tornado/,246,a process that contains multiple threads.  Instead of,
tornado/,247,"re-executing in the current process, start a new one",
tornado/,248,and cause the current process to exit.  This isn't,
tornado/,249,ideal since the new process is detached from the parent,
tornado/,250,"terminal and thus cannot easily be killed with ctrl-C,",
tornado/,251,but it's better than not being able to autoreload at,
tornado/,252,all.,
tornado/,253,Unfortunately the errno returned in this case does not,
tornado/,254,"appear to be consistent, so we can't easily check for",
tornado/,255,this error specifically.,
tornado/,257,type: ignore,
tornado/,259,At this point the IOLoop has been closed and finally,
tornado/,260,blocks will experience errors if we allow the stack to,
tornado/,261,"unwind, so just exit uncleanly.",
tornado/,285,Remember that we were launched with autoreload as main.,
tornado/,286,The main module can be tricky; set the variables both in our globals,
tornado/,287,(which may be __main__) and the real importable version.,
tornado/,317,Execute the script in our namespace instead of creating,
tornado/,318,a new one so that something that tries to import __main__,
tornado/,319,(e.g. the unittest module) will see names defined in the,
tornado/,320,script instead of just those defined in this module.,
tornado/,323,"If __package__ is defined, imports may be incorrectly",
tornado/,324,interpreted as relative to this module.,
tornado/,334,"If an exception occurred at import time, the file with the error",
tornado/,335,never made it into sys.modules and so we won't know to watch it.,
tornado/,336,"Just to make sure we've covered everything, walk the stack trace",
tornado/,337,from the exception and watch every file.,
tornado/,341,SyntaxErrors are special:  their innermost stack frame is fake,
tornado/,342,so extract_tb won't see it and we have to get the filename,
tornado/,343,from the exception object.,
tornado/,348,restore sys.argv so subsequent executions will include autoreload,
tornado/,352,"runpy did a fake import of the module as __main__, but now it's",
tornado/,353,no longer in sys.modules.  Figure out where it is and watch it.,
tornado/,356,type: ignore,
tornado/,362,"See also the other __main__ block at the top of the file, which modifies",
tornado/,363,sys.path before our imports,
tornado/,1,Copyright 2015 The Tornado Authors,
tornado/,2,,
tornado/,3,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,4,not use this file except in compliance with the License. You may obtain,
tornado/,5,a copy of the License at,
tornado/,6,,
tornado/,7,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,8,,
tornado/,9,"Unless required by applicable law or agreed to in writing, software",
tornado/,10,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,11,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,12,License for the specific language governing permissions and limitations,
tornado/,13,under the License.,
tornado/,40,noqa: F401,
tornado/,149,Exact type depends on subclass. Could be another generic,
tornado/,150,parameter and use protocols to be more precise here.,
tornado/,151,type: Any,
tornado/,162,type: Deque[Future[_T]],
tornado/,163,"type: Deque[Tuple[_T, Future[None]]]",
tornado/,199,type: Future[None],
tornado/,248,type: Future[_T],
tornado/,305,These three are overridable in subclasses.,
tornado/,315,End of the overridable methods.,
tornado/,323,Remove timed-out waiters.,
tornado/,1,Copyright 2015 The Tornado Authors,
tornado/,2,,
tornado/,3,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,4,not use this file except in compliance with the License. You may obtain,
tornado/,5,a copy of the License at,
tornado/,6,,
tornado/,7,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,8,,
tornado/,9,"Unless required by applicable law or agreed to in writing, software",
tornado/,10,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,11,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,12,License for the specific language governing permissions and limitations,
tornado/,13,under the License.,
tornado/,235,type: Optional[httputil.HTTPMessageDelegate],
tornado/,236,type: Router,
tornado/,287,_RuleList can either contain pre-constructed Rules or a sequence of,
tornado/,288,arguments to be passed to the Rule constructor.,
tornado/,292,Can't do detailed typechecking of lists.,
tornado/,330,type: List[Rule],
tornado/,413,"type: Dict[str, Any]",
tornado/,468,import the Module and instantiate the class,
tornado/,469,Must be a fully qualified name (module.ClassName),
tornado/,472,type: Matcher,
tornado/,545,Look for default host if not behind load balancer (for debugging),
tornado/,577,type: List[bytes],
tornado/,578,"type: Dict[str, bytes]",
tornado/,580,Pass matched groups to the handler.  Since,
tornado/,581,match.groups() includes both named and,
tornado/,582,"unnamed groups, we want to use either groups",
tornado/,583,or groupdict but not both.,
tornado/,621,"The pattern is too complicated for our simplistic matching,",
tornado/,622,so we can't support reversing it.,
tornado/,633,"If we can't unescape part of it, we can't",
tornado/,634,reverse this url.,
tornado/,641,"If we can't unescape part of it, we can't",
tornado/,642,reverse this url.,
tornado/,703,noqa: F811,
tornado/,708,noqa: F811,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,113,type: ignore,
tornado/,135,Verify the OpenID response via direct request to the OP,
tornado/,138,"type: Dict[str, Union[str, bytes]]",
tornado/,140,type: ignore,
tornado/,172,type: List[str],
tornado/,209,Make sure we got back at least an email from attribute exchange,
tornado/,336,type: ignore,
tornado/,371,"type: Dict[str, Union[str, bytes]]",
tornado/,392,type: ignore,
tornado/,442,type: ignore,
tornado/,585,type: ignore,
tornado/,596,type: ignore,
tornado/,597,"type: Dict[str, str]",
tornado/,788,Raw urls are useful for e.g. search which doesn't follow the,
tornado/,789,usual pattern: http://search.twitter.com/search.json,
tornado/,793,Add the OAuth resource request signature if we have credentials,
tornado/,902,noqa: E501,
tornado/,1000,type: ignore,
tornado/,1027,session_expires is converted to str for compatibility with,
tornado/,1028,older versions in which the server used url-encoding and,
tornado/,1029,this code simply returned the string verbatim.,
tornado/,1030,This should change in Tornado 5.0.,
tornado/,1177,I can't find an officially-defined encoding for oauth responses and,
tornado/,1178,have never seen anyone use non-ascii.  Leave the response in a byte,
tornado/,1179,"string for python 2, and use utf8 on python 3.",
tornado/,1184,Add the extra parameters the Provider included to the token,
tornado/,1,Copyright 2015 The Tornado Authors,
tornado/,2,,
tornado/,3,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,4,not use this file except in compliance with the License. You may obtain,
tornado/,5,a copy of the License at,
tornado/,6,,
tornado/,7,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,8,,
tornado/,9,"Unless required by applicable law or agreed to in writing, software",
tornado/,10,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,11,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,12,License for the specific language governing permissions and limitations,
tornado/,13,under the License.,
tornado/,26,noqa: F401,
tornado/,42,type: Deque[Future],
tornado/,46,Occasionally clear timed-out waiters.,
tornado/,131,type: Future[bool],
tornado/,147,Waiters we plan to run right now.,
tornado/,150,Might have timed out.,
tornado/,204,type: Set[Future[None]],
tornado/,243,type: Future[None],
tornado/,253,This is a slightly clumsy workaround for the fact that,
tornado/,254,gen.with_timeout doesn't cancel its futures. Cancelling,
tornado/,255,fut will remove it from the waiters list.,
tornado/,406,If the waiter is a coroutine paused at,
tornado/,407,,
tornado/,408,with (yield semaphore.acquire()):,
tornado/,409,,
tornado/,410,then the context manager's __exit__ calls release() at the end,
tornado/,411,"of the ""with"" block.",
tornado/,423,type: Future[_ReleasingContextManager],
tornado/,1,,
tornado/,2,Copyright 2011 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,35,noqa: F401,
tornado/,115,"type: Dict[int, socket.socket]",
tornado/,116,"type: Dict[int, Callable[[], None]]",
tornado/,117,type: List[socket.socket],
tornado/,123,Verify the SSL options. Otherwise we don't get errors until clients,
tornado/,124,"connect. This doesn't verify that the keys are legitimate, but",
tornado/,125,the SSL module doesn't do that until there is a connected socket,
tornado/,126,which seems like too much work,
tornado/,128,Only certfile is required: it can contain both keys,
tornado/,261,Unregister socket from IOLoop,
tornado/,300,If the connection is closed immediately after it is created,
tornado/,301,"(as in a port scan), we can get one of several errors.",
tornado/,302,"wrap_socket makes an internal call to getpeername,",
tornado/,303,which may return either EINVAL (Mac OS X) or ENOTCONN,
tornado/,304,"(Linux).  If it returns ENOTCONN, this error is",
tornado/,305,"silently swallowed by the ssl module, so we need to",
tornado/,306,catch another error later on (AttributeError in,
tornado/,307,SSLIOStream._do_ssl_handshake).,
tornado/,308,"To test this behavior, try nmap with the -sT flag.",
tornado/,309,https://github.com/tornadoweb/tornado/pull/750,
tornado/,320,type: IOStream,
tornado/,1,,
tornado/,2,Copyright 2011 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,33,Note that the naming of ssl.Purpose is confusing; the purpose,
tornado/,34,of a context is to authentiate the opposite side of the connection.,
tornado/,38,See netutil.ssl_options_to_context,
tornado/,42,"ThreadedResolver runs getaddrinfo on a thread. If the hostname is unicode,",
tornado/,43,getaddrinfo attempts to import encodings.idna. If this is done at,
tornado/,44,"module-import time, the import lock is already held by the main thread,",
tornado/,45,leading to deadlock. Avoid it by caching the idna encoder on the main,
tornado/,46,thread now.,
tornado/,49,"For undiagnosed reasons, 'latin1' codec may also need to be preloaded.",
tornado/,52,Default backlog used when calling sock.listen(),
tornado/,94,"Python can be compiled with --disable-ipv6, which causes",
tornado/,95,"operations on AF_INET6 sockets to fail, but does not",
tornado/,96,automatically exclude those results from getaddrinfo,
tornado/,97,results.,
tornado/,98,http://bugs.python.org/issue16208,
tornado/,103,type: set,
tornado/,120,Mac OS X includes a link-local address fe80::1%lo0 in the,
tornado/,121,"getaddrinfo results for 'localhost'.  However, the firewall",
tornado/,122,doesn't understand that this is a local address and will,
tornado/,123,"prompt for access (often repeatedly, due to an apparent",
tornado/,124,bug in its ability to remember granting access to an,
tornado/,125,application). Skip these addresses.,
tornado/,139,Hurd doesn't support SO_REUSEADDR.,
tornado/,144,"On linux, ipv6 sockets accept ipv4 too by default,",
tornado/,145,but this makes it impossible to bind to both,
tornado/,146,"0.0.0.0 in ipv4 and :: in ipv6.  On other systems,",
tornado/,147,separate sockets *must* be used to listen for both ipv4,
tornado/,148,"and ipv6.  For consistency, always disable ipv4 on our",
tornado/,149,ipv6 sockets and use a separate ipv4 socket when needed.,
tornado/,150,,
tornado/,151,Python 2.x on windows doesn't have IPPROTO_IPV6.,
tornado/,155,automatic port allocation with port=None,
tornado/,156,should bind on the same port on IPv4 and IPv6,
tornado/,170,On some systems (most notably docker with default,
tornado/,171,"configurations), ipv6 is partially disabled:",
tornado/,172,"socket.has_ipv6 is true, we can create AF_INET6",
tornado/,173,"sockets, and getaddrinfo(""localhost"", ...,",
tornado/,174,"AF_PASSIVE) resolves to ::1, but we get an error",
tornado/,175,when binding.,
tornado/,176,,
tornado/,177,"Swallow the error, but only for this specific case.",
tornado/,178,"If EADDRNOTAVAIL occurs in other situations, it",
tornado/,179,might be a real problem like a typo in a,
tornado/,180,configuration.,
tornado/,211,Hurd doesn't support SO_REUSEADDR,
tornado/,253,More connections may come in while we're handling callbacks;,
tornado/,254,to prevent starvation of other tasks we must limit the number,
tornado/,255,of connections we accept at a time.  Ideally we would accept,
tornado/,256,up to the number of connections that were waiting when we,
tornado/,257,"entered this method, but this information is not available",
tornado/,258,(and rearranging this method to call accept() as many times,
tornado/,259,as possible before running any callbacks would have adverse,
tornado/,260,effects on load balancing in multiprocess configurations).,
tornado/,261,"Instead, we use the (default) listen backlog as a rough",
tornado/,262,heuristic for the number of connections we can reasonably,
tornado/,263,accept at once.,
tornado/,266,The socket was probably closed,
tornado/,271,EWOULDBLOCK indicates we have accepted every,
tornado/,272,connection that is available.,
tornado/,275,ECONNABORTED indicates that there was a connection,
tornado/,276,but it was closed while still in the accept queue.,
tornado/,277,(observed on FreeBSD).,
tornado/,296,"getaddrinfo resolves empty strings to localhost, and truncates",
tornado/,297,on zero bytes.,
tornado/,381,"On Solaris, getaddrinfo fails if the given port is not found",
tornado/,382,"in /etc/services and no socket type is given, so we must pass",
tornado/,383,one here.  The socket type used here doesn't seem to actually,
tornado/,384,"matter (we discard the one we get back in the results),",
tornado/,385,so the addresses we return should still be usable with SOCK_DGRAM.,
tornado/,390,type: ignore,
tornado/,442,type: ignore,
tornado/,462,type: ignore,
tornado/,487,type: ignore,
tornado/,488,type: int,
tornado/,490,type: ignore,
tornado/,502,"Threads cannot survive after a fork, so if our pid isn't what it",
tornado/,503,was when we created the pool then delete it.,
tornado/,553,These are the keyword arguments to ssl.wrap_socket that must be translated,
tornado/,554,to their SSLContext equivalents (the other arguments are still passed,
tornado/,555,to SSLContext.wrap_socket).,
tornado/,578,Can't use create_default_context since this interface doesn't,
tornado/,579,tell us client vs server.,
tornado/,592,Disable TLS compression to avoid CRIME and related attacks.,
tornado/,593,This constant depends on openssl version 1.0.,
tornado/,594,TODO: Do we need to do this ourselves or can we trust,
tornado/,595,the defaults?,
tornado/,616,"In python 3.4, wrap_socket only accepts the server_hostname",
tornado/,617,argument if HAS_SNI is true.,
tornado/,618,TODO: add a unittest (python added server-side SNI support in 3.4),
tornado/,619,In the meantime it can be manually tested with,
tornado/,620,python3 -m tornado.httpclient https://sni.velox.ch,
tornado/,1,-*- coding: utf-8 -*-,
tornado/,2,,
tornado/,3,Copyright 2012 Facebook,
tornado/,4,,
tornado/,5,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,6,not use this file except in compliance with the License. You may obtain,
tornado/,7,a copy of the License at,
tornado/,8,,
tornado/,9,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,10,,
tornado/,11,"Unless required by applicable law or agreed to in writing, software",
tornado/,12,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,13,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,14,License for the specific language governing permissions and limitations,
tornado/,15,under the License.,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,41,"responses is unused in this file, but we re-export it to other files.",
tornado/,42,Reference it so pyflakes doesn't complain.,
tornado/,61,noqa: F401,
tornado/,62,noqa: F401,
tornado/,63,noqa: F401,
tornado/,109,noqa: F811,
tornado/,113,noqa: F811,
tornado/,117,noqa: F811,
tornado/,121,noqa: F811,
tornado/,122,"type: typing.Dict[str, str]",
tornado/,123,"type: typing.Dict[str, typing.List[str]]",
tornado/,124,type: Optional[str],
tornado/,126,Copy constructor,
tornado/,130,Dict-style initialization,
tornado/,133,new public methods,
tornado/,171,continuation of a multi-line header,
tornado/,199,RFC 7230 section 3.5: a recipient MAY recognize a single LF as a line,
tornado/,200,terminator and ignore any preceding CR.,
tornado/,208,MutableMapping abstract method implementations.,
tornado/,230,defined in dict but not in MutableMapping.,
tornado/,233,Use our overridden copy method for the copy.copy module.,
tornado/,234,"This makes shallow copies one level deeper, but preserves",
tornado/,235,the appearance that HTTPHeaders is a single container.,
tornado/,340,type: str,
tornado/,341,type: str,
tornado/,343,HACK: Used for stream_request_body,
tornado/,344,type: Future[None],
tornado/,367,set remote IP and protocol,
tornado/,384,"type: Dict[str, List[bytes]]",
tornado/,392,type: http.cookies.SimpleCookie,
tornado/,403,SimpleCookie imposes some restrictions on keys;,
tornado/,404,parse_cookie does not. Discard any cookies,
tornado/,405,with disallowed keys.,
tornado/,444,TODO: add a method to HTTPConnection for this so it can work with HTTP/2,
tornado/,445,type: ignore,
tornado/,523,TODO: genericize this class to avoid exposing the Union.,
tornado/,766,real charset decoding will happen in RequestHandler.decode_argument(),
tornado/,810,"The standard allows for the boundary to be quoted in the header,",
tornado/,811,although it's rare (it happens at least for google app engine,
tornado/,812,xmpp).  I think we're also supposed to handle backslash-escapes,
tornado/,813,here but I'll save that until we see a client that uses them,
tornado/,814,in the wild.,
tornado/,893,https://tools.ietf.org/html/rfc7230#section-3.1.1,
tornado/,894,invalid request-line SHOULD respond with a 400 (Bad Request),
tornado/,926,_parseparam and _parse_header are copied and modified from python2.7's cgi.py,
tornado/,927,The original 2.7 version of this code did not correctly support some,
tornado/,928,combinations of semicolons and double quotes.,
tornado/,929,It has also been modified to support valueless parameters as seen in,
tornado/,930,"websocket extension negotiations, and to support non-ascii values in",
tornado/,931,RFC 2231/5987 format.,
tornado/,963,"decode_params treats first argument special, but we already stripped key",
tornado/,972,get rid of the dummy again,
tornado/,992,Sort the parameters just to make it easy to test.,
tornado/,997,TODO: quote if necessary.,
tornado/,1019,type: () -> unittest.TestSuite,
tornado/,1038,type: Optional[int],
tornado/,1067,"If there aren't any doublequotes,",
tornado/,1068,then there can't be any special characters.  See RFC 2109.,
tornado/,1074,We have to assume that we must decode this string.,
tornado/,1075,Down to work.,
tornado/,1077,"Remove the ""s",
tornado/,1080,Check for special sequences.  Examples:,
tornado/,1081,\012 --> \n,
tornado/,1082,"\""   --> """,
tornado/,1083,,
tornado/,1090,Neither matched,
tornado/,1093,else:,
tornado/,1099,QuotePatt matched,
tornado/,1103,OctalPatt matched,
tornado/,1126,Assume an empty name per,
tornado/,1127,https://bugzilla.mozilla.org/show_bug.cgi?id=169091,
tornado/,1131,unquote using Python's algorithm.,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,64,The fact that json_encode wraps json.dumps is an implementation detail.,
tornado/,65,Please see https://github.com/tornadoweb/tornado/pull/706,
tornado/,66,before sending a pull request that adds **kwargs to this function.,
tornado/,69,JSON permits but does not require forward slashes to be escaped.,
tornado/,70,This is useful when json data is emitted in a <script> tag,
tornado/,71,"in HTML, as it prevents </script> tags from prematurely terminating",
tornado/,72,"the javascript.  Some json libraries do this escaping by default,",
tornado/,73,"although python's standard library does not, so we do it here.",
tornado/,74,http://stackoverflow.com/questions/1580647/json-why-are-forward-slashes-escaped,
tornado/,111,noqa: F811,
tornado/,118,noqa: F811,
tornado/,139,unquote_to_bytes doesn't have a _plus variant,
tornado/,157,"This is gross, but python3 doesn't give us another way.",
tornado/,158,Latin1 is the universal donor of character encodings.,
tornado/,178,noqa: F811,
tornado/,183,noqa: F811,
tornado/,188,noqa: F811,
tornado/,209,noqa: F811,
tornado/,214,noqa: F811,
tornado/,219,noqa: F811,
tornado/,232,"to_unicode was previously named _unicode not because it was private,",
tornado/,233,but to avoid conflicts with the built-in unicode() function/type,
tornado/,236,When dealing with the standard library across python 2 and 3 it is,
tornado/,237,sometimes useful to have a direct conversion to the native string type,
tornado/,261,I originally used the regex from,
tornado/,262,http://daringfireball.net/2010/07/improved_regex_for_matching_urls,
tornado/,263,but it gets all exponential on certain patterns (such as too many trailing,
tornado/,264,"dots), causing the regex matcher to never return.",
tornado/,265,This regex should avoid those problems.,
tornado/,266,Use to_unicode instead of tornado.util.u - we don't want backslashes getting,
tornado/,267,processed as escapes.,
tornado/,270,noqa: E501,
tornado/,318,"not protocol, no linkify",
tornado/,321,"bad protocol, no linkify",
tornado/,325,"no proto specified, use http",
tornado/,332,clip long urls. max_len is just an approximation,
tornado/,337,+1 for :,
tornado/,343,Grab the whole host part plus the first bit of the path,
tornado/,344,The path is usually not that interesting once shortened,
tornado/,345,"(no more slug, etc), so it really just provides a little",
tornado/,346,extra indication of shortening.,
tornado/,354,still too long,
tornado/,359,avoid splitting html char entities,
tornado/,367,full url is visible on mouse-over (for those who don't,
tornado/,368,"have a status bar, such as Safari by default)",
tornado/,373,First HTML-escape so that our strings are all safe.,
tornado/,374,The regex is modified to avoid character entites other than &amp; so,
tornado/,375,"that we won't pick up &quot;, etc.",
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,18,version is a human-readable version number.,
tornado/,20,version_info is a four-tuple for programmatic comparison. The first,
tornado/,21,three numbers are the components of the version number.  The fourth,
tornado/,22,"is zero for an official release, positive for a development branch,",
tornado/,23,or negative for a release candidate or beta (after the base version,
tornado/,24,number has been incremented),
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,214,noqa: F401,
tornado/,258,note that the constructor's signature is not extracted with,
tornado/,259,autodoc because _UNSET looks like garbage.  When changing,
tornado/,260,this signature update website/sphinx/template.rst too.,
tornado/,291,Convert deprecated compress_whitespace (bool) to whitespace (str).,
tornado/,299,Whitespace defaults by filename.,
tornado/,304,Validate the whitespace setting.,
tornado/,309,type: Optional[str],
tornado/,321,"Under python2.5, the fake filename used here must match",
tornado/,322,the module name used in __name__ below.,
tornado/,323,The dont_inherit flag prevents template.py's future imports,
tornado/,324,from being applied to the generated code.,
tornado/,346,for internal use,
tornado/,348,__name__ and __loader__ allow the traceback mechanism to find,
tornado/,349,the generated source code.,
tornado/,357,Clear the traceback module's cache of source data now that,
tornado/,358,we've generated a new template (mainly for this module's,
tornado/,359,"unittests, where different tests reuse the same name).",
tornado/,366,named_blocks maps from names to _NamedBlock objects,
tornado/,367,"type: Dict[str, _NamedBlock]",
tornado/,423,"type: Dict[str, Template]",
tornado/,424,self.lock protects self.templates.  It's a reentrant lock,
tornado/,425,because templates may load other templates via `include` or,
tornado/,426,`extends`.  Note that thanks to the GIL this code would be safe,
tornado/,427,"even without the lock, but could lead to wasted work as multiple",
tornado/,428,threads tried to compile the same template simultaneously.,
tornado/,630,Just in case the body was empty,
tornado/,640,In case the previous block was empty,
tornado/,668,"In python3 functions like xhtml_escape return unicode,",
tornado/,669,so we have to convert to utf8 again.,
tornado/,691,"Compress whitespace if requested, with a crude heuristic to avoid",
tornado/,692,altering preformatted whitespace.,
tornado/,714,"The names ""filename"" and ""lineno"" are chosen for consistency",
tornado/,715,with python SyntaxError.,
tornado/,736,"type: List[Tuple[Template, int]]",
tornado/,855,Find next template directive,
tornado/,860,EOF,
tornado/,869,"If the first curly brace is not the start of a special token,",
tornado/,870,start searching from the character after it,
tornado/,874,"When there are more than 2 curlies in a row, use the",
tornado/,875,innermost ones.  This is useful when generating languages,
tornado/,876,like latex where curlies are also meaningful,
tornado/,886,Append any text before the special token,
tornado/,894,"Template directives may be escaped as ""{{!"" or ""{%!"".",
tornado/,895,"In this case output the braces and consume the ""!"".",
tornado/,896,"This is especially useful in conjunction with jquery templates,",
tornado/,897,which also use double braces.,
tornado/,903,Comment,
tornado/,912,Expression,
tornado/,924,Block,
tornado/,937,"Intermediate (""else"", ""elif"", etc) blocks",
tornado/,957,End tag,
tornado/,981,type: _Node,
tornado/,996,type: Optional[str],
tornado/,1003,Validate the selected mode,
tornado/,1015,parse inner body recursively,
tornado/,1019,apply creates a nested function so syntactically it's not,
tornado/,1020,in the loop.,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,43,noqa: F401,
tornado/,49,type: ignore,
tornado/,53,"Typeshed is incomplete for CurlMulti, so just use Any for now.",
tornado/,54,type: Any,
tornado/,61,"type: Deque[Tuple[HTTPRequest, Callable[[HTTPResponse], None], float]]",
tornado/,62,"type: Dict[int, int]",
tornado/,63,type: Optional[object],
tornado/,65,libcurl has bugs that sometimes cause it to not report all,
tornado/,66,relevant file descriptors and timeouts to TIMERFUNCTION/,
tornado/,67,SOCKETFUNCTION.  Mitigate the effects of such bugs by,
tornado/,68,forcing a periodic scan of all active requests.,
tornado/,74,Work around a bug in libcurl 7.29.0: Some fields in the curl,
tornado/,75,"multi object are initialized lazily, and its destructor will",
tornado/,76,segfault if it is destroyed without having been used.  Add,
tornado/,77,and remove a dummy handle to make sure everything is,
tornado/,78,initialized.,
tornado/,92,Set below properties to None to reduce the reference count of current,
tornado/,93,"instance, because those properties hold some methods of current",
tornado/,94,instance that will case circular reference.,
tornado/,95,type: ignore,
tornado/,121,libcurl sometimes closes a socket and then opens a new,
tornado/,122,one using the same FD without giving us a POLL_NONE in,
tornado/,123,"between.  This is a problem with the epoll IOLoop,",
tornado/,124,because the kernel can tell when a socket is closed and,
tornado/,125,"removes it from the epoll automatically, causing future",
tornado/,126,update_handler calls to fail.  Since we can't tell when,
tornado/,127,"this has happened, always use remove and re-add",
tornado/,128,instead of update.,
tornado/,172,"In theory, we shouldn't have to do this because curl will",
tornado/,173,"call _set_timeout whenever the timeout changes.  However,",
tornado/,174,sometimes after _handle_timeout we will need to reschedule,
tornado/,175,immediately even though nothing has changed from curl's,
tornado/,176,perspective.  This is because when socket_action is,
tornado/,177,"called with SOCKET_TIMEOUT, libcurl decides internally which",
tornado/,178,timeouts need to be processed by using a monotonic clock,
tornado/,179,(where available) while tornado uses python's time.time(),
tornado/,180,to decide when timeouts have occurred.  When those clocks,
tornado/,181,disagree on elapsed time (as they will whenever there is an,
tornado/,182,"NTP adjustment), tornado might call _handle_timeout before",
tornado/,183,"libcurl is ready.  After each timeout, resync the scheduled",
tornado/,184,timeout with libcurl's current state.,
tornado/,223,TODO: Don't smuggle extra data on an attribute of the Curl object.,
tornado/,224,type: ignore,
tornado/,237,type: ignore,
tornado/,238,type: ignore,
tornado/,241,"If there was an error in setup, pass it on",
tornado/,242,to the callback. Note that allowing the,
tornado/,243,error to escape here will appear to work,
tornado/,244,most of the time since we are still in the,
tornado/,245,"caller's original stack frame, but when",
tornado/,246,_process_queue() is called from,
tornado/,247,_finish_pending_requests the exceptions have,
tornado/,248,nowhere to go.,
tornado/,263,type: ignore,
tornado/,264,type: ignore,
tornado/,270,type: Optional[CurlError],
tornado/,281,the various curl timings are documented at,
tornado/,282,http://curl.haxx.se/libcurl/c/curl_easy_getinfo.html,
tornado/,321,PROTOCOLS first appeared in pycurl 7.19.5 (2014-07-12),
tornado/,335,"libcurl's magic ""Expect: 100-continue"" behavior causes delays",
tornado/,336,"with servers that don't support it (which include, among others,",
tornado/,337,"Google's OpenID endpoint).  Additionally, this behavior has",
tornado/,338,a bug in conjunction with the curl_multi_socket_action API,
tornado/,339,"(https://sourceforge.net/tracker/?func=detail&atid=100976&aid=3039744&group_id=976),",
tornado/,340,"which increases the delays.  It's more trouble than it's worth,",
tornado/,341,"so just turn off the feature (yes, setting Expect: to an empty",
tornado/,342,value is the official way to disable this),
tornado/,346,libcurl adds Pragma: no-cache by default; disable that too,
tornado/,420,There is no way to restore pycurl.CAINFO to its default value,
tornado/,421,(Using unsetopt makes it reject all certificates).,
tornado/,422,I don't see any way to read the default value from python so it,
tornado/,423,can be restored later.  We'll have to just leave CAINFO untouched,
tornado/,424,"if no ca_certs file was specified, and require that if any",
tornado/,425,"request uses a custom ca_certs file, they all must.",
tornado/,429,Curl behaves reasonably when DNS resolution gives an ipv6 address,
tornado/,430,"that we can't reach, so allow ipv6 unless the user asks to disable.",
tornado/,435,Set the request method through curl's irritating interface which makes,
tornado/,436,up names for almost every single method,
tornado/,457,Some HTTP methods nearly always have bodies while others,
tornado/,458,almost never do. Fail in this case unless the user has,
tornado/,459,opted out of sanity checks with allow_nonstandard_methods.,
tornado/,471,Even with `allow_nonstandard_methods` we disallow,
tornado/,472,GET with a body (because libcurl doesn't allow it,
tornado/,473,unless we use CUSTOMREQUEST). While the spec doesn't,
tornado/,474,"forbid clients from sending a body, it arguably",
tornado/,475,disallows the server from doing anything with them.,
tornado/,480,type: ignore,
tornado/,524,libcurl/pycurl is not thread-safe by default.  When multiple threads,
tornado/,525,"are used, signals should be disabled.  This has the side effect",
tornado/,526,of disabling DNS timeouts in some environments (when libcurl is,
tornado/,527,"not linked against ares), so we don't do it when there is only one",
tornado/,528,thread.  Applications that use many short-lived threads may need,
tornado/,529,to set NOSIGNAL manually in a prepare_curl_callback since,
tornado/,530,there may not be any other threads running at the time we call,
tornado/,531,threading.activeCount.,
tornado/,545,header_line as returned by curl includes the end-of-line characters.,
tornado/,546,whitespace at the start should be preserved to allow multi-line headers,
tornado/,40,"Coroutine wasn't added to typing until 3.5.3, so only import it",
tornado/,41,when mypy is running and use forward references.,
tornado/,42,noqa: F401,
tornado/,167,type: Optional[_ExcInfoTuple],
tornado/,168,type: Any,
tornado/,169,type: Optional[object],
tornado/,171,"It's easy to forget the @gen_test decorator, but if you do",
tornado/,172,the test will silently be ignored because nothing will consume,
tornado/,173,the generator.  Replace the test method with a wrapper that will,
tornado/,174,make sure it's not an undecorated generator.,
tornado/,177,"Not used in this class itself, but used by @gen_test",
tornado/,178,"type: Optional[Union[Generator, Coroutine]]",
tornado/,186,Native coroutines tend to produce warnings if they're not,
tornado/,187,allowed to run to completion. It's difficult to ensure that,
tornado/,188,"this always happens in tests, so cancel any tasks that are",
tornado/,189,still pending by the time we get here.,
tornado/,190,type: ignore,
tornado/,191,py37,
tornado/,192,type: ignore,
tornado/,195,Tasks that are done may still appear here and may contain,
tornado/,196,"non-cancellation exceptions, so filter them out.",
tornado/,200,Allow the tasks to run and finalize themselves (which means,
tornado/,201,raising a CancelledError inside the coroutine). This may,
tornado/,202,"just transform the ""task was destroyed but it is pending""",
tornado/,203,"warning into a ""uncaught CancelledError"" warning, but",
tornado/,204,catching CancelledErrors in coroutines that may leak is,
tornado/,205,simpler than ensuring that no coroutines leak.,
tornado/,209,"If any task failed with anything but a CancelledError, raise it.",
tornado/,216,"Clean up Subprocess, so it can be used again with a new ioloop.",
tornado/,220,Try to clean up any file descriptors left open in the ioloop.,
tornado/,221,"This avoids leaks, especially when tests are run repeatedly",
tornado/,222,in the same process with autoreload (because curl does not,
tornado/,223,set FD_CLOEXEC on its file descriptors),
tornado/,226,In case an exception escaped or the StackContext caught an exception,
tornado/,227,"when there wasn't a wait() to re-raise it, do so here.",
tornado/,228,This is our last chance to raise an exception in a way that the,
tornado/,229,unittest machinery understands.,
tornado/,267,"As a last resort, if an exception escaped super.run() and wasn't",
tornado/,268,"re-raised in tearDown, raise it here.  This will cause the",
tornado/,269,"unittest run to fail messily, but that's better than silently",
tornado/,270,ignoring an error.,
tornado/,500,Testing keys were generated with:,
tornado/,501,openssl req -new -keyout tornado/test/test.key \,
tornado/,502,-out tornado/test/test.crt -nodes -days 3650 -x509,
tornado/,520,noqa: F811,
tornado/,525,noqa: F811,
tornado/,571,Stack up several decorators to allow us to access the generator,
tornado/,572,"object itself.  In the innermost wrapper, we capture the generator",
tornado/,573,"and save it in an attribute of self.  Next, we run the wrapped",
tornado/,574,"function through @gen.coroutine.  Finally, the coroutine is",
tornado/,575,wrapped again to make it synchronous with run_sync.,
tornado/,576,,
tornado/,577,This is a good case study arguing for either some sort of,
tornado/,578,extensibility in the gen decorators or cancellation support.,
tornado/,581,"type: (AsyncTestCase, *Any, **Any) -> Union[Generator, Coroutine]",
tornado/,582,Type comments used to avoid pypy3 bug.,
tornado/,597,"type: (AsyncTestCase, *Any, **Any) -> None",
tornado/,603,run_sync raises an error with an unhelpful traceback.,
tornado/,604,"If the underlying generator is still running, we can throw the",
tornado/,605,exception back into it so the stack trace is replaced by the,
tornado/,606,point where the test is stopped. The only reason the generator,
tornado/,607,"would not be running would be if it were cancelled, which means",
tornado/,608,"a native coroutine, so we can rely on the cr_running attribute.",
tornado/,613,In case the test contains an overly broad except,
tornado/,614,"clause, we may get back here.",
tornado/,615,"Coroutine was stopped or didn't raise a useful stack trace,",
tornado/,616,so re-raise the original exception which is better than nothing.,
tornado/,622,Used like:,
tornado/,623,@gen_test,
tornado/,624,def f(self):,
tornado/,625,pass,
tornado/,628,Used like @gen_test(timeout=10),
tornado/,632,"Without this attribute, nosetests will try to run gen_test as a test",
tornado/,633,anywhere it is imported.,
tornado/,634,type: ignore,
tornado/,688,type: Optional[int],
tornado/,779,support the same options as unittest's command-line interface,
tornado/,805,In order to be able to run tests by their fully-qualified name,
tornado/,806,"on the command line without importing all tests here,",
tornado/,807,module must be set to None.  Python 3.2's unittest.main ignores,
tornado/,808,defaultTest if no module is given (it tries to do its own,
tornado/,809,"test discovery, which is incompatible with auto2to3), so don't",
tornado/,810,set module if we're not asking for a specific test.,
tornado/,812,type: ignore,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,59,noqa: F401,
tornado/,155,These constants were originally based on constants from the epoll module.,
tornado/,161,"In Python 3, _ioloop_for_asyncio maps from asyncio loops to IOLoops.",
tornado/,162,"type: Dict[asyncio.AbstractEventLoop, IOLoop]",
tornado/,238,noqa: F811,
tornado/,242,noqa: F811,
tornado/,274,type: Optional[IOLoop],
tornado/,295,The asyncio event loops override this method.,
tornado/,336,AsyncIO loops can already be current by this point.,
tornado/,374,noqa: F811,
tornado/,380,noqa: F811,
tornado/,488,type: List[Optional[Future]],
tornado/,498,type: Future[Any],
tornado/,515,"If we can cancel the future, do so and wait on it. If not,",
tornado/,516,Just stop the loop and return with the task still pending.,
tornado/,517,"(If we neither cancel nor wait for the task, a warning",
tornado/,518,will be logged).,
tornado/,679,Note that we specifically do not want the inline behavior of,
tornado/,680,tornado.concurrent.future_add_done_callback. We always want,
tornado/,681,this callback scheduled on the next IOLoop iteration (which,
tornado/,682,asyncio.Future always does).,
tornado/,683,,
tornado/,684,Wrap the callback in self._run_callback so we control,
tornado/,685,the error logging (i.e. it goes to tornado.log.app_log,
tornado/,686,instead of asyncio's log).,
tornado/,692,"For concurrent futures, we use self.add_callback, so",
tornado/,693,it's fine if future_add_done_callback inlines that call.,
tornado/,717,type: concurrent.futures.Executor,
tornado/,720,Concurrent Futures are not usable with await. Wrap this in a,
tornado/,721,"Tornado Future instead, using self.add_future for thread-safety.",
tornado/,722,type: Future[_T],
tornado/,745,Functions that return Futures typically swallow all,
tornado/,746,exceptions and store them in the Future.  If a Future,
tornado/,747,"makes it out to the IOLoop, ensure its exception (if any)",
tornado/,748,gets logged too.,
tornado/,752,It's not unusual for add_callback to be used with,
tornado/,753,methods returning a non-None and non-yieldable,
tornado/,754,"result, which should just be ignored.",
tornado/,770,"""""""Returns an (fd, obj) pair from an ``fd`` parameter.",
tornado/,772,We accept both raw file descriptors and file-like objects as,
tornado/,773,input to `add_handler` and related methods.  When a file-like,
tornado/,774,"object is passed, we must retain the object itself so we can",
tornado/,775,"close it correctly when the `IOLoop` shuts down, but the",
tornado/,776,poller interfaces favor file descriptors (they will accept,
tornado/,777,"file-like objects and call ``fileno()`` for you, but they",
tornado/,778,always return the descriptor itself).,
tornado/,780,This method is provided for use by `IOLoop` subclasses and should,
tornado/,781,not generally be used by application code.,
tornado/,783,.. versionadded:: 4.0,
tornado/,784,"""""""",
tornado/,790,"""""""Utility method to close an ``fd``.",
tornado/,792,"If ``fd`` is a file-like object, we close it directly; otherwise",
tornado/,793,we use `os.close`.,
tornado/,795,This method is provided for use by `IOLoop` subclasses (in,
tornado/,796,implementations of ``IOLoop.close(all_fds=True)`` and should,
tornado/,797,not generally be used by application code.,
tornado/,799,.. versionadded:: 4.0,
tornado/,800,"""""""",
tornado/,813,Reduce memory overhead when there are lots of pending callbacks,
tornado/,826,"type: Tuple[float, int]",
tornado/,828,"Comparison methods to sort by deadline, with object id as a tiebreaker",
tornado/,829,to guarantee a consistent ordering.  The heapq module uses __le__,
tornado/,830,"in python2.5, and __lt__ in 2.6+ (sort() and most other comparisons",
tornado/,831,use __lt__).,
tornado/,875,type: object,
tornado/,879,Looking up the IOLoop here allows to first instantiate the,
tornado/,880,"PeriodicCallback in another thread, then start it using",
tornado/,881,IOLoop.add_callback().,
tornado/,919,apply jitter fraction,
tornado/,922,The period should be measured from the start of one call,
tornado/,923,"to the start of the next. If one call takes too long,",
tornado/,924,skip cycles to get back to a multiple of the original,
tornado/,925,schedule.,
tornado/,930,"If the clock moved backwards, ensure we advance the next",
tornado/,931,timeout instead of recomputing the same value again.,
tornado/,932,This may result in long gaps between callbacks if the,
tornado/,933,"clock jumps backwards by a lot, but the far more common",
tornado/,934,scenario is a small NTP adjustment that should just be,
tornado/,935,ignored.,
tornado/,936,,
tornado/,937,Note that on some systems if time.time() runs slower,
tornado/,938,"than time.monotonic() (most common on windows), we",
tornado/,939,effectively experience a small backwards time jump on,
tornado/,940,every iteration because PeriodicCallback uses,
tornado/,941,time.time() while asyncio schedules callbacks using,
tornado/,942,time.monotonic().,
tornado/,943,https://github.com/tornadoweb/tornado/issues/2333,
tornado/,1,,
tornado/,2,Copyright 2009 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,43,noqa: F401,
tornado/,44,noqa: F401,
tornado/,47,PEP 3333 specifies that WSGI on python 3 generally deals with byte strings,
tornado/,48,that are smuggled inside objects of type unicode (via the latin1 encoding).,
tornado/,49,"This function is like those in the tornado.escape module, but defined",
tornado/,50,here to minimize the temptation to use it in non-wsgi contexts.,
tornado/,95,"type: Dict[str, Any]",
tornado/,96,type: List[bytes],
tornado/,121,type: ignore,
tornado/,127,"type: List[Tuple[str, str]]",
tornado/,1,,
tornado/,2,Copyright 2014 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,68,"type: Future[Tuple[socket.AddressFamily, Any, IOStream]]",
tornado/,69,type: Optional[object],
tornado/,70,type: Optional[object],
tornado/,71,type: Optional[Exception],
tornado/,74,type: Set[IOStream],
tornado/,116,"We've reached the end of our queue, but the other queue",
tornado/,117,might still be working.  Send a final error on the future,
tornado/,118,only when both queues are finished.,
tornado/,143,Error: try again (but remember what happened so we have an,
tornado/,144,error to raise in the end),
tornado/,148,"If the first attempt failed, don't wait for the",
tornado/,149,timeout to try an address from the secondary queue.,
tornado/,155,This is a late arrival; just drop it.,
tornado/,277,"TODO: For better performance we could cache the (af, addr)",
tornado/,278,information here and re-use it on subsequent connections to,
tornado/,279,the same host. (http://tools.ietf.org/html/rfc6555#section-4.2),
tornado/,302,Always connect in plaintext; we'll convert to ssl if necessary,
tornado/,303,after one connection has completed.,
tornado/,307,"User required a specific port, but did not specify",
tornado/,308,"a certain source IP, will bind to the default loopback.",
tornado/,310,Trying to use the same address family as the requested af socket:,
tornado/,311,- 127.0.0.1 for IPv4,
tornado/,312,- ::1 for IPv6,
tornado/,316,If the user requires binding also to a specific IP/port.,
tornado/,321,Fail loudly if unable to use the IP/port.,
tornado/,326,type: Future[IOStream],
tornado/,1,type: ignore,
tornado/,12,noqa: F401,
tornado/,34,"type: Dict[int, int]",
tornado/,64,gethostbyname doesn't take callback as a kwarg,
tornado/,65,"type: Future[Tuple[Any, Any]]",
tornado/,1,,
tornado/,2,Copyright 2011 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,1,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,2,not use this file except in compliance with the License. You may obtain,
tornado/,3,a copy of the License at,
tornado/,4,,
tornado/,5,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,6,,
tornado/,7,"Unless required by applicable law or agreed to in writing, software",
tornado/,8,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,9,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,10,License for the specific language governing permissions and limitations,
tornado/,11,under the License.,
tornado/,18,type: ignore,
tornado/,19,type: ignore,
tornado/,20,type: ignore,
tornado/,21,type: ignore,
tornado/,22,type: ignore,
tornado/,23,type: ignore,
tornado/,24,type: ignore,
tornado/,25,type: ignore,
tornado/,36,noqa: F401,
tornado/,58,"partial copy of twisted.names.client.createResolver, which doesn't",
tornado/,59,allow for a reactor to be passed in.,
tornado/,75,"getHostByName doesn't accept IP addresses, so if the input",
tornado/,76,looks like an IP address just return it immediately.,
tornado/,85,type: Future[Any],
tornado/,133,type: ignore,
tornado/,135,type: Future[Any],
tornado/,140,"Should never happen, but just in case",
tornado/,1,"NOTE: win32 support is currently experimental, and not recommended",
tornado/,2,for production use.,
tornado/,7,See: http://msdn.microsoft.com/en-us/library/ms724935(VS.85).aspx,
tornado/,8,type: ignore,
tornado/,22,type: ignore,
tornado/,1,,
tornado/,2,Copyright 2011 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,1,,
tornado/,2,Copyright 2011 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,36,noqa: F401,
tornado/,42,type: ignore,
tornado/,46,"Maps fd to (fileobj, handler function) pair (as in IOLoop.add_handler)",
tornado/,47,"type: Dict[int, Tuple[Union[int, _Selectable], Callable]]",
tornado/,48,Set of fds listening for reads/writes,
tornado/,49,type: Set[int],
tornado/,50,type: Set[int],
tornado/,52,If an asyncio loop was closed through an asyncio interface,
tornado/,53,"instead of IOLoop.close(), we'd never hear about it and may",
tornado/,54,have left a dangling reference in our map. In case an,
tornado/,55,"application (or, more likely, a test suite) creates and",
tornado/,56,"destroys a lot of event loops in this way, check here to",
tornado/,57,ensure that we don't have a lot of dead loops building up in,
tornado/,58,the map.,
tornado/,59,,
tornado/,60,TODO(bdarnell): consider making self.asyncio_loop a weakref,
tornado/,61,for AsyncIOMainLoop and make _ioloop_for_asyncio a,
tornado/,62,WeakKeyDictionary.,
tornado/,84,Remove the mapping before closing the asyncio loop. If this,
tornado/,85,"happened in the other order, we could race against another",
tornado/,86,"initialize() call which would see the closed asyncio loop,",
tornado/,87,"assume it was closed from the asyncio side, and do this",
tornado/,88,"cleanup for us, leading to a KeyError.",
tornado/,145,type: ignore,
tornado/,159,"asyncio.call_at supports *args but not **kwargs, so bind them here.",
tornado/,160,"We do not synchronize self.time and asyncio_loop.time, so",
tornado/,161,convert from absolute to relative.,
tornado/,169,type: ignore,
tornado/,179,"""Event loop is closed"". Swallow the exception for",
tornado/,180,consistency with PollIOLoop (and logical consistency,
tornado/,181,with the fact that we can't guarantee that an,
tornado/,182,add_callback that completes without error will,
tornado/,183,eventually execute).,
tornado/,223,type: ignore,
tornado/,227,AsyncIOMainLoop already refers to the current asyncio loop so,
tornado/,228,nothing to do here.,
tornado/,252,type: ignore,
tornado/,258,"If initialize() does not succeed (taking ownership of the loop),",
tornado/,259,we have to close it.,
tornado/,273,type: ignore,
tornado/,312,"""Any thread"" and ""selector"" should be orthogonal, but there's not a clean",
tornado/,313,interface for composing policies so pick the right base.,
tornado/,314,type: ignore,
tornado/,319,type: ignore,
tornado/,341,This was an AssertionError in python 3.4.2 (which ships with debian jessie),
tornado/,342,and changed to a RuntimeError in 3.4.3.,
tornado/,343,"""There is no current event loop in thread %r""",
tornado/,1,,
tornado/,2,Copyright 2012 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,40,Matches the output of a single logging call (which may be multiple lines,
tornado/,41,"if a traceback was included, so we use the DOTALL option)",
tornado/,48,Fake color support.  We can't guarantee anything about the $TERM,
tornado/,49,"variable when the tests are run, so just patch in some values",
tornado/,50,for testing.  (testing with color off fails to expose some potential,
tornado/,51,encoding issues from the control characters),
tornado/,54,construct a Logger directly to bypass getLogger's caching,
tornado/,69,Base case: default setup without explicit encoding.,
tornado/,70,"In python 2, supports arbitrary byte strings and unicode objects",
tornado/,71,"that contain only ascii.  In python 3, supports ascii-only unicode",
tornado/,72,strings (but byte strings will be repr'd automatically).,
tornado/,90,"This will be ""\xe9"" on python 2 or ""b'\xe9'"" on python 3",
tornado/,98,"on python 2, utf8 byte strings (and by extension ascii byte",
tornado/,99,strings) are passed through as-is.,
tornado/,102,"on python 3, byte strings always get repr'd even if",
tornado/,103,"they're ascii-only, so this degenerates into another",
tornado/,104,copy of test_bytes_logging.,
tornado/,112,"This will be ""Exception: \xe9"" on python 2 or",
tornado/,113,"""Exception: b'\xe9'"" on python 3.",
tornado/,116,"The traceback contains newlines, which should not have been escaped.",
tornado/,122,Adding an explicit encoding configuration allows non-ascii unicode,
tornado/,123,"strings in both python 2 and 3, without changing the behavior",
tornado/,124,for byte strings.,
tornado/,200,Each test may manipulate and/or parse the options and then logs,
tornado/,201,a line at the 'info' level.  This level is ignored in the,
tornado/,202,"logging module by default, but Tornado turns it on by default",
tornado/,203,so it is the easiest way to tell whether tornado's logging hooks,
tornado/,204,ran.,
tornado/,240,command line trumps code defaults,
tornado/,1,These tests do not currently do much to verify the correct implementation,
tornado/,2,"of the openid/oauth protocols, they just exercise the major code paths",
tornado/,3,and ensure that it doesn't blow up (e.g. with unicode/bytes issues in,
tornado/,4,python 3),
tornado/,27,type: ignore,
tornado/,44,type: ignore,
tornado/,92,"Ensure that any exceptions are set on the returned Future,",
tornado/,93,not simply thrown into the surrounding StackContext.,
tornado/,134,type: ignore,
tornado/,197,"Like TwitterClientLoginHandler, but uses authenticate_redirect",
tornado/,198,instead of authorize_redirect.,
tornado/,217,New style: with @gen.coroutine the result must be yielded,
tornado/,218,or else the request will be auto-finished too soon.,
tornado/,225,TODO: would be nice to go through the login flow instead of,
tornado/,226,cheating with a hard-coded access token.,
tornado/,233,TODO(bdarnell): Should we catch HTTP errors and,
tornado/,234,transform some of them (like 403s) into AuthError?,
tornado/,276,test endpoints,
tornado/,321,simulated servers,
tornado/,365,the cookie is base64('zxcv')|base64('1234'),
tornado/,399,the cookie is base64('zxcv')|base64('1234'),
tornado/,458,Same as test_oauth10a_redirect,
tornado/,466,the cookie is base64('zxcv')|base64('1234'),
tornado/,488,the cookie is base64('zxcv')|base64('1234'),
tornado/,540,retrieve authenticate google user,
tornado/,546,return the user and access token as json,
tornado/,562,issue a fake auth code and redirect to redirect_uri,
tornado/,570,issue a fake token,
tornado/,579,return a fake user,
tornado/,587,test endpoints,
tornado/,589,simulated google authorization server endpoints,
tornado/,13,TODO: less hacky way to get isolated tests,
tornado/,20,type: dict,
tornado/,44,Re-encode our input data (which is utf-8 without BOM) in,
tornado/,45,encodings that use the BOM and ensure that we can still load,
tornado/,46,"it. Note that utf-16-le and utf-16-be do not write a BOM,",
tornado/,47,so we only test whichver variant is native to our platform.,
tornado/,1,,
tornado/,2,Copyright 2014 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,33,noqa: F401,
tornado/,34,noqa: F401,
tornado/,36,Fake address families for testing.  Used in place of AF_INET,
tornado/,37,and AF_INET6 because some installations do not have AF_INET6.,
tornado/,44,type: List[IOStream],
tornado/,45,type: Queue[IOStream],
tornado/,83,"The port used here doesn't matter, but some systems require it",
tornado/,84,to be non-zero if we do not also pass AI_PASSIVE.,
tornado/,160,Root can use any port so we can't easily force this to fail.,
tornado/,161,This is mainly relevant for docker.,
tornado/,177,never completes,
tornado/,187,"These addresses aren't in the right format, but split doesn't care.",
tornado/,212,"type: Dict[Tuple[int, typing.Any], Future[ConnectorTest.FakeStream]]",
tornado/,213,"type: Dict[typing.Any, ConnectorTest.FakeStream]",
tornado/,217,"Unless explicitly checked (and popped) in the test, we shouldn't",
tornado/,218,be closing any streams,
tornado/,226,type: Future[ConnectorTest.FakeStream],
tornado/,240,Run the loop to allow callbacks to be run.,
tornado/,250,Give it a huge timeout; we'll trigger timeouts manually.,
tornado/,261,Fail with just one address.,
tornado/,286,trigger the timeout while the first lookup is pending;,
tornado/,287,nothing happens.,
tornado/,311,resolving 'a' after the connection has completed doesn't start 'b',
tornado/,322,resolving 'c' after completion closes the connection.,
tornado/,334,one queue is now empty,
tornado/,346,"the connector will close all streams on connect timeout, we",
tornado/,347,should explicitly pop the connect_future.,
tornado/,351,"if the future is set with TimeoutError, we will not iterate next",
tornado/,352,possible address.,
tornado/,365,success stream will be pop,
tornado/,367,streams in connector should be closed after connect timeout,
tornado/,417,"if one of streams succeed, connector will close all other streams",
tornado/,433,"if the future is set with TimeoutError, connector will not",
tornado/,434,trigger secondary address.,
tornado/,60,"When a server sends a response and then closes the connection,",
tornado/,61,the client must be allowed to read the data before the IOStream,
tornado/,62,closes itself.  Epoll reports closed connections with a separate,
tornado/,63,"EPOLLRDHUP event delivered at the same time as the read event,",
tornado/,64,while kqueue reports them as a second read/write event with an EOF,
tornado/,65,flag.,
tornado/,85,normal read,
tornado/,89,zero bytes,
tornado/,93,another normal read,
tornado/,103,"unlike the previous tests, try to write before the connection",
tornado/,104,is complete.,
tornado/,108,connect will always complete before write.,
tornado/,130,callback=None is equivalent to no callback.,
tornado/,149,Ensure that the data comes through before the StreamClosedError.,
tornado/,157,Nothing else to read; the error comes immediately without waiting,
tornado/,158,for yield.,
tornado/,164,Tests where one stream reads and the other writes.,
tornado/,165,These should work for BaseIOStream implementations.,
tornado/,193,Attempting to write zero bytes should run the callback without,
tornado/,194,going into an infinite loop.,
tornado/,202,"Same as test_delayed_close_callback, but with the future interface.",
tornado/,218,"Similar to the previous test, but with data stored in the OS's",
tornado/,219,socket buffers instead of the IOStream's read buffer.  Out-of-band,
tornado/,220,close notifications must be delayed until all data has been,
tornado/,221,drained into the IOStream buffer. (epoll used to use out-of-band,
tornado/,222,"close events with EPOLLRDHUP, but no longer)",
tornado/,223,,
tornado/,224,This depends on the read_chunk_size being smaller than the,
tornado/,225,"OS socket buffer, so make it small.",
tornado/,232,Allow the close to propagate to the `rs` side of the,
tornado/,233,connection.  Using add_callback instead of add_timeout,
tornado/,234,"doesn't seem to work, even with multiple iterations",
tornado/,244,"Similar to test_delayed_close_callback, but read_until_close takes",
tornado/,245,a separate code path so test it separately.,
tornado/,250,Read one byte to make sure the client has received the data.,
tornado/,251,It won't run the close callback as long as there is more buffered,
tornado/,252,data that could satisfy a later read.,
tornado/,263,Performance test: read_until used to have a quadratic component,
tornado/,264,so a read_until of 4MB would take 8 seconds; now it takes 0.25,
tornado/,265,seconds.,
tornado/,268,This test fails on pypy with ssl.  I think it's because,
tornado/,269,"pypy's gc defeats moves objects, breaking the",
tornado/,270,"""frozen write buffer"" assumption.",
tornado/,288,This is a regression test for a regression in Tornado 6.0,
tornado/,289,(maybe 6.0.3?) reported in,
tornado/,290,https://github.com/tornadoweb/tornado/issues/2717,
tornado/,291,,
tornado/,292,The data arrives in two chunks; the stream is closed at the,
tornado/,293,same time that the second chunk is received. If the second,
tornado/,294,"chunk is larger than the first, it works, but when this bug",
tornado/,295,existed it would fail if the second chunk were smaller than,
tornado/,296,the first. This is due to the optimization that the,
tornado/,297,read_until condition is only checked when the buffer doubles,
tornado/,298,in size,
tornado/,308,"If a stream is closed while reading, it raises",
tornado/,309,StreamClosedError instead of UnsatisfiableReadError (the,
tornado/,310,latter should only be raised when byte limits are reached).,
tornado/,311,The particular scenario tested here comes from #2717.,
tornado/,322,Regression test for a bug that was introduced in 2.3,
tornado/,323,where the IOStream._close_callback would never be called,
tornado/,324,if there were pending reads.,
tornado/,336,"If _close_callback (self.stop) is not called,",
tornado/,337,an AssertionError: Async operation timed out after 5 seconds,
tornado/,338,will be raised.,
tornado/,346,Regression test for interaction between the Future read interfaces,
tornado/,347,and IOStream._maybe_add_error_listener.,
tornado/,385,Ask for more than is available with partial=True,
tornado/,391,Ask for less than what is available; num_bytes is still,
tornado/,392,respected.,
tornado/,398,"Partial reads won't return an empty string, but read_bytes(0)",
tornado/,399,will.,
tornado/,412,Extra room under the limit,
tornado/,418,Just enough space,
tornado/,424,"Not enough space, but we don't know it until all we can do is",
tornado/,425,log a warning and close the connection.,
tornado/,440,"Similar to the error case in the previous test, but the",
tornado/,441,ws writes first so rs reads are satisfied,
tornado/,442,"inline.  For consistency with the out-of-line case, we",
tornado/,443,do not raise the error synchronously.,
tornado/,459,Even though data that matches arrives the same packet that,
tornado/,460,"puts us over the limit, we fail the request because it was not",
tornado/,461,found within the limit.,
tornado/,476,Extra room under the limit,
tornado/,482,Just enough space,
tornado/,488,"Not enough space, but we don't know it until all we can do is",
tornado/,489,log a warning and close the connection.,
tornado/,504,"Similar to the error case in the previous test, but the",
tornado/,505,ws writes first so rs reads are satisfied,
tornado/,506,"inline.  For consistency with the out-of-line case, we",
tornado/,507,do not raise the error synchronously.,
tornado/,522,Even though data that matches arrives the same packet that,
tornado/,523,"puts us over the limit, we fail the request because it was not",
tornado/,524,found within the limit.,
tornado/,535,"10KB buffer size, 100KB available to read.",
tornado/,536,Read 1KB at a time and make sure that the buffer is not eagerly,
tornado/,537,filled.,
tornado/,550,"10KB buffer size, 100KB available to read.",
tornado/,551,Read 1KB at a time and make sure that the buffer is not eagerly,
tornado/,552,filled.,
tornado/,568,Client writes more than the rs will accept.,
tornado/,570,The rs pauses while reading.,
tornado/,573,The ws's writes have been blocked; the rs can,
tornado/,574,continue to read gradually.,
tornado/,600,Existing buffer is fed into user buffer,
tornado/,610,Existing buffer can satisfy read immediately,
tornado/,628,Partial read,
tornado/,637,Full read despite partial=True,
tornado/,643,Existing buffer can satisfy read immediately,
tornado/,665,Stress buffer handling when going back and forth between,
tornado/,666,read_bytes() (using an internal buffer) and read_into(),
tornado/,667,(using a user-allocated buffer).,
tornado/,691,read_bytes(),
tornado/,697,read_into(),
tornado/,724,type: Future[IOStream],
tornado/,741,"When a connection is refused, the connect callback should not",
tornado/,742,be run.  (The kqueue IOLoop used to behave differently from the,
tornado/,743,epoll IOLoop in this respect),
tornado/,749,log messages vary by platform and ioloop implementation,
tornado/,758,Test that IOStream sets its exc_info on getaddrinfo error.,
tornado/,759,It's difficult to reliably trigger a getaddrinfo error;,
tornado/,760,"some resolvers own't even return errors for malformed names,",
tornado/,761,so we mock it instead. If IOStream changes to call a Resolver,
tornado/,762,"before sock.connect, the mock target will need to change too.",
tornado/,791,An error on an inline read is raised without logging (on the,
tornado/,792,assumption that it will eventually be noticed or logged further,
tornado/,793,up the stack).,
tornado/,794,,
tornado/,795,This test is posix-only because windows os.close() doesn't work,
tornado/,796,"on socket FDs, but we can't close the socket object normally",
tornado/,797,because we won't get the error we want if the socket knows,
tornado/,798,it's closed.,
tornado/,811,Socket errors on asynchronous reads should be logged (but only,
tornado/,812,once).,
tornado/,817,Start a read that will be fulfilled asynchronously.,
tornado/,820,Stub out read_from_fd to make it fail.,
tornado/,827,This log message is from _handle_read (not read_from_fd).,
tornado/,839,Run concurrent writers that will write enough bytes so as to,
tornado/,840,clog the socket buffer and accumulate bytes in our write buffer.,
tornado/,900,This will run some tests that are basically redundant but it's the,
tornado/,901,simplest way to make sure that it works to pass an SSLContext,
tornado/,902,instead of an ssl_options dict to the SSLIOStream constructor.,
tornado/,926,type: Future[None],
tornado/,930,type: typing.Optional[IOStream],
tornado/,985,This flow is simplified from RFC 3207 section 5.,
tornado/,986,"We don't really need all of this, but it helps to make sure",
tornado/,987,that after realistic back-and-forth traffic the buffers end up,
tornado/,988,in a sane state.,
tornado/,1007,Certificates are verified with the default configuration.,
tornado/,1017,Test that server_hostname parameter to start_tls is being used.,
tornado/,1018,The check_hostname functionality is only available in python 2.7 and,
tornado/,1019,up and in python 3.4 and up.,
tornado/,1026,The client fails to connect with an SSL error.,
tornado/,1029,"The server fails to connect, but the exact error is unspecified.",
tornado/,1045,These tests fail with ConnectionAbortedErrors with TLS,
tornado/,1046,1.3 on windows python 3.7.4 (which includes an upgrade,
tornado/,1047,to openssl 1.1.c. Other platforms might be affected with,
tornado/,1048,newer openssl too). Disable it until we figure out,
tornado/,1049,what's up.,
tornado/,1063,type: Future[None],
tornado/,1081,type: Future[None],
tornado/,1097,type: Future[None],
tornado/,1144,"Write 1MB of data, which should fill the buffer",
tornado/,1166,For py2,
tornado/,1180,Not empty,
tornado/,1217,Test internal algorithm,
tornado/,1251,Test internal algorithm,
tornado/,1,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,2,not use this file except in compliance with the License. You may obtain,
tornado/,3,a copy of the License at,
tornado/,4,,
tornado/,5,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,6,,
tornado/,7,"Unless required by applicable law or agreed to in writing, software",
tornado/,8,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,9,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,10,License for the specific language governing permissions and limitations,
tornado/,11,under the License.,
tornado/,31,noqa: F401,
tornado/,60,"type: typing.Dict[str, bytes]",
tornado/,119,"type: typing.Dict[str, typing.Any]",
tornado/,7,tornado.testing.main autodiscovery relies on 'all' being present in,
tornado/,8,"the main module, so import it here even though it is not used directly.",
tornado/,9,The following line prevents a pyflakes warning.,
tornado/,8,"TODO: Now that WSGIAdapter is gone, this is a pretty weak test.",
tornado/,7,noqa: F401,
tornado/,17,"travis-ci.org runs our tests in an overworked virtual machine, which makes",
tornado/,18,timing-related tests unreliable.,
tornado/,23,Set the environment variable NO_NETWORK=1 to disable any tests that,
tornado/,24,depend on an external network.,
tornado/,31,Used for tests affected by,
tornado/,32,https://bitbucket.org/pypy/pypy/issues/2616/incomplete-error-handling-in,
tornado/,33,TODO: remove this after pypy3 5.8 is obsolete.,
tornado/,37,type: ignore,
tornado/,44,socket.has_ipv6 check reports whether ipv6 was present at compile,
tornado/,45,time. It's usually true even when ipv6 doesn't work for other reasons.,
tornado/,68,"On travis-ci, port numbers are reassigned frequently. To avoid",
tornado/,69,"collisions with other tests, we use an open client-side socket's",
tornado/,70,ephemeral port number to ensure that nothing can listen on that,
tornado/,71,port.,
tornado/,88,Flatten the real global and local namespace into our fake,
tornado/,89,globals: it's all global from the perspective of code defined,
tornado/,90,in s.,
tornado/,91,type: ignore,
tornado/,92,"type: typing.Dict[str, typing.Any]",
tornado/,103,py34+,
tornado/,1,coding: utf-8,
tornado/,14,type: ignore,
tornado/,24,make sure AsyncHTTPClient magic doesn't give us the wrong class,
tornado/,37,Real implementations would use a random nonce.,
tornado/,1,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,2,not use this file except in compliance with the License. You may obtain,
tornado/,3,a copy of the License at,
tornado/,4,,
tornado/,5,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,6,,
tornado/,7,"Unless required by applicable law or agreed to in writing, software",
tornado/,8,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,9,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,10,License for the specific language governing permissions and limitations,
tornado/,11,under the License.,
tornado/,25,type: queues.Queue[None],
tornado/,39,"Now the queue is full, this putter blocks.",
tornado/,48,type: queues.Queue[int],
tornado/,60,type: queues.Queue[int],
tornado/,70,Make room.,
tornado/,79,type: queues.Queue[int],
tornado/,84,type: queues.Queue[int],
tornado/,89,type: queues.Queue[int],
tornado/,94,type: queues.Queue[int],
tornado/,102,type: queues.Queue[int],
tornado/,111,type: queues.Queue[int],
tornado/,122,type: queues.Queue[int],
tornado/,130,type: queues.Queue[int],
tornado/,131,"First putter succeeds, remainder block.",
tornado/,137,Final waiter is still active.,
tornado/,139,get() clears the waiters.,
tornado/,146,type: queues.Queue[int],
tornado/,154,Final waiter is still active.,
tornado/,155,get() clears the waiters.,
tornado/,162,type: queues.Queue[int],
tornado/,180,type: queues.Queue[int],
tornado/,185,type: queues.Queue[int],
tornado/,191,type: queues.Queue[int],
tornado/,201,type: queues.Queue[int],
tornado/,205,put_nowait does *not* immediately unblock getters.,
tornado/,214,type: queues.Queue[int],
tornado/,228,type: queues.Queue[int],
tornado/,229,Now it's full.,
tornado/,236,1 was never put in the queue.,
tornado/,239,Final get() unblocked this putter.,
tornado/,244,type: queues.Queue[int],
tornado/,249,No TimeoutError.,
tornado/,253,type: queues.Queue[int],
tornado/,254,"First putter succeeds, remainder block.",
tornado/,260,Final waiter is still active.,
tornado/,261,put() clears the waiters.,
tornado/,268,type: queues.Queue[int],
tornado/,277,Final waiters still active.,
tornado/,278,put() clears the waiters.,
tornado/,286,"If a float is passed for maxsize, a reasonable limit should",
tornado/,287,"be enforced, instead of being treated as unlimited.",
tornado/,288,It happens to be rounded up.,
tornado/,289,http://bugs.python.org/issue21723,
tornado/,290,type: ignore,
tornado/,314,type: queues.Queue,
tornado/,319,type: queues.Queue,
tornado/,333,Two coroutines share work.,
tornado/,341,"Verify it is task_done(), not get(), that unblocks join().",
tornado/,342,type: queues.Queue,
tornado/,355,type: queues.Queue,
tornado/,361,type: queues.Queue,
tornado/,406,type: queues.Queue[int],
tornado/,409,"We don't yield between get() and task_done(), so get() must wait for",
tornado/,410,the next tick. Otherwise we'd immediately call task_done and unblock,
tornado/,411,"join() before q.put() resumes, and we'd only process the first four",
tornado/,412,items.,
tornado/,18,noqa: F401,
tornado/,21,"(input, linkify_kwargs, expected_output)",
tornado/,30,noqa: E501,
tornado/,32,an opened paren followed by many chars killed Gruber's regex,
tornado/,36,noqa: E501,
tornado/,38,as did too many dots at the end,
tornado/,42,noqa: E501,
tornado/,47,noqa: E501,
tornado/,49,some examples from http://daringfireball.net/2009/11/liberal_regex_for_matching_urls,
tornado/,50,plus a fex extras (such as multiple parentheses).,
tornado/,74,noqa: E501,
tornado/,79,noqa: E501,
tornado/,109,noqa: E501,
tornado/,124,noqa: E501,
tornado/,171,noqa: E501,
tornado/,177,noqa: E501,
tornado/,192,noqa: E501,
tornado/,201,noqa: E501,
tornado/,202,noqa: E501,
tornado/,207,noqa: E501,
tornado/,209,"type: List[Tuple[Union[str, bytes], Dict[str, Any], str]]",
tornado/,227,"type: List[Tuple[Union[str, bytes], Union[str, bytes]]]",
tornado/,238,invalid encoding,
tornado/,239,invalid encoding,
tornado/,240,invalid encoding,
tornado/,247,byte strings are passed through as-is,
tornado/,250,unicode strings become utf8,
tornado/,252,"type: List[Tuple[Union[str, bytes], str]]",
tornado/,263,input strings to url_unescape should only contain ascii,
tornado/,264,"characters, but make sure the function accepts both byte",
tornado/,265,and unicode strings.,
tornado/,283,On python2 the escape methods should generally return the same,
tornado/,284,type as their argument,
tornado/,289,"json_decode accepts both bytes and unicode, but strings it returns",
tornado/,290,are always unicode.,
tornado/,294,Non-ascii bytes are interpreted as utf8,
tornado/,298,"json deals with strings, not bytes.  On python 2 byte strings will",
tornado/,299,convert automatically if they are utf8; on python 3 byte strings,
tornado/,300,are not allowed.,
tornado/,1,-*- coding: utf-8 -*-,
tornado/,115,quotes are optional unless special characters are present,
tornado/,244,The spec requires that data after the final boundary be ignored.,
tornado/,245,http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html,
tornado/,246,"In practice, some libraries include an extra CRLF after the boundary.",
tornado/,265,Lines beginning with whitespace are appended to the previous line,
tornado/,266,with any leading whitespace replaced by a single space.,
tornado/,267,"Note that while multi-line headers are a part of the HTTP spec,",
tornado/,268,their use is strongly discouraged.,
tornado/,291,"If the first line starts with whitespace, it's a",
tornado/,292,"continuation line with nothing to continue, so reject it",
tornado/,293,(with a proper error).,
tornado/,298,"Ensure that only \r\n is recognized as a header separator, and not",
tornado/,299,the other newline-like unicode characters.,
tornado/,300,Characters that are likely to be problematic can be found in,
tornado/,301,http://unicode.org/standard/reports/tr13/tr13-5.html,
tornado/,302,and cpython's unicodeobject.c (which defines the implementation,
tornado/,303,"of unicode_type.splitlines(), and uses a different list than TR13).",
tornado/,305,VERTICAL TAB,
tornado/,306,FILE SEPARATOR,
tornado/,307,GROUP SEPARATOR,
tornado/,308,RECORD SEPARATOR,
tornado/,309,NEXT LINE,
tornado/,310,LINE SEPARATOR,
tornado/,311,PARAGRAPH SEPARATOR,
tornado/,314,Try the utf8 and latin1 representations of each newline,
tornado/,320,Some chars cannot be represented in latin1,
tornado/,323,"parse() wants a native_str, so decode through latin1",
tornado/,324,in the same way the real parser does.,
tornado/,338,Both CRLF and LF should be accepted as separators. CR should not be,
tornado/,339,"part of the data when followed by LF, but it is a normal char",
tornado/,340,otherwise (or should bare CR be an error?),
tornado/,356,"All the copies are identical, no matter how they were",
tornado/,357,constructed.,
tornado/,360,Neither the dict or its member lists are reused.,
tornado/,377,"If a value is present, setdefault returns it without changes.",
tornado/,380,"If a value is not present, setdefault sets it for future use.",
tornado/,395,Make sure that all the input types are supported.,
tornado/,420,"HTTPServerRequest is mainly tested incidentally to the server itself,",
tornado/,421,but this tests the parts of the class that can be tested in isolation.,
tornado/,424,"All parameters are formally optional, but uri is required",
tornado/,425,(and has been for some time).  This test ensures that no,
tornado/,426,more required parameters slip in.,
tornado/,454,These tests copied from Django:,
tornado/,455,https://github.com/django/django/pull/6277/commits/da810901ada1cae9fc1f018f879f11a7fb467b28,
tornado/,464,Here parse_cookie() differs from Python's cookie parsing in that it,
tornado/,465,"treats all semicolons as delimiters, even within quotes.",
tornado/,470,Illegal cookies that have an '=' char in an unquoted value.,
tornado/,472,Cookies with ':' character in their name.,
tornado/,476,Cookies with '[' and ']'.,
tornado/,482,Cookies that RFC6265 allows.,
tornado/,486,parse_cookie() has historically kept only the last cookie with the,
tornado/,487,same name.,
tornado/,495,Chunks without an equals sign appear as unnamed values per,
tornado/,496,https://bugzilla.mozilla.org/show_bug.cgi?id=169091,
tornado/,501,Even a double quote may be an unamed value.,
tornado/,503,"Spaces in names and values, and an equals sign in values.",
tornado/,507,More characters the spec forbids.,
tornado/,512,Unicode characters. The spec only allows ASCII.,
tornado/,517,"Browsers don't send extra whitespace or semicolons in Cookie headers,",
tornado/,518,but parse_cookie() should parse whitespace the same way,
tornado/,519,document.cookie parses whitespace.,
tornado/,34,"Accept default 5-second timeout, no error",
tornado/,38,Timeout passed to wait(),
tornado/,43,Timeout set with environment variable,
tornado/,63,Trigger a gc to make warnings more deterministic.,
tornado/,67,"This test verifies that ""leaked"" coroutines are shut down",
tornado/,68,"without triggering warnings like ""task was destroyed but it",
tornado/,69,"is pending"". If this test were to fail, it would fail",
tornado/,70,because runtests.py detected unexpected output to stderr.,
tornado/,87,Bind a second port.,
tornado/,104,Ensure that self.fetch() recognizes absolute urls and does,
tornado/,105,not transform them into references to our main test server.,
tornado/,140,"Silence ""RuntimeWarning: coroutine 'test_coro' was never awaited"".",
tornado/,238,Set a short timeout and exceed it.,
tornado/,243,This can't use assertRaises because we need to inspect the,
tornado/,244,exc_info triple (and not just the exception object),
tornado/,249,"The stack trace should blame the add_timeout line, not just",
tornado/,250,unrelated IOLoop/testing internals.,
tornado/,256,A test that does not exceed its timeout should succeed.,
tornado/,269,"Uses provided timeout of 0.5 seconds, doesn't time out.",
tornado/,280,"Uses environment-variable timeout of 0.1, times out.",
tornado/,313,Set a short timeout and exceed it.,
tornado/,327,Use the current loop instead of creating a new one here.,
tornado/,331,This simulates the effect of an asyncio test harness like,
tornado/,332,pytest-asyncio.,
tornado/,340,AsyncTestCase must not affect the existing asyncio loop.,
tornado/,346,type: ignore,
tornado/,25,noqa: F401,
tornado/,30,"A callback returning {} or [] shouldn't spin the CPU, see Issue #1803.",
tornado/,41,type: ignore,
tornado/,42,type: ignore,
tornado/,43,type: ignore,
tornado/,50,Make sure that add_callback from inside a running IOLoop,
tornado/,51,wakes up the IOLoop immediately instead of waiting for a timeout.,
tornado/,59,Store away the time so we can check if we woke up immediately,
tornado/,70,sleep a bit to let the ioloop go into its poll loop,
tornado/,92,Attempting to add the same handler twice fails,
tornado/,93,(with a platform-dependent exception),
tornado/,106,remove_handler should not throw an exception if called on an fd,
tornado/,107,was never added.,
tornado/,115,"cheat a little bit and just run this normally, since we can't",
tornado/,116,easily simulate the races that happen with real signal handlers,
tornado/,121,"Very crude test, just to make sure that we cover this case.",
tornado/,122,This also happens to be the first test where we run an IOLoop in,
tornado/,123,a non-main thread.,
tornado/,132,add_callback should not fail if it races with another thread,
tornado/,133,closing the IOLoop. The callbacks are dropped silently,
tornado/,134,without executing.,
tornado/,150,just because socketpair is so convenient,
tornado/,152,Ensure that write events don't come in while we're waiting for,
tornado/,153,a read and haven't asked for writeability. (the reverse is,
tornado/,154,difficult to test for),
tornado/,164,type: ignore,
tornado/,173,It is not an error to call remove_timeout after it has run.,
tornado/,179,Add and remove enough callbacks to trigger cleanup.,
tornado/,180,"Not a very thorough test, but it ensures that the cleanup code",
tornado/,181,gets executed and doesn't blow up.  This test is only really useful,
tornado/,182,"on PollIOLoop subclasses, but it should run silently on any",
tornado/,183,implementation.,
tornado/,187,HACK: wait two IOLoop iterations for the GC to happen.,
tornado/,194,Schedule several callbacks and wait for them all to come due at once.,
tornado/,195,"t2 should be cancelled by t1, even though it is already scheduled to",
tornado/,196,be run before the ioloop even looks at it.,
tornado/,215,This tests that all the timeout methods pass through *args correctly.,
tornado/,216,type: List[int],
tornado/,223,The asyncio event loop does not guarantee the order of these,
tornado/,224,callbacks.,
tornado/,228,All the timeout methods return non-None handles that can be,
tornado/,229,passed to remove_timeout.,
tornado/,249,Use a socket since they are supported by IOLoop on all platforms.,
tornado/,250,"Unfortunately, sockets don't support the .closed attribute for",
tornado/,251,"inspecting their close status, so we must use a wrapper.",
tornado/,304,The exact error is unspecified - some implementations use,
tornado/,305,"IOError, others use ValueError.",
tornado/,351,Stop the IOLoop two iterations after raising an exception,
tornado/,352,to give the exception time to be logged.,
tornado/,361,"Both add_callback and spawn_callback run directly on the IOLoop,",
tornado/,362,so their errors are logged without stopping the test.,
tornado/,367,"A spawned callback is run directly on the IOLoop, so it will be",
tornado/,368,logged without stopping the test.,
tornado/,376,Create two sockets with simultaneous read events.,
tornado/,382,"After reading from one fd, remove the other from the IOLoop.",
tornado/,397,Only one fd was read; the other was cleanly removed.,
tornado/,405,Regression test for #2367,
tornado/,414,Deliberately not a subclass of AsyncTestCase so the IOLoop isn't,
tornado/,415,automatically set as current.,
tornado/,418,type: typing.Optional[IOLoop],
tornado/,427,The first IOLoop with default arguments is made current.,
tornado/,429,A second IOLoop can be created but is not made current.,
tornado/,436,The new IOLoop is not initially made current.,
tornado/,438,"Starting the IOLoop makes it current, and stopping the loop",
tornado/,439,makes it non-current. This process is repeatable.,
tornado/,450,"Now that the loop is stopped, it is no longer current.",
tornado/,457,A second make_current=True construction cannot succeed.,
tornado/,459,current() was not affected by the failed construction.,
tornado/,466,"If there is no current IOLoop, clear_current is a no-op (but",
tornado/,467,should not fail). Use a thread so we see the threading.Local,
tornado/,468,in a pristine state.,
tornado/,495,"Note that return value doesn't actually do anything,",
tornado/,496,it is just passed through to our final assertion to,
tornado/,497,make sure it is passed through properly.,
tornado/,500,"Run two synchronous functions, which would deadlock if not",
tornado/,501,run in parallel.,
tornado/,519,Go through an async wrapper to ensure that the result of,
tornado/,520,run_in_executor works with await and not just gen.coroutine,
tornado/,521,(simply passing the underlying concurrrent future would do that).,
tornado/,637,"If a call runs for too long, we skip entire cycles to get",
tornado/,638,back on schedule.,
tornado/,643,first 3 calls on schedule,
tornado/,645,next 2 delayed one cycle,
tornado/,647,next 2 delayed 2 cycles,
tornado/,649,next 2 delayed 3 cycles,
tornado/,651,then back on schedule.,
tornado/,659,"Backwards jumps are ignored, potentially resulting in a",
tornado/,660,slightly slow schedule (although we assume that when,
tornado/,661,"time.time() and time.monotonic() are different, time.time()",
tornado/,662,is getting adjusted by NTP and is therefore more accurate),
tornado/,667,"For big jumps, we should perhaps alter the schedule, but we",
tornado/,668,don't currently. This trace shows that we run callbacks,
tornado/,669,"every 10s of time.time(), but the first and second calls are",
tornado/,670,110s of real time apart because the backwards jump is,
tornado/,671,ignored.,
tornado/,697,"When asyncio is available, it is used by default.",
tornado/,1,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,2,not use this file except in compliance with the License. You may obtain,
tornado/,3,a copy of the License at,
tornado/,4,,
tornado/,5,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,6,,
tornado/,7,"Unless required by applicable law or agreed to in writing, software",
tornado/,8,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,9,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,10,License for the specific language governing permissions and limitations,
tornado/,11,under the License.,
tornado/,15,noqa: F401,
tornado/,26,"type: typing.List[typing.Union[int, str]]",
tornado/,33,"wait() resolved to False, meaning it timed out.",
tornado/,83,Callbacks execute in the order they were registered.,
tornado/,101,Callbacks execute in the order they were registered.,
tornado/,102,type: ignore,
tornado/,108,Too late.,
tornado/,116,This fires before the wait times out.,
tornado/,120,No TimeoutError.,
tornado/,124,"Register callbacks 0, 1, 2, and 3. Callback 1 has a timeout.",
tornado/,125,"Wait for that timeout to expire, then do notify(2) and make",
tornado/,126,sure everyone runs. Verifies that a timed-out callback does,
tornado/,127,not count against the 'n' argument to notify().,
tornado/,134,Wait for callback 1 to time out.,
tornado/,153,Wait for callback 1 to time out.,
tornado/,163,"Ensure no notifications lost, even if notify() is reentered by a",
tornado/,164,waiter calling notify().,
tornado/,167,Three waiters.,
tornado/,170,"First and second futures resolved. Second future reenters notify(),",
tornado/,171,resolving third future.,
tornado/,179,Test that timed-out waiters are occasionally cleaned from the queue.,
tornado/,187,"Let first 101 waiters time out, triggering a collection.",
tornado/,191,Final waiter is still active.,
tornado/,224,"After a timed-out waiter, normal operation works.",
tornado/,263,Wait for release().,
tornado/,274,Now acquire() is instant.,
tornado/,284,Too late.,
tornado/,300,This fires before the wait times out.,
tornado/,304,No TimeoutError.,
tornado/,307,"Unbounded releases are allowed, and increment the semaphore's value.",
tornado/,312,Now the counter is 3. We can acquire three times before blocking.,
tornado/,320,Test that timed-out waiters are occasionally cleaned from the queue.,
tornado/,330,"Let first 101 waiters time out, triggering a collection.",
tornado/,334,Final waiter is still active.,
tornado/,339,"Prevent ""Future exception was never retrieved"" messages.",
tornado/,351,Semaphore was released and can be acquired again.,
tornado/,356,Repeat the above test using 'async with'.,
tornado/,365,Semaphore was released and can be acquired again.,
tornado/,375,Semaphore was released and can be acquired again.,
tornado/,384,Semaphore was released and can be acquired again.,
tornado/,394,Counter is still 0.,
tornado/,419,"Ensure we catch a ""with (yield sem)"", which should be",
tornado/,420,"""with (yield sem.acquire())"".",
tornado/,426,"Ensure we catch a ""with sem"", which should be",
tornado/,427,"""with (yield sem.acquire())"".",
tornado/,437,Value is 0.,
tornado/,439,Block on acquire().,
tornado/,444,Value is 1.,
tornado/,452,No errors.,
tornado/,485,Repeat the above test using `async with lock:`,
tornado/,486,instead of `with (yield lock.acquire()):`.,
tornado/,508,Still locked.,
tornado/,520,"Ensure we catch a ""with (yield lock)"", which should be",
tornado/,521,"""with (yield lock.acquire())"".",
tornado/,527,"Ensure we catch a ""with lock"", which should be",
tornado/,528,"""with (yield lock.acquire())"".",
tornado/,1,Author: Ovidiu Predescu,
tornado/,2,Date: July 2011,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,31,type: ignore,
tornado/,36,type: ignore,
tornado/,37,type: ignore,
tornado/,38,type: ignore,
tornado/,39,type: ignore,
tornado/,40,type: ignore,
tornado/,46,Not used directly but needed for `yield deferred` to work.,
tornado/,47,noqa: F401,
tornado/,60,This indicates we're not cleaning up after ourselves properly.,
tornado/,70,"Test various combinations of twisted and tornado http servers,",
tornado/,71,"http clients, and event loop interfaces.",
tornado/,110,"In theory, we can run the event loop through Tornado,",
tornado/,111,"Twisted, or asyncio interfaces. However, since we're trying",
tornado/,112,"to avoid installing anything as the global event loop, only",
tornado/,113,the twisted interface gets everything wired up correectly,
tornado/,114,without extra hacks. This method is a part of a,
tornado/,115,no-longer-used generalization that allowed us to test,
tornado/,116,different combinations.,
tornado/,129,http://twistedmatrix.com/documents/current/web/howto/client.html,
tornado/,155,loop hasn't been initialized yet; try our best to,
tornado/,156,get an error message out. (the runner() interaction,
tornado/,157,should probably be refactored).,
tornado/,173,"This is simpler than the non-coroutine version, but it cheats",
tornado/,174,by reading the body in one blob instead of streaming it with,
tornado/,175,a Protocol.,
tornado/,179,readBody has a buggy DeprecationWarning in Twisted 15.0:,
tornado/,180,https://twistedmatrix.com/trac/changeset/43379,
tornado/,218,inlineCallbacks doesn't work with regular functions;,
tornado/,219,must have a yield even if it's unreachable.,
tornado/,14,set_close_exec works with sockets.,
tornado/,19,But it doesn't work with pipes.,
tornado/,13,type: typing.Optional[int],
tornado/,38,Regression test for a bug in which can_keep_alive would crash,
tornado/,39,for an HTTP/1.0 (not 1.1) response with no content-length.,
tornado/,23,noqa: F401,
tornado/,26,type: ignore,
tornado/,33,type: ignore,
tornado/,34,type: ignore,
tornado/,42,type: typing.Any,
tornado/,50,It is impossible to quickly and consistently generate an error in name,
tornado/,51,"resolution, so test this case separately, using mocks as needed.",
tornado/,53,type: typing.Any,
tornado/,73,getaddrinfo-based tests need mocking to reliably generate errors;,
tornado/,74,some configurations are slow to produce errors and take longer than,
tornado/,75,our default timeout.,
tornado/,141,Test for a deadlock when importing a module that runs the,
tornado/,142,ThreadedResolver at import-time. See resolve_test.py for,
tornado/,143,full explanation.,
tornado/,152,Success.,
tornado/,158,We do not test errors with CaresResolver:,
tornado/,159,Some DNS-hijacking ISPs (e.g. Time Warner) return non-empty results,
tornado/,160,with an NXDOMAIN status code.  Most resolvers treat this as an error;,
tornado/,161,"C-ares returns the results, making the ""bad_host"" tests unreliable.",
tornado/,162,"C-ares will try to resolve even malformed names, such as the",
tornado/,163,name with spaces used in this test.,
tornado/,173,TwistedResolver produces consistent errors in our test cases so we,
tornado/,174,"could test the regular and error cases in the same class. However,",
tornado/,175,in the error cases it appears that cleanup of socket objects is,
tornado/,176,"handled asynchronously and occasionally results in ""unclosed socket""",
tornado/,177,warnings if not given time to shut down (and there is no way to,
tornado/,178,"explicitly shut it down). This makes the test flaky, so we do not",
tornado/,179,test error cases here.,
tornado/,224,type: List[socket.socket],
tornado/,19,Windows disallows deleting files that are in use by,
tornado/,20,"another process, and even though we've waited for our",
tornado/,21,"child process below, it appears that its lock on these",
tornado/,22,files is not guaranteed to be released by this point.,
tornado/,23,Sleep and try again (once).,
tornado/,44,Create temporary test application,
tornado/,50,Make sure the tornado module under test is available to the test,
tornado/,51,application,
tornado/,67,This test verifies that when `python -m tornado.autoreload`,
tornado/,68,is used on an application that also has an internal,
tornado/,69,"autoreload, the reload wrapper is preserved on restart.",
tornado/,94,Create temporary test application,
tornado/,102,Make sure the tornado module under test is available to the test,
tornado/,103,application,
tornado/,116,This timeout needs to be fairly generous for pypy due to jit,
tornado/,117,warmup costs.,
tornado/,4,"When this module is imported, it runs getaddrinfo on a thread. Since",
tornado/,5,"the hostname is unicode, getaddrinfo attempts to import encodings.idna",
tornado/,6,but blocks on the import lock. Verify that ThreadedResolver avoids,
tornado/,7,this deadlock.,
tornado/,20,Not using AsyncHTTPTestCase because we need control over the IOLoop.,
tornado/,27,must use os._exit instead of sys.exit so unittest's,
tornado/,28,exception handler doesn't catch it,
tornado/,38,"We're in a child process, and probably got to this point",
tornado/,39,"via an uncaught exception.  If we return now, both",
tornado/,40,processes will continue with the rest of the test suite.,
tornado/,41,Exit now so the parent process will restart the child,
tornado/,42,(since we don't have a clean way to signal failure to,
tornado/,43,the parent that won't restart),
tornado/,47,"In the surviving process, clear the alarm we set earlier",
tornado/,52,This test doesn't work on twisted because we use the global,
tornado/,53,reactor and don't restore it to a sane state after the fork,
tornado/,54,"(asyncio has the same issue, but we have a special case in",
tornado/,55,place for it).,
tornado/,64,ensure that none of these processes live too long,
tornado/,65,master process,
tornado/,69,child processes,
tornado/,71,"if we exit cleanly from fork_processes, all the child processes",
tornado/,72,finished with status 0,
tornado/,79,"Reset the global asyncio event loop, which was put into",
tornado/,80,a broken state by the fork.,
tornado/,90,Always use SimpleAsyncHTTPClient here; the curl,
tornado/,91,version appears to get confused sometimes if the,
tornado/,92,connection gets closed before it's had a chance to,
tornado/,93,switch from writing mode to reading mode.,
tornado/,103,Make two processes exit abnormally,
tornado/,107,"They've been restarted, so a new fetch will work",
tornado/,110,Now the same with signals,
tornado/,111,Disabled because on the mac a process dying with a signal,
tornado/,112,"can trigger an ""Application exited abnormally; send error",
tornado/,113,"report to Apple?"" prompt.",
tornado/,114,"fetch(""/?signal=%d"" % signal.SIGTERM, fail_ok=True)",
tornado/,115,"fetch(""/?signal=%d"" % signal.SIGABRT, fail_ok=True)",
tornado/,116,"int(fetch(""/"").body)",
tornado/,118,Now kill them normally so they won't be restarted,
tornado/,120,One process left; watch it's pid change,
tornado/,126,Kill the last one so we shut down cleanly,
tornado/,144,This test fails non-deterministically with LayeredTwistedIOLoop.,
tornado/,145,(the read_until('\n') returns '\n' instead of 'hello\n'),
tornado/,146,This probably indicates a problem with either TornadoReactor,
tornado/,147,"or TwistedIOLoop, but I haven't been able to track it down",
tornado/,148,and for now this is just causing spurious travis-ci failures.,
tornado/,173,Close the parent's stdin handle and see that the child recognizes it.,
tornado/,188,"This test is mysteriously flaky on twisted: it succeeds, but logs",
tornado/,189,an error of EBADF on closing a file descriptor.,
tornado/,197,More mysterious EBADF: This fails if done with self.addCleanup instead of here.,
tornado/,231,We failed to get the termination signal. This test is,
tornado/,232,"occasionally flaky on pypy, so try to get a little more",
tornado/,233,information: did the process close its stdout,
tornado/,234,(indicating that the problem is in the parent process's,
tornado/,235,signal handling) or did the child process somehow fail,
tornado/,236,to terminate?,
tornado/,238,type: ignore,
tornado/,19,handle_stream may be a coroutine and any exception in its,
tornado/,20,Future will be logged.,
tornado/,47,handle_stream may be a native coroutine.,
tornado/,73,Issue #2069: calling server.stop() in a loop callback should not,
tornado/,74,raise EBADF when the loop handles other server connection,
tornado/,75,requests in the same loop iteration,
tornado/,80,type: ignore,
tornado/,105,"Ideally we'd make the test deterministic, but we're testing",
tornado/,106,for a race condition in combination with the system's TCP stack...,
tornado/,115,Here tearDown() would re-raise the EBADF encountered in the IO loop,
tornado/,120,These tests verify that the two multiprocess examples from the,
tornado/,121,TCPServer docs work. Both tests start a server with three worker,
tornado/,122,"processes, each of which prints its task id to stdout (a single",
tornado/,123,"byte, so we don't have to worry about atomicity of the shared",
tornado/,124,stdout stream) and then exits.,
tornado/,141,"As a sanity check, run the single-process version through this test",
tornado/,142,harness too.,
tornado/,51,noqa: F401,
tornado/,68,type: ignore,
tornado/,101,"In pre-1.0 versions of openssl, SSLv23 clients always send SSLv2",
tornado/,102,"ClientHello messages, which are rejected by SSLv3 and TLSv1",
tornado/,103,servers.  Note that while the OPENSSL_VERSION_INFO was formally,
tornado/,104,"introduced in python3.2, it was present but undocumented in",
tornado/,105,python 2.7,
tornado/,136,Make sure the server closes the connection when it gets a non-ssl,
tornado/,137,"connection, rather than waiting for a timeout or otherwise",
tornado/,138,misbehaving.,
tornado/,141,type: ignore,
tornado/,150,No stack traces are logged for SSL errors.,
tornado/,152,type: ignore,
tornado/,159,Python's SSL implementation differs significantly between versions.,
tornado/,160,"For example, SSLv3 and TLSv1 throw an exception if you try to read",
tornado/,161,"from the socket before the handshake is complete, but the default",
tornado/,162,of SSLv23 allows it.,
tornado/,223,This actually works because both files exist,
tornado/,242,This test is also called from wsgi_test,
tornado/,270,"Encodings here are tricky:  Headers are latin1, bodies can be",
tornado/,271,anything (we use utf8 by default).,
tornado/,301,We support both CRLF and bare LF as line separators.,
tornado/,308,Run through a 100-continue interaction by hand:,
tornado/,309,"When given Expect: 100-continue, we get a 100 response after the",
tornado/,310,"headers, and then the real response after the body.",
tornado/,346,"type: Dict[str, str]",
tornado/,367,secure cookies,
tornado/,438,urlparse.urlsplit (which tornado.httpserver used to use,
tornado/,439,"incorrectly) would parse paths beginning with ""//"" as",
tornado/,440,protocol-relative urls.,
tornado/,496,TODO: need an async version of ExpectLog so we don't need,
tornado/,497,hard-coded timeouts here.,
tornado/,512,Chunked requests are not widely supported and we don't have a way,
tornado/,513,"to generate them in AsyncHTTPClient, but HTTPServer will read them.",
tornado/,536,"As per RFC 2616 section 3.6, ""Transfer-Encoding"" header's value is",
tornado/,537,case-insensitive.,
tornado/,636,This is a hack - there's nothing that fundamentally requires http/1,
tornado/,637,here but tornado_http2 doesn't support it yet.,
tornado/,753,Unix sockets don't have remote addresses so they just return an,
tornado/,754,empty string.,
tornado/,778,512KB should be bigger than the socket buffers so it will,
tornado/,779,be written out in chunks.,
tornado/,798,"This is not very realistic, but finishing the request",
tornado/,799,from the close callback has the right timing to mimic,
tornado/,800,some errors seen in the wild.,
tornado/,822,We just closed the client side of the socket; let the IOLoop run,
tornado/,823,once to make sure the server side got the message.,
tornado/,831,The next few methods are a crude manual http client,
tornado/,874,"keepalive is supported for http 1.0 too, but it's opt-in",
tornado/,922,only read once,
tornado/,940,Let the hanging coroutine clean up after itself,
tornado/,1006,Gzip support is opt-in; without it the server fails to parse,
tornado/,1007,"the body (but parsing form bodies is currently just a log message,",
tornado/,1008,not a fatal error).,
tornado/,1015,"50 characters long, and repetitive so it can be compressed.",
tornado/,1020,"body_producer doesn't work on curl_httpclient, so override the",
tornado/,1021,configured AsyncHTTPClient implementation.,
tornado/,1032,type: List[int],
tornado/,1077,Without compression we know exactly what to expect.,
tornado/,1084,Compression creates irregular boundaries so the assertions,
tornado/,1085,in fetch_chunk_sizes are as specific as we can get.,
tornado/,1093,HTTP chunk boundaries translate to application-visible breaks,
tornado/,1127,"431 is ""Request Header Fields Too Large"", defined in RFC",
tornado/,1128,"6585. However, many implementations just close the",
tornado/,1129,"connection in this case, resulting in a missing response.",
tornado/,1144,type: List[IOStream],
tornado/,1171,Use the connection twice to make sure keep-alives are working,
tornado/,1178,Now let the timeout trigger and close the connection.,
tornado/,1214,"body_producer doesn't work on curl_httpclient, so override the",
tornado/,1215,configured AsyncHTTPClient implementation.,
tornado/,1231,This test is flaky on windows for unknown reasons.,
tornado/,1274,Use a raw stream because AsyncHTTPClient won't let us read a,
tornado/,1275,response without finishing a body.,
tornado/,1288,The max_body_size override is reset between requests.,
tornado/,1292,Use a raw stream so we can make sure it's all on one connection.,
tornado/,1300,"Without the ?expected_size parameter, we get the old default value",
tornado/,1313,The old request_callback interface does not implement the,
tornado/,1314,"delegate interface, and writes its response via request.write",
tornado/,1315,instead of request.connection.write_headers.,
tornado/,1319,"This test will be skipped if we're using HTTP/2,",
tornado/,1320,so just close it out cleanly using the modern interface.,
tornado/,1,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,2,not use this file except in compliance with the License. You may obtain,
tornado/,3,a copy of the License at,
tornado/,4,,
tornado/,5,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,6,,
tornado/,7,"Unless required by applicable law or agreed to in writing, software",
tornado/,8,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,9,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,10,License for the specific language governing permissions and limitations,
tornado/,11,under the License.,
tornado/,33,Basic test that the asyncio loop is set up correctly.,
tornado/,39,Test that we can yield an asyncio future from a tornado coroutine.,
tornado/,40,"Without 'yield from', we must wrap coroutines in ensure_future,",
tornado/,41,"which was introduced during Python 3.4, deprecating the prior ""async"".",
tornado/,45,async is a reserved word in Python 3.7,
tornado/,65,This test demonstrates that when using the asyncio coroutine,
tornado/,66,"runner (i.e. run_until_complete), the to_asyncio_future",
tornado/,67,"adapter is needed. No adapter is needed in the other direction,",
tornado/,68,as demonstrated by other tests in the package.,
tornado/,80,"Use the adapter, but two degrees from the tornado coroutine.",
tornado/,84,Tornado supports native coroutines both with and without adapters,
tornado/,89,Asyncio only supports coroutines that yield asyncio-compatible,
tornado/,90,Futures (which our Future is since 5.0).,
tornado/,113,Trigger a cleanup of the mapping so we start with a clean slate.,
tornado/,115,If we don't clean up after ourselves other tests may fail on,
tornado/,116,py34.,
tornado/,127,Create and close an AsyncIOLoop using Tornado interfaces.,
tornado/,136,Create and close an AsyncIOMainLoop using asyncio interfaces.,
tornado/,143,"Because the cleanup is run on new loop creation, we have one",
tornado/,144,dangling entry in the map (but only one).,
tornado/,174,"With the default policy, non-main threads don't get an event",
tornado/,175,loop.,
tornado/,179,Set the policy and we can get a loop.,
tornado/,182,Clean up to silence leak warnings. Always use asyncio since,
tornado/,183,IOLoop doesn't (currently) close the underlying loop.,
tornado/,184,type: ignore,
tornado/,22,type: ignore,
tornado/,27,noqa: F401,
tornado/,123,callbacks run at different times,
tornado/,134,callbacks run at different times,
tornado/,145,Yielding a list used to have quadratic performance; make,
tornado/,146,sure a large list stays reasonable.  On my laptop a list of,
tornado/,147,"2000 used to take 1.8s, now it takes 0.12.",
tornado/,155,Empty lists or dicts should return the same type.,
tornado/,173,"Note that this doesn't work with native corotines, only with",
tornado/,174,decorated coroutines.,
tornado/,196,"With only one exception, no error is logged.",
tornado/,202,Exception logging may be explicitly quieted.,
tornado/,222,"With only one exception, no error is logged.",
tornado/,226,Exception logging may be explicitly quieted.,
tornado/,284,"Stray StopIteration exceptions can lead to tests exiting prematurely,",
tornado/,285,so we need explicit checks here to make sure the tests run all,
tornado/,286,the way through.,
tornado/,303,type: ignore,
tornado/,360,"A yield statement exists but is not executed, which means",
tornado/,361,"this function ""returns"" via an exception.  This exception",
tornado/,362,doesn't happen before the exception handling is set up.,
tornado/,380,This test verifies that an async function can await a,
tornado/,381,"yield-based gen.coroutine, and that a gen.coroutine",
tornado/,382,(the test method itself) can yield an async function.,
tornado/,393,asyncio.sleep(0) turns into a special case (equivalent to,
tornado/,394,`yield None`),
tornado/,445,Without a return value we don't need python 3.3.,
tornado/,461,The exception is raised when the future is yielded,
tornado/,462,"(or equivalently when its result method is called),",
tornado/,463,not when the function itself is called).,
tornado/,483,Test exception handling: a coroutine can catch one exception,
tornado/,484,raised by a yield point and raise a different one.,
tornado/,503,Test exception handling: a coroutine can catch an exception,
tornado/,504,raised by a yield point and not raise a different one.,
tornado/,530,"First, confirm the behavior without moment: each coroutine",
tornado/,531,monopolizes the event loop until it finishes.,
tornado/,532,type: Future[None],
tornado/,537,"With moment, they take turns.",
tornado/,580,"On CPython, tasks and their arguments should be released immediately",
tornado/,581,without waiting for garbage collection.,
tornado/,610,Enable debug mode,
tornado/,620,We expect the coroutine repr() to show the place where,
tornado/,621,it was instantiated,
tornado/,628,This demonstrates that tornado coroutines can be understood,
tornado/,629,by asyncio (This failed prior to Tornado 5.0).,
tornado/,659,"just write, don't finish",
tornado/,663,"""Undecorated"" here refers to the absence of @asynchronous.",
tornado/,667,type: List[str],
tornado/,741,type: Future[str],
tornado/,750,type: Future[str],
tornado/,760,type: Future[str],
tornado/,767,A concurrent future that does not resolve before the timeout.,
tornado/,776,A concurrent future that is resolved before we even submit it,
tornado/,777,to with_timeout.,
tornado/,784,wait for completion,
tornado/,789,A conccurrent future that resolves while waiting for the timeout.,
tornado/,811,type: Future[int],
tornado/,812,type: Future[int],
tornado/,813,type: Future[int],
tornado/,822,"Order is not guaranteed, but the current implementation",
tornado/,823,preserves ordering of already-done Futures.,
tornado/,877,type: List[Future[int]],
tornado/,903,Recreate the previous test with py35 syntax. It's a little clunky,
tornado/,904,because of the way the previous test handles an exception on,
tornado/,905,a single iteration.,
tornado/,906,type: List[Future[int]],
tornado/,940,"In this usage, there is no direct hard reference to the",
tornado/,941,"WaitIterator itself, only the Future it returns. Since",
tornado/,942,WaitIterator uses weak references internally to improve GC,
tornado/,943,"performance, this used to cause problems.",
tornado/,955,Github issue 1769: Runner objects can get GCed unexpectedly,
tornado/,956,while their future is alive.,
tornado/,957,type: List[Optional[weakref.ReferenceType]],
tornado/,961,type: ignore,
tornado/,965,type: Future[int],
tornado/,973,Github issue 2229: suspended coroutines should be GCed when,
tornado/,974,"their loop is closed, even if they're involved in a reference",
tornado/,975,cycle.,
tornado/,977,type: List[Optional[bool]],
tornado/,987,coroutine finalizer,
tornado/,993,type: ignore,
tornado/,1000,Future was collected,
tornado/,1002,At least one wakeup,
tornado/,1005,coroutine finalizer was called (not on PyPy3 apparently),
tornado/,1009,"Same as test_gc_infinite_coro, but with a `async def` function",
tornado/,1018,coroutine finalizer,
tornado/,1022,type: List[Optional[bool]],
tornado/,1028,type: ignore,
tornado/,1036,Future was collected,
tornado/,1038,At least one wakeup and one finally,
tornado/,1041,coroutine finalizer was called (not on PyPy3 apparently),
tornado/,1045,Test gen.multi with moment,
tornado/,1046,now that it's not a real Future,
tornado/,1058,type: contextvars.ContextVar[int],
tornado/,1078,IOLoop.run_in_executor doesn't automatically copy context,
tornado/,1083,Neither does asyncio's run_in_executor.,
tornado/,1100,Verify that context vars get propagated across various,
tornado/,1101,combinations of native and decorated coroutines.,
tornado/,9,noqa: F401,
tornado/,85,Unicode literals should be usable in templates.  Note that this,
tornado/,86,test simulates unicode characters appearing directly in the,
tornado/,87,"template file (with utf8 encoding), i.e. \u escapes would not",
tornado/,88,be used in the template file itself.,
tornado/,162,remove extraneous whitespace,
tornado/,174,"This test verifies current behavior, although of course it would",
tornado/,175,be nice if apply didn't cause seemingly unrelated breakage,
tornado/,186,TODO(bdarnell): make a test like this for one of the future,
tornado/,187,imports available in python 3. Unfortunately they're harder,
tornado/,188,to use in a template than division was.,
tornado/,190,This file has from __future__ import division...,
tornado/,192,...but the template doesn't,
tornado/,233,type: typing.Optional[DictLoader],
tornado/,317,Make sure that ParseErrors remain compatible with their,
tornado/,318,pre-4.3 signature.,
tornado/,339,"Extend a base template with different autoescape policy,",
tornado/,340,with and without overriding the base's blocks,
tornado/,457,Whitespace including newlines is allowed within template tags,
tornado/,458,"and directives, and this is one way to avoid long lines while",
tornado/,459,keeping extra whitespace out of the rendered output.,
tornado/,475,Default whitespace handling depends on the template filename.,
tornado/,486,HTML and JS files have whitespace compressed by default.,
tornado/,489,TXT files do not.,
tornado/,492,Each file maintains its own status even when included in,
tornado/,493,a file of the other type.,
tornado/,18,noqa: F401,
tornado/,21,The unittest module presents misleading errors on ImportError,
tornado/,22,"(it acts as if websocket_test could not be found, hiding the underlying",
tornado/,23,error).  If we get an ImportError here (which could happen due to,
tornado/,24,"TORNADO_EXTENSION=1), print some extra information before failing.",
tornado/,38,type: ignore,
tornado/,90,"In a websocket context, many RequestHandler methods",
tornado/,91,raise RuntimeErrors.,
tornado/,92,type: ignore,
tornado/,219,type: Future[None],
tornado/,274,These tests require HTTP/1; force the use of SimpleAsyncHTTPClient.,
tornado/,282,"WS server, HTTP client.",
tornado/,383,Close the underlying stream.,
tornado/,388,Ensure that arbitrary headers can be passed through websocket_connect.,
tornado/,400,Ensure that headers can be returned in the response.,
tornado/,401,"Specifically, that arbitrary headers passed through websocket_connect",
tornado/,402,can be returned.,
tornado/,418,A message of None means the other side closed the connection.,
tornado/,422,The on_close callback is called no matter which side closed.,
tornado/,424,"The client echoed the close code it received to the server,",
tornado/,425,so the server's close code (returned via close_future) is,
tornado/,426,the same.,
tornado/,447,"Previously, an async prepare method triggered a bug that would",
tornado/,448,result in a timeout on test shutdown (and a memory leak).,
tornado/,463,"Send both messages immediately, coroutine must process one at a time.",
tornado/,511,"Host is 127.0.0.1, which should not be accessible from some other",
tornado/,512,domain,
tornado/,525,Subdomains should be disallowed by default.  If we could pass a,
tornado/,526,resolver to websocket_connect we could test sibling domains as well.,
tornado/,601,"Send both messages immediately, coroutine must process one at a time.",
tornado/,651,Send the same message three times so we can measure the,
tornado/,652,effect of the context_takeover options.,
tornado/,666,Small messages pass through.,
tornado/,670,"This message is too big after decompression, but it compresses",
tornado/,671,down to a size that will pass the initial checks.,
tornado/,681,Bytes out includes the 4-byte mask key per message.,
tornado/,690,"If only one side tries to compress, the extension is not negotiated.",
tornado/,711,Bytes out includes the 4 bytes mask key per message.,
tornado/,716,"Subclasses should define self.mask(mask, data)",
tornado/,725,Include test cases with \x00 bytes (to ensure that the C,
tornado/,726,extension isn't depending on null-terminated strings) and,
tornado/,727,bytes with the high bit set (to smoke out signedness issues).,
tornado/,763,TODO: test that the connection gets closed if ping responses stop.,
tornado/,780,TODO: test that the connection gets closed if ping responses stop.,
tornado/,799,on_ping always sees bytes.,
tornado/,815,Write a message that is allowed.,
tornado/,821,Write a message that is too large.,
tornado/,824,A message of None means the other side closed the connection.,
tornado/,828,TODO: Needs tests of messages split over multiple,
tornado/,829,continuation frames.,
tornado/,10,noqa: F401,
tornado/,122,Emulate the old HTTP/1.0 behavior of returning a body with no,
tornado/,123,content-length.  Tornado handles content-length at the framework,
tornado/,124,level so we have to go around it.,
tornado/,149,callable objects to finish pending /trigger requests,
tornado/,152,"type: typing.Deque[typing.Callable[[], None]]",
tornado/,179,"Class ""constructor"" reuses objects on the same IOLoop",
tornado/,181,unless force_instance is used,
tornado/,185,different IOLoops use different objects,
tornado/,200,"Send 4 requests.  Two can be sent immediately, while the others",
tornado/,201,will be queued,
tornado/,212,Finish the first two requests and let the next two through,
tornado/,219,Finish all the pending requests,
tornado/,228,following redirects should not consume additional connections,
tornado/,236,"We requested 5, followed three redirects for 4, 3, 2, then the last",
tornado/,237,unfollowed redirect is to 1.,
tornado/,243,Apps may reuse a headers object if they are only passing in constant,
tornado/,244,headers like user-agent.  The header object should not be modified.,
tornado/,255,"request is the original request, is a POST still",
tornado/,269,Return something valid so the test doesn't raise during shutdown.,
tornado/,281,Let the hanging coroutine clean up after itself. We need to,
tornado/,282,"wait more than a single IOLoop iteration for the SSL case,",
tornado/,283,which logs errors on unexpected EOF.,
tornado/,295,trigger the hanging request to let it clean up after itself,
tornado/,306,ipv6 is currently enabled by default but can be disabled,
tornado/,343,204 status shouldn't have a content-length,
tornado/,344,,
tornado/,345,Tests with a content-length header are included below,
tornado/,346,in HTTP204NoContentTestCase.,
tornado/,366,cygwin returns EPERM instead of ECONNREFUSED here,
tornado/,369,type: ignore,
tornado/,373,"This is usually ""Connection refused"".",
tornado/,374,"On windows, strerror is broken and returns ""Unknown error"".",
tornado/,380,"Wait for the trigger request to block, not complete.",
tornado/,493,"When following redirects, header and streaming callbacks",
tornado/,494,should only be called for the final result.,
tornado/,495,TODO(bdarnell): this test belongs in httpclient_test instead of,
tornado/,496,"simple_httpclient_test, but it fails with the version of libcurl",
tornado/,497,available on travis-ci. Move it when that has been upgraded,
tornado/,498,or we have a better framework to skip tests based on curl version.,
tornado/,499,type: typing.List[str],
tornado/,500,type: typing.List[bytes],
tornado/,508,Make sure we only got one set of headers.,
tornado/,557,"No stack traces are logged for SSL errors (in this case,",
tornado/,558,failure to validate the testing self-signed cert).,
tornado/,559,The SSLError is exposed through ssl.SSLError.,
tornado/,578,type: ignore,
tornado/,580,type: ignore,
tornado/,582,Now configure max_clients statically and try overriding it,
tornado/,583,with each way max_clients can be passed,
tornado/,586,type: ignore,
tornado/,588,type: ignore,
tornado/,590,type: ignore,
tornado/,614,"Not a full Application, but works as an HTTPServer callback",
tornado/,628,Close the request cleanly in HTTP/2; it will be skipped anyway.,
tornado/,635,"A 204 response never has a body, even if doesn't have a content-length",
tornado/,636,(which would otherwise mean read-until-close).  We simulate here a,
tornado/,637,server that sends no content length and does not close the connection.,
tornado/,638,,
tornado/,639,Tests of a 204 response with no Content-Length header are included,
tornado/,640,in SimpleHTTPClientTestMixin.,
tornado/,661,204 status with non-zero content length is malformed,
tornado/,702,Dummy Resolver subclass that never finishes.,
tornado/,707,Return something valid so the test doesn't raise during cleanup.,
tornado/,720,Let the hanging coroutine clean up after itself,
tornado/,792,100KB body with 64KB buffer,
tornado/,807,Add an invalid Transfer-Encoding to the response,
tornado/,817,Make sure the invalid headers are detected,
tornado/,1,flake8: noqa,
tornado/,51,"Test that all Tornado modules can be imported without side effects,",
tornado/,52,specifically without initializing the default asyncio event loop.,
tornado/,53,Since we can't tell which modules may have already beein imported,
tornado/,54,"in our process, do it in a subprocess for a clean slate.",
tornado/,60,Ensure we don't delete formerly-documented aliases accidentally.,
tornado/,4,"system locale module, not tornado.locale",
tornado/,72,type: ignore,
tornado/,78,type: ignore,
tornado/,115,Be strict about most warnings (This is set in our test running,
tornado/,116,"scripts to catch import-time warnings, but set it again here to",
tornado/,117,be sure). This also turns on warnings that are ignored by,
tornado/,118,"default, including DeprecationWarnings and python 3.2's",
tornado/,119,ResourceWarnings.,
tornado/,121,setuptools sometimes gives ImportWarnings about things that are on,
tornado/,122,sys.path even if they're not being used.,
tornado/,124,"Tornado generally shouldn't use anything deprecated, but some of",
tornado/,125,our dependencies do (last match wins).,
tornado/,132,"The unittest module is aggressive about deprecating redundant methods,",
tornado/,133,leaving some without non-deprecated spellings that work on both,
tornado/,134,2.7 and 3.2,
tornado/,143,Twisted 15.0.0 triggers some warnings on py3 with -bb.,
tornado/,146,"Prior to 3.6, async ResourceWarnings were rather noisy",
tornado/,147,and even,
tornado/,148,`python3.4 -W error -c 'import asyncio; asyncio.get_event_loop()'`,
tornado/,149,would generate a warning.,
tornado/,153,This deprecation warning is introduced in Python 3.8 and is,
tornado/,154,"triggered by pycurl. Unforunately, because it is raised in the C",
tornado/,155,layer it can't be filtered by module and we must match the,
tornado/,156,message text instead (Tornado's C module uses PY_SSIZE_T_CLEAN,
tornado/,157,so it's not at risk of running into this issue).,
tornado/,195,"Certain errors (especially ""unclosed resource"" errors raised in",
tornado/,196,destructors) go directly to stderr instead of logging. Count,
tornado/,197,anything written by anything but the test runner as an error.,
tornado/,200,type: ignore,
tornado/,206,HACK:  unittest.main will make its own changes to the warning,
tornado/,207,"configuration, which may conflict with the settings above",
tornado/,208,or command-line flags like -bb.  Passing warnings=False,
tornado/,209,"suppresses this behavior, although this looks like an implementation",
tornado/,210,detail.  http://bugs.python.org/issue15626,
tornado/,217,The tests should run clean; consider it a failure if they,
tornado/,218,logged anything at info level or above.,
tornado/,1,-*- coding: utf-8 -*-,
tornado/,13,noqa: F401,
tornado/,68,For testing error handling of a redirect with no location header.,
tornado/,78,Wait a bit to ensure the chunks are sent and received separately.,
tornado/,113,"Tornado strips content-length from 304 responses, but here we",
tornado/,114,want to simulate servers that include the headers anyway.,
tornado/,125,type: ignore,
tornado/,131,type: ignore,
tornado/,136,"Use get_arguments for keys to get strings, but",
tornado/,137,request.arguments for values to get bytes.,
tornado/,142,These tests end up getting run redundantly: once here with the default,
tornado/,143,"HTTPClient implementation, and then again in each implementation's own",
tornado/,144,test suite.,
tornado/,188,streaming_callback is also tested in test_chunked,
tornado/,189,type: typing.List[bytes],
tornado/,191,"with streaming_callback, data goes to the callback and not response.body",
tornado/,204,type: typing.List[bytes],
tornado/,210,test case in which chunks spread read-callback processing,
tornado/,211,"over several ioloop iterations, but the connection is already closed.",
tornado/,217,fake an HTTP server using chunked encoding where the final chunks,
tornado/,218,and connection close all happen at once,
tornado/,240,type: ignore,
tornado/,247,This test data appears in section 2 of RFC 7617.,
tornado/,267,This test data appears in section 2.1 of RFC 7617.,
tornado/,273,The standard mandates NFC. Give it a decomposed username,
tornado/,274,and ensure it is normalized to composed form.,
tornado/,282,curl and simple clients handle errors a bit differently; the,
tornado/,283,important thing is that they don't fall back to basic auth,
tornado/,284,on an unknown mode.,
tornado/,286,type: ignore,
tornado/,307,"If there is no location header, the redirect response should",
tornado/,308,just be returned as-is. (This should arguably raise an,
tornado/,309,"error, but libcurl doesn't treat this as an error, so we",
tornado/,310,don't either).,
tornado/,320,"This ""without body"" edge case is similar to what happens with body_producer.",
tornado/,329,"Legacy redirect codes (301, 302) convert POST requests to GET.",
tornado/,335,Other methods are left alone.,
tornado/,339,HEAD is different so check it separately.,
tornado/,344,Newer redirects always preserve the original method.,
tornado/,363,unicode string in body gets converted to utf8,
tornado/,373,byte strings pass through directly,
tornado/,383,Mixing unicode in headers and byte string bodies shouldn't,
tornado/,384,break anything,
tornado/,403,"All the tests in this file should be using gzip, but this test",
tornado/,404,"ensures that it is in fact getting compressed, and also tests",
tornado/,405,the httpclient's decompress=False option.,
tornado/,406,Setting Accept-Encoding manually bypasses the client's,
tornado/,407,decompression so we can see the raw data.,
tornado/,413,Our test data gets bigger when gzipped.  Oops.  :),
tornado/,414,Chunked encoding bypasses the MIN_LENGTH check.,
tornado/,426,Upgrading to HTTP/2,
tornado/,435,"All header callbacks are run before any streaming callbacks,",
tornado/,436,so the header data is available to process the data as it,
tornado/,437,comes in.,
tornado/,453,Construct a new instance of the configured client class,
tornado/,462,"Header values may be passed as character or utf8 byte strings,",
tornado/,463,in a plain dictionary or an HTTPHeaders object.,
tornado/,464,Keys must always be the native str type.,
tornado/,465,All combinations should have the same results on the wire.,
tornado/,479,Multi-line http headers are rare but rfc-allowed,
tornado/,480,http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2,
tornado/,502,type: ignore,
tornado/,509,According to the spec 304 responses SHOULD NOT include,
tornado/,510,"Content-Length or other entity headers, but some servers do it",
tornado/,511,anyway.,
tornado/,512,http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5,
tornado/,540,"The response.request attribute should be an HTTPRequest, not",
tornado/,541,a _RequestProxy.,
tornado/,542,This test uses self.http_client.fetch because self.fetch calls,
tornado/,543,self.get_url on the input unconditionally.,
tornado/,558,type: ignore,
tornado/,578,These methods require a body.,
tornado/,589,These methods don't allow a body.,
tornado/,597,"In most cases this can be overridden, but curl_httpclient",
tornado/,598,does not allow body with a GET at all.,
tornado/,609,This test causes odd failures with the combination of,
tornado/,610,curl_httpclient (at least with the version of libcurl available,
tornado/,611,"on ubuntu 12.04), TwistedIOLoop, and epoll.  For POST (but not PUT),",
tornado/,612,curl decides the response came back too soon and closes the connection,
tornado/,613,to start again.  It does this *before* telling the socket callback to,
tornado/,614,unregister the FD.  Some IOLoop implementations have special kernel,
tornado/,615,integration to discover this immediately.  Tornado's IOLoops,
tornado/,616,"ignore errors on remove_handler to accommodate this behavior, but",
tornado/,617,Twisted's reactor does not.  The removeReader call fails and so,
tornado/,618,do all future removeAll calls (which our tests do at cleanup).,
tornado/,619,,
tornado/,620,def test_post_307(self):,
tornado/,621,"response = self.fetch(""/redirect?status=307&url=/post"",",
tornado/,622,"method=""POST"", body=b""arg1=foo&arg2=bar"")",
tornado/,623,"self.assertEqual(response.body, b""Post arg1: foo, arg2: bar"")",
tornado/,633,Non-ascii headers are sent as latin1.,
tornado/,639,A few simple sanity checks of the response time fields to,
tornado/,640,make sure they're using the right basis (between the,
tornado/,641,wall-time and monotonic clocks).,
tornado/,647,A very crude check to make sure that start_time is based on,
tornado/,648,wall time and not the monotonic clock.,
tornado/,660,"We can't wait on the cancelled Future any more, so just",
tornado/,661,let the IOLoop run until the exception gets logged (or,
tornado/,662,"not, in which case we exit the loop and ExpectLog will",
tornado/,663,raise).,
tornado/,705,type: ignore,
tornado/,739,Delay the shutdown of the IOLoop by several iterations because,
tornado/,740,the server may still have some cleanup work left when,
tornado/,741,the client finishes with the response (this is noticeable,
tornado/,742,"with http/2, which leaves a Future with an unexamined",
tornado/,743,StreamClosedError on the loop).,
tornado/,748,"The number of iterations is difficult to predict. Typically,",
tornado/,749,"one is sufficient, although sometimes it needs more.",
tornado/,769,Synchronous HTTPClient raises errors directly; no need for,
tornado/,770,response.rethrow(),
tornado/,778,Regression test for,
tornado/,779,https://github.com/tornadoweb/tornado/issues/2539,
tornado/,780,,
tornado/,781,"In the past, the following program would log an",
tornado/,782,"""inconsistent AsyncHTTPClient cache"" error from a destructor",
tornado/,783,when the process is shutting down. The shutdown process is,
tornado/,784,subtle and I don't fully understand it; the failure does not,
tornado/,785,manifest if that lambda isn't there or is a simpler object,
tornado/,786,like an int (nor does it manifest in the tornado test suite,
tornado/,787,"as a whole, which is why we use this subprocess).",
tornado/,812,type: ignore,
tornado/,817,type: ignore,
tornado/,826,type: ignore,
tornado/,4,Use the selector event loop on windows. Do this in tornado/test/__init__.py,
tornado/,5,instead of runtests.py so it happens no matter how the test is run (such as,
tornado/,6,through editor integrations).,
tornado/,8,type: ignore,
tornado/,1,coding: utf-8,
tornado/,25,noqa: F401,
tornado/,30,This test would fail on python 3 if raise_exc_info were simply,
tornado/,31,"a three-argument raise statement, because TwoArgException",
tornado/,32,"doesn't have a ""copy constructor""",
tornado/,72,TestConfig3 is a configuration option that is itself configurable.,
tornado/,102,"no matter how the class is configured, it should always be",
tornado/,103,possible to instantiate the subclasses directly,
tornado/,113,In these tests we combine a typing.cast to satisfy mypy with,
tornado/,114,"a runtime type-assertion. Without the cast, mypy would only",
tornado/,115,let us access attributes of the base class.,
tornado/,162,args bound in configure don't apply when using the subclass directly,
tornado/,178,args bound in configure don't apply when using the subclass directly,
tornado/,195,The inner level can be used even when the outer level,
tornado/,196,doesn't point to it.,
tornado/,204,Configuring the base doesn't configure the inner.,
tornado/,222,TODO(bdarnell): make a version of this test for one of the new,
tornado/,223,future imports available in python 3.,
tornado/,226,This file has from __future__ import print_function...,
tornado/,229,...but the template doesn't,
tornado/,243,"type: Dict[str, Any]",
tornado/,252,"type: Dict[str, Any]",
tornado/,286,The internal implementation of __import__ differs depending on,
tornado/,287,whether the thing being imported is a module or not.,
tornado/,288,This variant requires a byte string in python 2.,
tornado/,1,,
tornado/,2,Copyright 2012 Facebook,
tornado/,3,,
tornado/,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/,5,not use this file except in compliance with the License. You may obtain,
tornado/,6,a copy of the License at,
tornado/,7,,
tornado/,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/,9,,
tornado/,10,"Unless required by applicable law or agreed to in writing, software",
tornado/,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/,13,License for the specific language governing permissions and limitations,
tornado/,14,under the License.,
tornado/,36,type: Future[int],
tornado/,50,The following series of classes demonstrate and test various styles,
tornado/,51,"of use, with and without generators and futures.",
tornado/,62,data already has \n,
tornado/,102,type: typing.Callable,
tornado/,105,type: ignore,
tornado/,113,type: ignore,
tornado/,125,type: ignore,
tornado/,1,-*- coding: utf-8 -*-,
tornado/,16,noqa: F401,
tornado/,60,non-final parse doesn't run callbacks,
tornado/,64,final parse does,
tornado/,68,callbacks can be run more than once on the same options,
tornado/,69,object if there are multiple final parses,
tornado/,100,the two option sets are distinct,
tornado/,116,setattr requires that options be the right type and doesn't,
tornado/,117,parse from string formats.,
tornado/,124,type: List[int],
tornado/,138,OptionParsers always define 'help'.,
tornado/,153,OptionParsers always define 'help'.,
tornado/,178,ensure that our setattr hooks don't interfere with mock.patch,
tornado/,188,Try nested patches mixed with explicit sets,
tornado/,269,Ensure that the dash/underscore normalization doesn't,
tornado/,270,interfere with the redefinition error.,
tornado/,288,Dashes and underscores should be interchangeable.,
tornado/,294,Attr-style access always uses underscores.,
tornado/,296,Dict-style access allows both.,
tornado/,301,"No matter how an option was defined, it can be set with underscores",
tornado/,302,in a config file.,
tornado/,312,Original names are preserved in introspection APIs.,
tornado/,325,--help shows CLI-style names with dashes.,
tornado/,55,noqa: F401,
tornado/,100,stub out enough methods to make the secure_cookie functions work,
tornado/,102,don't call super.__init__,
tornado/,103,"type: typing.Dict[str, bytes]",
tornado/,105,type: ignore,
tornado/,109,type: ignore,
tornado/,120,See SignedValueTest below for more.,
tornado/,129,this string base64-encodes to '12345678',
tornado/,145,shifting digits from payload to timestamp doesn't alter signature,
tornado/,146,"(this is not desirable behavior, just confirming that that's how it",
tornado/,147,works),
tornado/,157,tamper with the cookie,
tornado/,161,it gets rejected,
tornado/,166,Secure cookies accept arbitrary data (which is base64 encoded).,
tornado/,167,Note that normal cookies accept only a subset of ascii.,
tornado/,173,See SignedValueTest below for more.,
tornado/,222,type: Future,
tornado/,274,Try setting cookies with different argument types,
tornado/,275,to ensure that everything gets encoded correctly,
tornado/,288,unicode domain and path arguments shouldn't break things,
tornado/,289,either (see bug #285),
tornado/,302,A second call with the same name clobbers the first.,
tornado/,303,Attributes from the first call are not carried over.,
tornado/,362,python 2.7 octal-escapes the semicolon; older versions leave it alone,
tornado/,371,"even quoted, "";"" is a delimiter",
tornado/,372,escapes only decoded in quotes,
tornado/,409,The secure and httponly headers are capitalized in py35 and,
tornado/,410,lowercase in older versions.,
tornado/,426,we'll never actually get here because the test doesn't follow redirects,
tornado/,482,Let the hanging coroutine clean up after itself,
tornado/,497,Type checks: web.py interfaces convert argument values to,
tornado/,498,"unicode strings (by default, but see also decode_argument).",
tornado/,499,"In httpserver.py (i.e. self.request.arguments), they're left",
tornado/,500,as bytes.  Keys are always native strings.,
tornado/,530,Ensure that url-encoded question marks are handled properly,
tornado/,541,Path components and query arguments should be decoded the same way,
tornado/,552,"Slashes may be escaped to appear as a single ""directory"" in the path,",
tornado/,553,but they are then unescaped when passed to the get() method.,
tornado/,564,Percent signs (encoded as %25) should not mess up printf-style,
tornado/,565,messages in logs,
tornado/,572,"type: typing.Dict[str, str]",
tornado/,576,get_argument is an exception from the general rule of using,
tornado/,577,type str for non-body data mainly for historical reasons.,
tornado/,582,Secure cookies return bytes because they can contain arbitrary,
tornado/,583,"data, but regular cookies are native strings.",
tornado/,599,path_component uses type unicode instead of str for consistency,
tornado/,600,with get_argument(),
tornado/,618,use self.request.arguments directly to avoid recursion,
tornado/,671,Ensure that the flush callback is run whether or not there,
tornado/,672,was any output.  The gen.Task and direct yield forms are,
tornado/,673,equivalent.,
tornado/,674,"""empty"" flush, but writes headers",
tornado/,675,empty flush,
tornado/,677,"flushes the ""o""",
tornado/,678,empty flush,
tornado/,701,type: ignore,
tornado/,716,This test was shared with wsgi_test.py; now the name is meaningless.,
tornado/,804,These urls all decode to the same thing,
tornado/,827,"test that invalid unicode in URLs causes 400, not 500",
tornado/,835,These urls are all equivalent.,
tornado/,891,noqa: E501,
tornado/,936,Test merging of query and body arguments.,
tornado/,937,"In singular form, body arguments take precedence over query arguments.",
tornado/,941,In plural methods they are merged.,
tornado/,949,send as a post so we can ensure the separation between query,
tornado/,950,string and body arguments.,
tornado/,1064,"The expected SHA-512 hash of robots.txt, used in tests that call",
tornado/,1065,StaticFileHandler.get_version,
tornado/,1127,make sure the uncompressed file still has the correct type,
tornado/,1210,"On windows, the functions that work with time_t do not accept",
tornado/,1211,"negative values, and at least one client (processing.js) seems",
tornado/,1212,to use if-modified-since 1/1/1960 as a cache-busting technique.,
tornado/,1220,"Instead of the value from Last-Modified, make requests with times",
tornado/,1221,chosen just before and after the known modification time,
tornado/,1222,of the file to ensure that the right time zone is being used,
tornado/,1223,when parsing If-Modified-Since.,
tornado/,1259,Note: Chrome refuses to play audio if it gets an HTTP 206 in response,
tornado/,1260,to ``Range: bytes=0-`` :(,
tornado/,1345,"No body was returned, but we did get the right content length.",
tornado/,1383,"curl_httpclient processes "".."" on the client side, so we",
tornado/,1384,must test this with simple_httpclient.,
tornado/,1389,"Attempted path traversal should result in 403, not 200",
tornado/,1390,(which means the check failed and the file was served),
tornado/,1391,or 404 (which means that the file didn't exist and,
tornado/,1392,is probably a packaging error).,
tornado/,1397,Sometimes people set the StaticFileHandler's path to '/',
tornado/,1398,to disable Tornado's path validation (in conjunction with,
tornado/,1399,their own validation in get_absolute_path). Make sure,
tornado/,1400,that the stricter validation in 4.2.1 doesn't break them.,
tornado/,1650,"Not an entity header, but should not be added to 304s by chunking",
tornado/,1664,simple_httpclient only: curl doesn't expose the reason string,
tornado/,1703,simple_httpclient only: curl doesn't expose the reason string,
tornado/,1721,note that if the handlers list is empty we get the default_host,
tornado/,1722,"redirect fallback instead of a 404, so test with both an",
tornado/,1723,explicitly defined error handler and an implicit 404.,
tornado/,1743,Must write at least MIN_LENGTH bytes to activate compression.,
tornado/,1752,simple_httpclient renames the content-encoding header;,
tornado/,1753,curl_httpclient doesn't.,
tornado/,1767,The streaming responses in StaticFileHandler have subtle,
tornado/,1768,interactions with the gzip output so test this case separately.,
tornado/,1787,Regression test for https://github.com/tornadoweb/tornado/issues/1670,
tornado/,1830,"Python 3.5 sends 'baz="""";'; older versions use 'baz=;'",
tornado/,1870,HTTPErrors are logged as warnings with no stack trace.,
tornado/,1871,TODO: extend ExpectLog to test this more precisely,
tornado/,1877,Unknown errors are logged as errors with a stack trace.,
tornado/,1883,"log_exception can override logging behavior, and write_error",
tornado/,1884,can override the response.,
tornado/,1899,Something gets logged even though the application's,
tornado/,1900,logger is broken.,
tornado/,1939,TODO: fix template loader caching so this isn't necessary.,
tornado/,1984,Ensure that current_user can be assigned to normally for apps,
tornado/,1985,that want to forgo the lazy get_current_user property,
tornado/,2041,"If RequestHandler.get_template_namespace is called, then",
tornado/,2042,"get_current_user is evaluated. Until #820 is fixed, this",
tornado/,2043,is a small hack to circumvent the issue.,
tornado/,2065,TODO: Make this test pass. See #820.,
tornado/,2098,"Even though this method exists, it won't get called automatically",
tornado/,2099,because it is not in SUPPORTED_METHODS.,
tornado/,2103,PATCH is recently standardized; Tornado supports it by default,
tornado/,2104,but wsgiref.validate doesn't like it.,
tornado/,2119,type: ignore,
tornado/,2134,type: ignore,
tornado/,2159,It's difficult to assert for certain that a method did not,
tornado/,2160,"or will not be called in an asynchronous context, but this",
tornado/,2161,will be logged noisily if it is reached.,
tornado/,2171,If there are no handlers at all a default redirect handler gets added.,
tornado/,2219,All three are equivalent.,
tornado/,2255,"If we finish the response in prepare, it won't continue to",
tornado/,2256,the (non-existent) data_received.,
tornado/,2275,Use a raw connection so we can control the sending of data.,
tornado/,2287,type: Future[None],
tornado/,2288,type: Future[bytes],
tornado/,2289,type: Future[None],
tornado/,2294,Ensure the first chunk is received before we send the second.,
tornado/,2304,This would ideally use an HTTP1Connection to read the response.,
tornado/,2323,type: Future[None],
tornado/,2329,Each method in this handler returns a yieldable object and yields to the,
tornado/,2330,IOLoop so the future is not immediately ready.  Ensure that the,
tornado/,2331,yieldables are respected and no method is called before the previous,
tornado/,2332,one has completed.,
tornado/,2338,type: typing.List[str],
tornado/,2353,"Note that asynchronous prepare() does not block data_received,",
tornado/,2354,so we don't use in_method here.,
tornado/,2367,Use a small chunk size so flow control is relevant even though,
tornado/,2368,all the data arrives at once.,
tornado/,2372,simple_httpclient only: curl doesn't support body_producer.,
tornado/,2375,"Test all the slightly different code paths for fixed, chunked, etc bodies.",
tornado/,2474,Manually set a content-length that doesn't match the actual content.,
tornado/,2496,"When the content-length is too high, the connection is simply",
tornado/,2497,closed without completing the response.  An error is logged on,
tornado/,2498,the server.,
tornado/,2512,"When the content-length is too low, the connection is closed",
tornado/,2513,"without writing the last chunk, so the client never sees the request",
tornado/,2514,complete (which would be a framing error).,
tornado/,2532,Simulate a connection closed by the client during,
tornado/,2533,"request processing.  The client will see an error, but the",
tornado/,2534,server should respond gracefully (without logging errors,
tornado/,2535,because we were unable to write out as many bytes as,
tornado/,2536,Content-Length said we would),
tornado/,2537,type: ignore,
tornado/,2540,TODO: add a HTTP2-compatible version of this test.,
tornado/,2544,type: ignore,
tornado/,2600,"Try decoding each string with the other's ""name""",
tornado/,2624,These cookies are variants of the one in test_known_values.,
tornado/,2633,Change key version,
tornado/,2635,length mismatch (field too short),
tornado/,2637,length mismatch (field too long),
tornado/,2651,All zeros,
tornado/,2653,Change one character,
tornado/,2657,Change another character,
tornado/,2661,Truncate,
tornado/,2665,Lengthen,
tornado/,2725,"This would be a bad idea in a real app, but in this test",
tornado/,2726,it's fine.,
tornado/,2839,type: ignore,
tornado/,2846,Every request gets a distinct token.,
tornado/,2855,Each token can be used to authenticate its own request.,
tornado/,2864,Sending one in the cookie and the other in the body is not allowed.,
tornado/,2881,A user's token is stable over time.  Refreshing the page in one tab,
tornado/,2882,might update the cookie while an older tab still has the old cookie,
tornado/,2883,in its DOM.  Simulate this scenario by passing a constant token,
tornado/,2884,in the body and re-querying for the token.,
tornado/,2887,Tokens are encoded uniquely each time,
tornado/,2899,Version 1 still produces distinct tokens per request.,
tornado/,2902,Refreshed v1 tokens are all identical.,
tornado/,2907,Upgrade to a v2 version of the same token,
tornado/,2910,Each v1 token can map to many v2 tokens.,
tornado/,2913,The tokens are cross-compatible.,
tornado/,3070,"remote_ip is optional, although it's set by",
tornado/,3071,both HTTPServer and WSGIAdapter.,
tornado/,3072,Clobber it to make sure it doesn't break logging.,
tornado/,3103,URLSpecs are non-reversible if they include non-constant,
tornado/,3104,"regex features outside capturing groups. Currently, this is",
tornado/,3105,only strictly enforced for backslash-escaped character,
tornado/,3106,classes.,
tornado/,3109,A URLSpec can still be created even if it cannot be reversed.,
tornado/,1,flake8: noqa,
tornado/,2,Dummy source file to allow creation of the initial .po file in the,
tornado/,3,same way as a real project.  I'm not entirely sure about the real,
tornado/,4,"workflow here, but this seems to work.",
tornado/,5,,
tornado/,6,"1) xgettext --language=Python --keyword=_:1,2 --keyword=pgettext:1c,2 --keyword=pgettext:1c,2,3 extract_me.py -o tornado_test.po",
tornado/,7,"2) Edit tornado_test.po, setting CHARSET, Plural-Forms and setting msgstr",
tornado/,8,3) msgfmt tornado_test.po -o tornado_test.mo,
tornado/,9,4) Put the file in the proper location: $LANG/LC_MESSAGES,
tornado/docs/conf.py,1,Ensure we get the local copy of tornado instead of what's on the standard path,
tornado/docs/conf.py,31,Without this line sphinx includes a copy of object.__init__'s docstring,
tornado/docs/conf.py,32,on any class that doesn't define __init__.,
tornado/docs/conf.py,33,https://bitbucket.org/birkenfeld/sphinx/issue/1337/autoclass_content-both-uses-object__init__,
tornado/docs/conf.py,43,I wish this could go in a per-module file...,
tornado/docs/conf.py,45,tornado.gen,
tornado/docs/conf.py,47,tornado.web,
tornado/docs/conf.py,53,tornado.websocket,
tornado/docs/conf.py,60,various modules,
tornado/docs/conf.py,63,tornado.escape,
tornado/docs/conf.py,64,parse_qs_bytes should probably be documented but it's complicated by,
tornado/docs/conf.py,65,having different implementations between py2 and py3.,
tornado/docs/conf.py,67,tornado.gen,
tornado/docs/conf.py,88,"On RTD we can't import sphinx_rtd_theme, but it will be applied by",
tornado/docs/conf.py,89,default anyway.  This block will use the same theme when building locally,
tornado/docs/conf.py,90,as on RTD.,
tornado/maint/circlerefs/circlerefs.py,1,!/usr/bin/env python,
tornado/maint/circlerefs/circlerefs.py,95,"Do a little work. Alternately, could leave this script running and",
tornado/maint/circlerefs/circlerefs.py,96,poke at it with a browser.,
tornado/maint/circlerefs/circlerefs.py,101,Now report on the results.,
tornado/maint/test/redbot/red_test.py,1,!/usr/bin/env python,
tornado/maint/test/redbot/red_test.py,65,"We can't set a non-heuristic freshness at the framework level,",
tornado/maint/test/redbot/red_test.py,66,so just ignore this warning,
tornado/maint/test/redbot/red_test.py,68,For our small test responses the Content-Encoding header,
tornado/maint/test/redbot/red_test.py,69,wipes out any gains from compression,
tornado/maint/test/redbot/red_test.py,134,TODO: 304 responses SHOULD return the same etag that a full,
tornado/maint/test/redbot/red_test.py,135,"response would.  We currently do for If-None-Match, but not",
tornado/maint/test/redbot/red_test.py,136,for If-Modified-Since (because IMS does not otherwise,
tornado/maint/test/redbot/red_test.py,137,require us to read the file from disk),
tornado/maint/test/redbot/red_test.py,156,Without an explicit Content-Length redbot will try to send the,
tornado/maint/test/redbot/red_test.py,157,request chunked.,
tornado/maint/test/redbot/red_test.py,252,TODO: The Etag is supposed to change when Content-Encoding is,
tornado/maint/test/redbot/red_test.py,253,"used.  This should be fixed, but it's difficult to do with the",
tornado/maint/test/redbot/red_test.py,254,"way GZipContentEncoding fits into the pipeline, and in practice",
tornado/maint/test/redbot/red_test.py,255,it doesn't seem likely to cause any problems as long as we're,
tornado/maint/test/redbot/red_test.py,256,using the correct Vary header.,
tornado/maint/test/mypy/bad.py,5,Deliberate type error,
tornado/maint/vm/windows/bootstrap.py,1,!/usr/bin/env python,
tornado/maint/vm/windows/bootstrap.py,64,http://blog.jaraco.com/2012/01/how-i-install-python-on-windows.html,
tornado/maint/vm/windows/bootstrap.py,74,cygwin's setup.exe doesn't like being run from a script (looks,
tornado/maint/vm/windows/bootstrap.py,75,"UAC-related).  If it did, something like this might install it.",
tornado/maint/vm/windows/bootstrap.py,76,"(install python, python-setuptools, python3, and easy_install",
tornado/maint/vm/windows/bootstrap.py,77,unittest2 (cygwin's python 2 is 2.6)),
tornado/maint/vm/windows/bootstrap.py,78,filename = download_to_cache('http://cygwin.com/setup.exe'),
tornado/maint/vm/windows/bootstrap.py,79,"CYGTMPDIR = os.path.join(TMPDIR, 'cygwin')",
tornado/maint/vm/windows/bootstrap.py,80,if not os.path.exists(CYGTMPDIR):,
tornado/maint/vm/windows/bootstrap.py,81,os.mkdir(CYGTMPDIR),
tornado/maint/vm/windows/bootstrap.py,82,http://www.jbmurphy.com/2011/06/16/powershell-script-to-install-cygwin/,
tornado/maint/vm/windows/bootstrap.py,83,"CYGWIN_ARGS = [filename, '-q', '-l', CYGTMPDIR,",
tornado/maint/vm/windows/bootstrap.py,84,"'-s', 'http://mirror.nyi.net/cygwin/', '-R', r'c:\cygwin']",
tornado/maint/vm/windows/bootstrap.py,85,subprocess.check_call(CYGWIN_ARGS),
tornado/maint/scripts/run_fixers.py,1,!/usr/bin/env python,
tornado/maint/scripts/run_fixers.py,2,Usage is like 2to3:,
tornado/maint/scripts/run_fixers.py,3,$ maint/scripts/run_fixers.py -wn --no-diffs tornado,
tornado/maint/scripts/download_wheels.py,1,!/usr/bin/env python3,
tornado/maint/scripts/test_resolvers.py,1,!/usr/bin/env python,
tornado/maint/scripts/custom_fixers/fix_future_imports.py,9,copied from fix_tuple_params.py,
tornado/maint/scripts/custom_fixers/fix_future_imports.py,39,Empty files (usually __init__.py) show up as a single Leaf,
tornado/maint/scripts/custom_fixers/fix_future_imports.py,40,"instead of a Node, so leave them alone",
tornado/maint/scripts/custom_fixers/fix_future_imports.py,44,Skip a line and add the import after the docstring,
tornado/maint/scripts/custom_fixers/fix_future_imports.py,48,"No docstring, but an initial comment (perhaps a #! line).",
tornado/maint/scripts/custom_fixers/fix_future_imports.py,49,Transfer the initial comment to a new blank line.,
tornado/maint/scripts/custom_fixers/fix_future_imports.py,56,"No comments or docstring, just insert at the start",
tornado/maint/scripts/custom_fixers/fix_future_imports.py,59,terminates the import stmt,
tornado/maint/benchmark/gen_benchmark.py,1,!/usr/bin/env python,
tornado/maint/benchmark/gen_benchmark.py,2,,
tornado/maint/benchmark/gen_benchmark.py,3,A simple benchmark of the tornado.gen module.,
tornado/maint/benchmark/gen_benchmark.py,4,"Runs in two modes, testing new-style (@coroutine and Futures)",
tornado/maint/benchmark/gen_benchmark.py,5,and old-style (@engine and Tasks) coroutines.,
tornado/maint/benchmark/gen_benchmark.py,14,These benchmarks are delicate.  They hit various fast-paths in the gen,
tornado/maint/benchmark/gen_benchmark.py,15,machinery in order to stay synchronous so we don't need an IOLoop.,
tornado/maint/benchmark/gen_benchmark.py,16,"This removes noise from the results, but it's easy to change things",
tornado/maint/benchmark/gen_benchmark.py,17,in a way that completely invalidates the results.,
tornado/maint/benchmark/template_benchmark.py,1,!/usr/bin/env python,
tornado/maint/benchmark/template_benchmark.py,2,,
tornado/maint/benchmark/template_benchmark.py,3,"A simple benchmark of tornado template rendering, based on",
tornado/maint/benchmark/template_benchmark.py,4,https://github.com/mitsuhiko/jinja2/blob/master/examples/bench.py,
tornado/maint/benchmark/chunk_benchmark.py,1,!/usr/bin/env python,
tornado/maint/benchmark/chunk_benchmark.py,2,,
tornado/maint/benchmark/chunk_benchmark.py,3,Downloads a large file in chunked encoding with both curl and simple clients,
tornado/maint/benchmark/benchmark.py,1,!/usr/bin/env python,
tornado/maint/benchmark/benchmark.py,2,,
tornado/maint/benchmark/benchmark.py,3,A simple benchmark of tornado's HTTP stack.,
tornado/maint/benchmark/benchmark.py,4,Requires 'ab' to be installed.,
tornado/maint/benchmark/benchmark.py,5,,
tornado/maint/benchmark/benchmark.py,6,Running without profiling:,
tornado/maint/benchmark/benchmark.py,7,demos/benchmark/benchmark.py,
tornado/maint/benchmark/benchmark.py,8,"demos/benchmark/benchmark.py --quiet --num_runs=5|grep ""Requests per second""",
tornado/maint/benchmark/benchmark.py,9,,
tornado/maint/benchmark/benchmark.py,10,Running with profiling:,
tornado/maint/benchmark/benchmark.py,11,,
tornado/maint/benchmark/benchmark.py,12,python -m cProfile -o /tmp/prof demos/benchmark/benchmark.py,
tornado/maint/benchmark/benchmark.py,13,python -m pstats /tmp/prof,
tornado/maint/benchmark/benchmark.py,14,% sort time,
tornado/maint/benchmark/benchmark.py,15,% stats 20,
tornado/maint/benchmark/benchmark.py,30,choose a random port to avoid colliding with TIME_WAIT sockets left over,
tornado/maint/benchmark/benchmark.py,31,from previous runs.,
tornado/maint/benchmark/benchmark.py,35,Increasing --n without --keepalive will eventually run into problems,
tornado/maint/benchmark/benchmark.py,36,due to TIME_WAIT sockets,
tornado/maint/benchmark/benchmark.py,42,Repeat the entire benchmark this many times (on different ports),
tornado/maint/benchmark/benchmark.py,43,"This gives JITs time to warm up, etc.  Pypy needs 3-5 runs at",
tornado/maint/benchmark/benchmark.py,44,--n=15000 for its JIT to reach full effectiveness,
tornado/maint/benchmark/benchmark.py,82,just stops the progress messages printed to stderr,
tornado/maint/benchmark/parsing_benchmark.py,1,!/usr/bin/env python,
tornado/demos/facebook/facebook.py,1,!/usr/bin/env python3,
tornado/demos/facebook/facebook.py,2,,
tornado/demos/facebook/facebook.py,3,Copyright 2009 Facebook,
tornado/demos/facebook/facebook.py,4,,
tornado/demos/facebook/facebook.py,5,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/demos/facebook/facebook.py,6,not use this file except in compliance with the License. You may obtain,
tornado/demos/facebook/facebook.py,7,a copy of the License at,
tornado/demos/facebook/facebook.py,8,,
tornado/demos/facebook/facebook.py,9,http://www.apache.org/licenses/LICENSE-2.0,
tornado/demos/facebook/facebook.py,10,,
tornado/demos/facebook/facebook.py,11,"Unless required by applicable law or agreed to in writing, software",
tornado/demos/facebook/facebook.py,12,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/demos/facebook/facebook.py,13,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/demos/facebook/facebook.py,14,License for the specific language governing permissions and limitations,
tornado/demos/facebook/facebook.py,15,under the License.,
tornado/demos/facebook/facebook.py,69,Session may have expired,
tornado/demos/websocket/chatdemo.py,1,!/usr/bin/env python,
tornado/demos/websocket/chatdemo.py,2,,
tornado/demos/websocket/chatdemo.py,3,Copyright 2009 Facebook,
tornado/demos/websocket/chatdemo.py,4,,
tornado/demos/websocket/chatdemo.py,5,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/demos/websocket/chatdemo.py,6,not use this file except in compliance with the License. You may obtain,
tornado/demos/websocket/chatdemo.py,7,a copy of the License at,
tornado/demos/websocket/chatdemo.py,8,,
tornado/demos/websocket/chatdemo.py,9,http://www.apache.org/licenses/LICENSE-2.0,
tornado/demos/websocket/chatdemo.py,10,,
tornado/demos/websocket/chatdemo.py,11,"Unless required by applicable law or agreed to in writing, software",
tornado/demos/websocket/chatdemo.py,12,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/demos/websocket/chatdemo.py,13,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/demos/websocket/chatdemo.py,14,License for the specific language governing permissions and limitations,
tornado/demos/websocket/chatdemo.py,15,under the License.,
tornado/demos/websocket/chatdemo.py,58,Non-None enables compression with default options.,
tornado/demos/helloworld/helloworld.py,1,!/usr/bin/env python,
tornado/demos/helloworld/helloworld.py,2,,
tornado/demos/helloworld/helloworld.py,3,Copyright 2009 Facebook,
tornado/demos/helloworld/helloworld.py,4,,
tornado/demos/helloworld/helloworld.py,5,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/demos/helloworld/helloworld.py,6,not use this file except in compliance with the License. You may obtain,
tornado/demos/helloworld/helloworld.py,7,a copy of the License at,
tornado/demos/helloworld/helloworld.py,8,,
tornado/demos/helloworld/helloworld.py,9,http://www.apache.org/licenses/LICENSE-2.0,
tornado/demos/helloworld/helloworld.py,10,,
tornado/demos/helloworld/helloworld.py,11,"Unless required by applicable law or agreed to in writing, software",
tornado/demos/helloworld/helloworld.py,12,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/demos/helloworld/helloworld.py,13,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/demos/helloworld/helloworld.py,14,License for the specific language governing permissions and limitations,
tornado/demos/helloworld/helloworld.py,15,under the License.,
tornado/demos/s3server/s3server.py,1,,
tornado/demos/s3server/s3server.py,2,Copyright 2009 Facebook,
tornado/demos/s3server/s3server.py,3,,
tornado/demos/s3server/s3server.py,4,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/demos/s3server/s3server.py,5,not use this file except in compliance with the License. You may obtain,
tornado/demos/s3server/s3server.py,6,a copy of the License at,
tornado/demos/s3server/s3server.py,7,,
tornado/demos/s3server/s3server.py,8,http://www.apache.org/licenses/LICENSE-2.0,
tornado/demos/s3server/s3server.py,9,,
tornado/demos/s3server/s3server.py,10,"Unless required by applicable law or agreed to in writing, software",
tornado/demos/s3server/s3server.py,11,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/demos/s3server/s3server.py,12,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/demos/s3server/s3server.py,13,License for the specific language governing permissions and limitations,
tornado/demos/s3server/s3server.py,14,under the License.,
tornado/demos/blog/blog.py,1,!/usr/bin/env python3,
tornado/demos/blog/blog.py,2,,
tornado/demos/blog/blog.py,3,Copyright 2009 Facebook,
tornado/demos/blog/blog.py,4,,
tornado/demos/blog/blog.py,5,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/demos/blog/blog.py,6,not use this file except in compliance with the License. You may obtain,
tornado/demos/blog/blog.py,7,a copy of the License at,
tornado/demos/blog/blog.py,8,,
tornado/demos/blog/blog.py,9,http://www.apache.org/licenses/LICENSE-2.0,
tornado/demos/blog/blog.py,10,,
tornado/demos/blog/blog.py,11,"Unless required by applicable law or agreed to in writing, software",
tornado/demos/blog/blog.py,12,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/demos/blog/blog.py,13,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/demos/blog/blog.py,14,License for the specific language governing permissions and limitations,
tornado/demos/blog/blog.py,15,under the License.,
tornado/demos/blog/blog.py,128,"get_current_user cannot be a coroutine, so set",
tornado/demos/blog/blog.py,129,self.current_user in prepare instead.,
tornado/demos/blog/blog.py,255,"If there are no authors, redirect to the account creation page.",
tornado/demos/blog/blog.py,296,Create the global connection pool.,
tornado/demos/blog/blog.py,308,In this demo the server will simply run until interrupted,
tornado/demos/blog/blog.py,309,"with Ctrl-C, but if you want to shut down more gracefully,",
tornado/demos/blog/blog.py,310,call shutdown_event.set().,
tornado/demos/twitter/twitterdemo.py,1,!/usr/bin/env python,
tornado/demos/twitter/twitterdemo.py,40,The following settings should probably be defined in secrets.cfg,
tornado/demos/tcpecho/server.py,1,!/usr/bin/env python,
tornado/demos/tcpecho/client.py,1,!/usr/bin/env python,
tornado/demos/webspider/webspider.py,1,!/usr/bin/env python3,
tornado/demos/webspider/webspider.py,65,Only follow links beneath the base URL,
tornado/demos/webspider/webspider.py,83,"Start workers, then wait for the work queue to be empty.",
tornado/demos/webspider/webspider.py,90,Signal all the workers to exit.,
tornado/demos/file_upload/file_uploader.py,1,!/usr/bin/env python,
tornado/demos/file_upload/file_uploader.py,21,Python 2.,
tornado/demos/file_upload/file_uploader.py,28,"Using HTTP POST, upload one or more files in a single multipart-form-encoded",
tornado/demos/file_upload/file_uploader.py,29,request.,
tornado/demos/file_upload/file_uploader.py,49,16k at a time.,
tornado/demos/file_upload/file_uploader.py,60,"Using HTTP PUT, upload one raw file. This is preferred for large files since",
tornado/demos/file_upload/file_uploader.py,61,the server can stream the data instead of buffering it entirely in memory.,
tornado/demos/file_upload/file_uploader.py,82,16K at a time.,
tornado/demos/file_upload/file_uploader.py,85,Complete.,
tornado/demos/file_upload/file_uploader.py,111,Tornado configures logging from command line opts and returns remaining args.,
tornado/demos/file_upload/file_receiver.py,1,!/usr/bin/env python,
tornado/demos/file_upload/file_receiver.py,16,Python 2.,
tornado/demos/file_upload/file_receiver.py,57,Tornado configures logging.,
tornado/demos/chat/chatdemo.py,1,!/usr/bin/env python3,
tornado/demos/chat/chatdemo.py,2,,
tornado/demos/chat/chatdemo.py,3,Copyright 2009 Facebook,
tornado/demos/chat/chatdemo.py,4,,
tornado/demos/chat/chatdemo.py,5,"Licensed under the Apache License, Version 2.0 (the ""License""); you may",
tornado/demos/chat/chatdemo.py,6,not use this file except in compliance with the License. You may obtain,
tornado/demos/chat/chatdemo.py,7,a copy of the License at,
tornado/demos/chat/chatdemo.py,8,,
tornado/demos/chat/chatdemo.py,9,http://www.apache.org/licenses/LICENSE-2.0,
tornado/demos/chat/chatdemo.py,10,,
tornado/demos/chat/chatdemo.py,11,"Unless required by applicable law or agreed to in writing, software",
tornado/demos/chat/chatdemo.py,12,"distributed under the License is distributed on an ""AS IS"" BASIS, WITHOUT",
tornado/demos/chat/chatdemo.py,13,"WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
tornado/demos/chat/chatdemo.py,14,License for the specific language governing permissions and limitations,
tornado/demos/chat/chatdemo.py,15,under the License.,
tornado/demos/chat/chatdemo.py,33,cond is notified whenever the message cache is updated,
tornado/demos/chat/chatdemo.py,58,Making this a non-singleton is left as an exercise for the reader.,
tornado/demos/chat/chatdemo.py,72,"render_string() returns a byte string, which is not supported",
tornado/demos/chat/chatdemo.py,73,"in json, so we must convert it to a character string.",
tornado/demos/chat/chatdemo.py,94,Save the Future returned here so we can cancel it in,
tornado/demos/chat/chatdemo.py,95,on_connection_close.,
