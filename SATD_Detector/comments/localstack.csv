file path,line #,comment,satd
localstack/setup.py,1,!/usr/bin/env python,
localstack/setup.py,6,marker for extended/ignored and basic libs in requirements.txt,
localstack/setup.py,10,parameter variables,
localstack/setup.py,17,determine version,
localstack/setup.py,23,determine requirements,
localstack/setup.py,30,include only basic requirements here,
localstack/setup.py,38,"copy requirements file, to make it available inside the package at runtime",
localstack/tests/integration/test_error_injection.py,28,"by default, no errors",
localstack/tests/integration/test_error_injection.py,32,"with a probability of 1, always throw errors",
localstack/tests/integration/test_error_injection.py,37,reset probability to zero,
localstack/tests/integration/test_error_injection.py,46,create table with stream forwarding config,
localstack/tests/integration/test_error_injection.py,50,"by default, no errors",
localstack/tests/integration/test_error_injection.py,54,"with a probability of 1, always throw errors",
localstack/tests/integration/test_error_injection.py,58,reset probability to zero,
localstack/tests/integration/test_error_injection.py,63,Only run the tests if the $TEST_ERROR_INJECTION environment variable is set. This is to reduce the,
localstack/tests/integration/test_error_injection.py,64,"testing time, because the injected errors result in retries and timeouts that slow down the tests overall.",
localstack/tests/integration/test_logs.py,1,-*- coding: utf-8 -*-,
localstack/tests/integration/test_logs.py,24,send message with non-ASCII (multi-byte) chars,
localstack/tests/integration/test_logs.py,36,clean up,
localstack/tests/integration/test_logs.py,61,clean up,
localstack/tests/integration/test_logs.py,82,clean up,
localstack/tests/integration/test_sqs.py,55,"Since this API call is not implemented in ElasticMQ, we're",
localstack/tests/integration/test_sqs.py,56,mocking it and letting it return an empty response,
localstack/tests/integration/test_sqs.py,61,"Apparently, if there are no tags, then `Tags` should NOT appear in the response.",
localstack/tests/integration/test_sqs.py,64,clean up,
localstack/tests/integration/test_sqs.py,73,publish/receive message,
localstack/tests/integration/test_sqs.py,80,delete/receive message,
localstack/tests/integration/test_sqs.py,85,publish/receive message with change_message_visibility,
localstack/tests/integration/test_sqs.py,97,clean up,
localstack/tests/integration/test_sqs.py,157,publish/receive message with change_message_visibility,
localstack/tests/integration/test_sqs.py,180,clean up,
localstack/tests/integration/test_sqs.py,188,it should preserve .fifo in the queue name,
localstack/tests/integration/test_sqs.py,191,clean up,
localstack/tests/integration/test_sqs.py,209,clean up,
localstack/tests/integration/test_sqs.py,226,clean up,
localstack/tests/integration/test_sqs.py,235,String Attributes must not contain non-printable characters,
localstack/tests/integration/test_sqs.py,236,See: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_SendMessage.html,
localstack/tests/integration/test_sqs.py,243,clean up,
localstack/tests/integration/test_sqs.py,256,clean up,
localstack/tests/integration/test_sqs.py,263,create SQS queue with DLQ redrive policy,
localstack/tests/integration/test_sqs.py,273,create Lambda and add source mapping,
localstack/tests/integration/test_sqs.py,279,"add message to SQS, which will trigger the Lambda, resulting in an error",
localstack/tests/integration/test_sqs.py,285,assert that message has been received on the DLQ,
localstack/tests/integration/test_sqs.py,300,"Unsupported by ElasticMq, should be saved in memory",
localstack/tests/integration/test_sqs.py,308,assertion,
localstack/tests/integration/test_sqs.py,312,cleanup,
localstack/tests/integration/test_sqs.py,343,assertion,
localstack/tests/integration/test_sqs.py,352,cleanup,
localstack/tests/integration/test_sqs.py,373,cleanup,
localstack/tests/integration/test_sqs.py,396,clean up,
localstack/tests/integration/test_sqs.py,434,clean up,
localstack/tests/integration/test_sqs.py,442,send message with DelaySeconds = 0,
localstack/tests/integration/test_sqs.py,460,send message with DelaySeconds = 10,
localstack/tests/integration/test_sqs.py,479,clean up,
localstack/tests/integration/test_sqs.py,502,clean up,
localstack/tests/integration/test_sqs.py,536,There is no log group for this lambda (lambda not invoked yet),
localstack/tests/integration/test_sqs.py,544,"After delay time, lambda invoked by sqs",
localstack/tests/integration/test_sqs.py,546,Lambda just invoked 1 time,
localstack/tests/integration/test_sqs.py,553,clean up,
localstack/tests/integration/test_dynamodb.py,1,-*- coding: utf-8 -*-,
localstack/tests/integration/test_dynamodb.py,37,write some items containing non-ASCII characters,
localstack/tests/integration/test_dynamodb.py,49,need to fix up the JSON and convert str to unicode for Python 2,
localstack/tests/integration/test_dynamodb.py,54,clean up,
localstack/tests/integration/test_dynamodb.py,61,Create a large amount of items,
localstack/tests/integration/test_dynamodb.py,67,Retrieve the items. The data will be transmitted to the client with chunked transfer encoding,
localstack/tests/integration/test_dynamodb.py,71,clean up,
localstack/tests/integration/test_dynamodb.py,78,Insert some items to the table,
localstack/tests/integration/test_dynamodb.py,87,Describe TTL when still unset.,
localstack/tests/integration/test_dynamodb.py,92,Enable TTL for given table,
localstack/tests/integration/test_dynamodb.py,97,Describe TTL status after being enabled.,
localstack/tests/integration/test_dynamodb.py,102,Disable TTL for given table,
localstack/tests/integration/test_dynamodb.py,107,Describe TTL status after being disabled.,
localstack/tests/integration/test_dynamodb.py,112,Enable TTL for given table again,
localstack/tests/integration/test_dynamodb.py,117,Describe TTL status after being enabled again.,
localstack/tests/integration/test_dynamodb.py,122,clean up,
localstack/tests/integration/test_dynamodb.py,200,clean up,
localstack/tests/integration/test_sns.py,1,-*- coding: utf-8 -*-,
localstack/tests/integration/test_sns.py,48,connect the SNS topic to the SQS queue,
localstack/tests/integration/test_sns.py,52,"publish message to SNS, receive it from SQS, assert that messages are equal",
localstack/tests/integration/test_sns.py,62,create HTTP endpoint and connect it to SNS topic,
localstack/tests/integration/test_sns.py,92,create SNS topic and connect it to an SQS queue,
localstack/tests/integration/test_sns.py,101,fetch subscription information,
localstack/tests/integration/test_sns.py,111,assert the attributes are well set,
localstack/tests/integration/test_sns.py,114,"publish message to SNS, receive it from SQS, assert that messages are equal and that they are Raw",
localstack/tests/integration/test_sns.py,123,connect SNS topic to an SQS queue,
localstack/tests/integration/test_sns.py,135,get number of messages,
localstack/tests/integration/test_sns.py,138,"publish message that satisfies the filter policy, assert that message is received",
localstack/tests/integration/test_sns.py,145,"publish message that does not satisfy the filter policy, assert that message is not received",
localstack/tests/integration/test_sns.py,164,"publish message that satisfies the filter policy, assert that message is received",
localstack/tests/integration/test_sns.py,215,test for duplicate tags,
localstack/tests/integration/test_sns.py,300,create HTTP endpoint and connect it to SNS topic,
localstack/tests/integration/test_sns.py,393,Publish without subject,
localstack/tests/integration/test_sns.py,401,Publish with empty subject,
localstack/tests/integration/test_sns.py,412,clean up,
localstack/tests/integration/test_sns.py,447,Lambda invoked 1 time,
localstack/tests/integration/test_sns.py,460,Lambda invoked 1 more time,
localstack/tests/integration/test_sns.py,467,clean up,
localstack/tests/integration/test_s3.py,55,create test bucket,
localstack/tests/integration/test_s3.py,58,put bucket policy,
localstack/tests/integration/test_s3.py,76,retrieve and check policy config,
localstack/tests/integration/test_s3.py,88,put an object where the bucket_name is in the path,
localstack/tests/integration/test_s3.py,91,put an object where the bucket_name is in the host,
localstack/tests/integration/test_s3.py,92,it doesn't care about the authorization header as long as it's present,
localstack/tests/integration/test_s3.py,95,verify=False must be set as this test fails on travis because of an SSL error non-existent locally,
localstack/tests/integration/test_s3.py,107,clean up,
localstack/tests/integration/test_s3.py,117,has to be larger than 64MB to be broken up into a multipart upload,
localstack/tests/integration/test_s3.py,127,ensure that the first message's eventName is ObjectCreated:CompleteMultipartUpload,
localstack/tests/integration/test_s3.py,132,"download the file, check file size",
localstack/tests/integration/test_s3.py,137,clean up,
localstack/tests/integration/test_s3.py,141,clean up large files,
localstack/tests/integration/test_s3.py,147,"In a multipart upload ""Each part must be at least 5 MB in size, except the last part.""",
localstack/tests/integration/test_s3.py,148,https://docs.aws.amazon.com/AmazonS3/latest/API/mpUploadComplete.html,
localstack/tests/integration/test_s3.py,154,perform upload,
localstack/tests/integration/test_s3.py,159,clean up,
localstack/tests/integration/test_s3.py,175,perform uploads (multipart and regular) and check ACLs,
localstack/tests/integration/test_s3.py,192,clean up,
localstack/tests/integration/test_s3.py,197,When no content type is provided by a PUT request,
localstack/tests/integration/test_s3.py,198,'binary/octet-stream' should be used,
localstack/tests/integration/test_s3.py,199,src: https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html,
localstack/tests/integration/test_s3.py,204,put object,
localstack/tests/integration/test_s3.py,210,get object and assert headers,
localstack/tests/integration/test_s3.py,213,clean up,
localstack/tests/integration/test_s3.py,217,Object metadata should be passed as query params via presigned URL,
localstack/tests/integration/test_s3.py,218,https://github.com/localstack/localstack/issues/544,
localstack/tests/integration/test_s3.py,222,put object,
localstack/tests/integration/test_s3.py,226,"append metadata manually to URL (this is not easily possible with boto3, as ""Metadata"" cannot",
localstack/tests/integration/test_s3.py,227,"be passed to generate_presigned_url, and generate_presigned_post works differently)",
localstack/tests/integration/test_s3.py,230,get object and assert metadata is present,
localstack/tests/integration/test_s3.py,233,"response body should be empty, see https://github.com/localstack/localstack/issues/1317",
localstack/tests/integration/test_s3.py,238,clean up,
localstack/tests/integration/test_s3.py,242,Object metadata keys should accept keys with underscores,
localstack/tests/integration/test_s3.py,243,https://github.com/localstack/localstack/issues/1790,
localstack/tests/integration/test_s3.py,247,put object,
localstack/tests/integration/test_s3.py,254,clean up,
localstack/tests/integration/test_s3.py,258,Test for https://github.com/localstack/localstack/issues/1952,
localstack/tests/integration/test_s3.py,276,clean up,
localstack/tests/integration/test_s3.py,283,put object,
localstack/tests/integration/test_s3.py,294,get object and assert headers,
localstack/tests/integration/test_s3.py,298,get object using range query and assert headers,
localstack/tests/integration/test_s3.py,303,clean up,
localstack/tests/integration/test_s3.py,310,put object,
localstack/tests/integration/test_s3.py,316,get object and assert headers,
localstack/tests/integration/test_s3.py,319,clean up,
localstack/tests/integration/test_s3.py,323,Test for https://github.com/localstack/localstack/issues/1571,
localstack/tests/integration/test_s3.py,339,put object,
localstack/tests/integration/test_s3.py,343,get object and assert content length,
localstack/tests/integration/test_s3.py,348,clean up,
localstack/tests/integration/test_s3.py,355,get presigned URL,
localstack/tests/integration/test_s3.py,360,put object,
localstack/tests/integration/test_s3.py,363,get object and compare results,
localstack/tests/integration/test_s3.py,367,clean up,
localstack/tests/integration/test_s3.py,374,get presigned URL,
localstack/tests/integration/test_s3.py,380,put object,
localstack/tests/integration/test_s3.py,384,get object and compare results,
localstack/tests/integration/test_s3.py,388,clean up,
localstack/tests/integration/test_s3.py,395,put object,
localstack/tests/integration/test_s3.py,405,get object and assert headers,
localstack/tests/integration/test_s3.py,409,clean up,
localstack/tests/integration/test_s3.py,417,get object and assert response,
localstack/tests/integration/test_s3.py,421,delete object tagging,
localstack/tests/integration/test_s3.py,423,assert that the object still exists,
localstack/tests/integration/test_s3.py,426,clean up,
localstack/tests/integration/test_s3.py,438,clean up,
localstack/tests/integration/test_s3.py,442,Test setup,
localstack/tests/integration/test_s3.py,458,Cleanup,
localstack/tests/integration/test_s3.py,462,bucket name should be case-insensitive,
localstack/tests/integration/test_s3.py,466,key name should be case-sensitive,
localstack/tests/integration/test_s3.py,476,put object and CORS configuration,
localstack/tests/integration/test_s3.py,491,get object and assert headers,
localstack/tests/integration/test_s3.py,497,clean up,
localstack/tests/integration/test_s3.py,501,Signed requests may include certain header overrides in the querystring,
localstack/tests/integration/test_s3.py,502,https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html,
localstack/tests/integration/test_s3.py,507,put object,
localstack/tests/integration/test_s3.py,511,get object and assert headers,
localstack/tests/integration/test_s3.py,531,clean up,
localstack/tests/integration/test_s3.py,538,put object,
localstack/tests/integration/test_s3.py,542,copy object,
localstack/tests/integration/test_s3.py,548,Create copy object to try to match s3a setting Content-MD5,
localstack/tests/integration/test_s3.py,554,Set a Content-MD5 header that should be ignored on a copy request,
localstack/tests/integration/test_s3.py,558,Cleanup,
localstack/tests/integration/test_s3.py,565,put object with invalid content MD5,
localstack/tests/integration/test_s3.py,576,Cleanup,
localstack/tests/integration/test_s3.py,585,Write contents to memory rather than a file.,
localstack/tests/integration/test_s3.py,590,Upload gzip,
localstack/tests/integration/test_s3.py,594,Download gzip,
localstack/tests/integration/test_s3.py,611,upload file,
localstack/tests/integration/test_s3.py,616,fix object ACL - currently not directly support for multipart uploads,
localstack/tests/integration/test_s3.py,618,download object via API,
localstack/tests/integration/test_s3.py,621,download object directly from download link,
localstack/tests/integration/test_s3.py,630,check that the error document is returned when configured,
localstack/tests/integration/test_s3.py,644,cleanup,
localstack/tests/integration/test_s3.py,648,"check that normal responses are returned for bucket with index configuration, but not error document",
localstack/tests/integration/test_s3.py,660,cleanup,
localstack/tests/integration/test_s3.py,663,check that normal responses are returned for bucket without configuration,
localstack/tests/integration/test_s3.py,671,cleanup,
localstack/tests/integration/test_s3.py,684,put an object,
localstack/tests/integration/test_s3.py,698,clean up,
localstack/tests/integration/test_s3.py,715,put 2 objects,
localstack/tests/integration/test_s3.py,721,delete 1st object with version,
localstack/tests/integration/test_s3.py,734,clean up,
localstack/tests/integration/test_s3.py,763,clean up,
localstack/tests/integration/test_s3.py,778,clean up,
localstack/tests/integration/test_s3.py,802,clean up,
localstack/tests/integration/test_s3.py,805,---------------,
localstack/tests/integration/test_s3.py,806,HELPER METHODS,
localstack/tests/integration/test_s3.py,807,---------------,
localstack/tests/integration/test_s3.py,811,https://stackoverflow.com/questions/8816059/create-file-of-particular-size-in-python,
localstack/tests/integration/test_s3.py,856,Write contents to memory rather than a file.,
localstack/tests/integration/test_lambda.py,129,create DLQ and Lambda function,
localstack/tests/integration/test_lambda.py,138,"invoke Lambda, triggering an error",
localstack/tests/integration/test_lambda.py,145,assert that message has been received on the DLQ,
localstack/tests/integration/test_lambda.py,160,create lambda permission,
localstack/tests/integration/test_lambda.py,167,fetch lambda policy,
localstack/tests/integration/test_lambda.py,174,fetch IAM policy,
localstack/tests/integration/test_lambda.py,180,remove permission that we just added,
localstack/tests/integration/test_lambda.py,212,Update batch size with invalid value,
localstack/tests/integration/test_lambda.py,227,Create event source mapping with invalid batch size value,
localstack/tests/integration/test_lambda.py,245,clean up,
localstack/tests/integration/test_lambda.py,305,invoke function and assert result contains env vars,
localstack/tests/integration/test_lambda.py,312,get function config and assert result contains env vars,
localstack/tests/integration/test_lambda.py,317,clean up,
localstack/tests/integration/test_lambda.py,325,upload zip file to S3,
localstack/tests/integration/test_lambda.py,333,create lambda function,
localstack/tests/integration/test_lambda.py,346,invoke lambda function,
localstack/tests/integration/test_lambda.py,360,assert that logs are present,
localstack/tests/integration/test_lambda.py,363,"Note that during regular test execution, nosetests captures the output from",
localstack/tests/integration/test_lambda.py,364,the logging module - hence we can only expect this when running in Docker,
localstack/tests/integration/test_lambda.py,368,clean up,
localstack/tests/integration/test_lambda.py,376,upload zip file to S3,
localstack/tests/integration/test_lambda.py,384,create lambda function,
localstack/tests/integration/test_lambda.py,394,invoke lambda function,
localstack/tests/integration/test_lambda.py,405,clean up,
localstack/tests/integration/test_lambda.py,423,clean up,
localstack/tests/integration/test_lambda.py,435,invoke function and assert result,
localstack/tests/integration/test_lambda.py,444,always use the local runner,
localstack/tests/integration/test_lambda.py,474,clean up,
localstack/tests/integration/test_lambda.py,537,assert that logs are present,
localstack/tests/integration/test_lambda.py,541,clean up,
localstack/tests/integration/test_lambda.py,572,assert that logs are present,
localstack/tests/integration/test_lambda.py,577,clean up,
localstack/tests/integration/test_lambda.py,586,lambda .NET Core 2.0 is already a zip,
localstack/tests/integration/test_lambda.py,609,assert that logs are present,
localstack/tests/integration/test_lambda.py,613,clean up,
localstack/tests/integration/test_lambda.py,641,clean up,
localstack/tests/integration/test_lambda.py,650,deploy lambda - Java,
localstack/tests/integration/test_lambda.py,655,"Lambda supports single JAR deployments without the zip,",
localstack/tests/integration/test_lambda.py,656,so we upload the JAR directly.,
localstack/tests/integration/test_lambda.py,666,deploy lambda - Java with stream handler,
localstack/tests/integration/test_lambda.py,674,deploy lambda - Java with serializable input object,
localstack/tests/integration/test_lambda.py,684,clean up,
localstack/tests/integration/test_lambda.py,702,create ZIP file from JAR file,
localstack/tests/integration/test_lambda.py,722,clean up,
localstack/tests/integration/test_lambda.py,784,"run these tests only for the ""reuse containers"" Lambda executor",
localstack/tests/integration/test_lambda.py,793,make sure existing containers are gone,
localstack/tests/integration/test_lambda.py,797,deploy and invoke lambda without Docker,
localstack/tests/integration/test_lambda.py,805,invoke a few times.,
localstack/tests/integration/test_lambda.py,820,ensure the last invoke time is being updated properly.,
localstack/tests/integration/test_lambda.py,828,the first call would have created the container. subsequent calls would reuse and be faster.,
localstack/tests/integration/test_lambda.py,844,clean up,
localstack/tests/integration/test_lambda.py,848,"run these tests only for the ""separate containers"" Lambda executor",
localstack/tests/integration/test_lambda.py,873,"run these tests only for the ""reuse containers"" Lambda executor",
localstack/tests/integration/test_lambda.py,882,make sure existing containers are gone,
localstack/tests/integration/test_lambda.py,886,deploy and invoke lambda without Docker,
localstack/tests/integration/test_lambda.py,896,try to destroy idle containers.,
localstack/tests/integration/test_lambda.py,900,simulate an idle container,
localstack/tests/integration/test_lambda.py,905,clean up,
localstack/tests/integration/test_events.py,1,-*- coding: utf-8 -*-,
localstack/tests/integration/test_events.py,69,"insert two tags, verify both are visible",
localstack/tests/integration/test_events.py,74,"remove 'key2', verify only 'key1' remains",
localstack/tests/integration/test_events.py,112,clean up,
localstack/tests/integration/test_api_gateway.py,1,-*- coding: utf-8 -*-,
localstack/tests/integration/test_api_gateway.py,27,template used to transform incoming requests at the API Gateway (stream name to be filled in later),
localstack/tests/integration/test_api_gateway.py,47,endpoint paths,
localstack/tests/integration/test_api_gateway.py,56,name of Kinesis stream connected to API Gateway,
localstack/tests/integration/test_api_gateway.py,91,create target Kinesis stream,
localstack/tests/integration/test_api_gateway.py,94,create API Gateway and connect it to the target stream,
localstack/tests/integration/test_api_gateway.py,97,generate test data,
localstack/tests/integration/test_api_gateway.py,110,list Kinesis streams via API Gateway,
localstack/tests/integration/test_api_gateway.py,115,post test data to Kinesis via API Gateway,
localstack/tests/integration/test_api_gateway.py,121,clean up,
localstack/tests/integration/test_api_gateway.py,126,create target SQS stream,
localstack/tests/integration/test_api_gateway.py,129,create API Gateway and connect it to the target queue,
localstack/tests/integration/test_api_gateway.py,134,create event source for sqs lambda processor,
localstack/tests/integration/test_api_gateway.py,142,generate test data,
localstack/tests/integration/test_api_gateway.py,161,create target SQS stream,
localstack/tests/integration/test_api_gateway.py,164,create API Gateway and connect it to the target queue,
localstack/tests/integration/test_api_gateway.py,168,generate test data,
localstack/tests/integration/test_api_gateway.py,187,create target HTTP backend,
localstack/tests/integration/test_api_gateway.py,202,create API Gateway and connect it to the HTTP backend,
localstack/tests/integration/test_api_gateway.py,215,make sure CORS headers are present,
localstack/tests/integration/test_api_gateway.py,222,make test GET request to gateway,
localstack/tests/integration/test_api_gateway.py,227,make test POST request to gateway,
localstack/tests/integration/test_api_gateway.py,233,make test POST request with non-JSON content type,
localstack/tests/integration/test_api_gateway.py,243,clean up,
localstack/tests/integration/test_api_gateway.py,258,create API Gateway and connect it to the Lambda proxy backend,
localstack/tests/integration/test_api_gateway.py,270,make test request to gateway and check response,
localstack/tests/integration/test_api_gateway.py,303,send message with non-ASCII chars,
localstack/tests/integration/test_api_gateway.py,331,ignore boto3 stuff,
localstack/tests/integration/test_api_gateway.py,348,ignore boto3 stuff,
localstack/tests/integration/test_api_gateway.py,416,Try to get deleted integration,
localstack/tests/integration/test_api_gateway.py,427,clean up,
localstack/tests/integration/test_api_gateway.py,440,create API Gateway and connect it to the Lambda proxy backend,
localstack/tests/integration/test_api_gateway.py,448,make test request to gateway and check response,
localstack/tests/integration/test_api_gateway.py,460,=====================================================================,
localstack/tests/integration/test_api_gateway.py,461,Helper methods,
localstack/tests/integration/test_api_gateway.py,462,=====================================================================,
localstack/tests/integration/test_stepfunctions.py,69,create state machine,
localstack/tests/integration/test_stepfunctions.py,80,assert that the SM has been created,
localstack/tests/integration/test_stepfunctions.py,84,run state machine,
localstack/tests/integration/test_stepfunctions.py,93,assert that the result is correct,
localstack/tests/integration/test_stepfunctions.py,101,assert that the lambda has been invoked by the SM execution,
localstack/tests/integration/test_stepfunctions.py,104,clean up,
localstack/tests/integration/test_iam.py,28,start Kinesis client,
localstack/tests/integration/test_iam.py,63,clean up,
localstack/tests/integration/test_iam.py,95,Create role with same name,
localstack/tests/integration/test_iam.py,105,clean up,
localstack/tests/integration/test_iam.py,130,clean up,
localstack/tests/integration/test_cloudformation.py,366,wait for deployment to finish,
localstack/tests/integration/test_cloudformation.py,393,deploy template,
localstack/tests/integration/test_cloudformation.py,399,assert that resources have been created,
localstack/tests/integration/test_cloudformation.py,410,assert that tags have been created,
localstack/tests/integration/test_cloudformation.py,422,assert that bucket notifications have been created,
localstack/tests/integration/test_cloudformation.py,434,assert that subscriptions have been created,
localstack/tests/integration/test_cloudformation.py,439,assert that subscription attributes are added properly,
localstack/tests/integration/test_cloudformation.py,445,assert that Gateway responses have been created,
localstack/tests/integration/test_cloudformation.py,453,delete the stack,
localstack/tests/integration/test_cloudformation.py,456,assert that resources have been deleted,
localstack/tests/integration/test_cloudformation.py,505,assert that stack outputs are returned properly,
localstack/tests/integration/test_cloudformation.py,513,deploy template,
localstack/tests/integration/test_cloudformation.py,517,create change set with the same template (no changes),
localstack/tests/integration/test_cloudformation.py,530,deploy template,
localstack/tests/integration/test_cloudformation.py,536,run Lambda test invocation,
localstack/tests/integration/test_cloudformation.py,541,delete lambda function,
localstack/tests/integration/test_cloudformation.py,548,upload template to S3,
localstack/tests/integration/test_cloudformation.py,552,deploy template,
localstack/tests/integration/test_cloudformation.py,562,assert that nested resources have been created,
localstack/tests/integration/test_cloudformation.py,569,delete the stack,
localstack/tests/integration/test_cloudformation.py,577,Number of lambdas before of stack creation,
localstack/tests/integration/test_cloudformation.py,593,There is 1 new lambda function,
localstack/tests/integration/test_cloudformation.py,596,delete the stack,
localstack/tests/integration/test_cloudformation.py,657,clean up,
localstack/tests/integration/test_cloudformation.py,686,clean up,
localstack/tests/integration/test_integration.py,1,-*- coding: utf-8 -*-,
localstack/tests/integration/test_integration.py,30,constants for forward chain K1->L1->K2->L2,
localstack/tests/integration/test_integration.py,38,set up logger,
localstack/tests/integration/test_integration.py,51,create Firehose stream,
localstack/tests/integration/test_integration.py,65,create target S3 bucket,
localstack/tests/integration/test_integration.py,68,put records,
localstack/tests/integration/test_integration.py,75,check records in target bucket,
localstack/tests/integration/test_integration.py,78,check file layout in target bucket,
localstack/tests/integration/test_integration.py,93,create Firehose stream,
localstack/tests/integration/test_integration.py,110,create target S3 bucket,
localstack/tests/integration/test_integration.py,113,put records,
localstack/tests/integration/test_integration.py,122,check records in target bucket,
localstack/tests/integration/test_integration.py,126,TODO fix duplication with test_lambda_streams_batch_and_transactions(..)!,
localstack/tests/integration/test_integration.py,127,@profiled(),
localstack/tests/integration/test_integration.py,147,subscribe to inbound Kinesis stream,
localstack/tests/integration/test_integration.py,151,start the KCL client process in the background,
localstack/tests/integration/test_integration.py,157,create table with stream forwarding config,
localstack/tests/integration/test_integration.py,161,list DDB streams and make sure the table stream is there,
localstack/tests/integration/test_integration.py,169,deploy test lambda connected to DynamoDB Stream,
localstack/tests/integration/test_integration.py,174,make sure we cannot create Lambda with same name twice,
localstack/tests/integration/test_integration.py,178,deploy test lambda connected to Kinesis Stream,
localstack/tests/integration/test_integration.py,184,deploy test lambda connected to SQS queue,
localstack/tests/integration/test_integration.py,189,set number of items to update/put to table,
localstack/tests/integration/test_integration.py,203,Put items with an already existing ID (fix https://github.com/localstack/localstack/issues/522),
localstack/tests/integration/test_integration.py,210,batch write some items containing non-ASCII characters,
localstack/tests/integration/test_integration.py,216,"update some items, which also triggers notification events",
localstack/tests/integration/test_integration.py,225,put items to stream,
localstack/tests/integration/test_integration.py,237,put 1 item to stream that will trigger an error in the Lambda,
localstack/tests/integration/test_integration.py,241,"create SNS topic, connect it to the Lambda, publish test messages",
localstack/tests/integration/test_integration.py,249,get latest records,
localstack/tests/integration/test_integration.py,254,send messages to SQS queue,
localstack/tests/integration/test_integration.py,271,make sure the we have the right amount of INSERT/MODIFY event types,
localstack/tests/integration/test_integration.py,277,"this can take a long time in CI, make sure we give it enough time/retries",
localstack/tests/integration/test_integration.py,280,check cloudwatch notifications,
localstack/tests/integration/test_integration.py,282,TODO: It seems that CloudWatch is currently reporting an incorrect number of,
localstack/tests/integration/test_integration.py,283,"invocations, namely the sum over *all* lambdas, not the single one we're asking for.",
localstack/tests/integration/test_integration.py,284,"Also, we need to bear in mind that Kinesis may perform batch updates, i.e., a single",
localstack/tests/integration/test_integration.py,285,"Lambda invocation may happen with a set of Kinesis records, hence we cannot simply",
localstack/tests/integration/test_integration.py,286,add num_events_ddb to num_events_lambda above!,
localstack/tests/integration/test_integration.py,287,"self.assertEqual(num_invocations, 2 + num_events_lambda)",
localstack/tests/integration/test_integration.py,292,clean up,
localstack/tests/integration/test_integration.py,313,subscribe to inbound Kinesis stream,
localstack/tests/integration/test_integration.py,317,start the KCL client process in the background,
localstack/tests/integration/test_integration.py,323,create table with stream forwarding config,
localstack/tests/integration/test_integration.py,327,list DDB streams and make sure the table stream is there,
localstack/tests/integration/test_integration.py,335,deploy test lambda connected to DynamoDB Stream,
localstack/tests/integration/test_integration.py,340,submit a batch with writes,
localstack/tests/integration/test_integration.py,347,submit a batch with writes and deletes,
localstack/tests/integration/test_integration.py,357,submit a transaction with writes and delete,
localstack/tests/integration/test_integration.py,370,submit a batch with a put over existing item,
localstack/tests/integration/test_integration.py,376,submit a transaction with a put over existing item,
localstack/tests/integration/test_integration.py,382,submit a transaction with updates,
localstack/tests/integration/test_integration.py,412,make sure the we have the right amount of expected event types,
localstack/tests/integration/test_integration.py,439,"this can take a long time in CI, make sure we give it enough time/retries",
localstack/tests/integration/test_integration.py,442,clean up,
localstack/tests/integration/test_integration.py,453,deploy test lambdas connected to Kinesis streams,
localstack/tests/integration/test_integration.py,461,publish test record,
localstack/tests/integration/test_integration.py,467,check results,
localstack/tests/integration/test_integration.py,472,clean up,
localstack/tests/integration/test_integration.py,480,deploy test lambda connected to SQS queue,
localstack/tests/integration/test_integration.py,518,send 11 messages (which should get split into 3 batches),
localstack/tests/integration/test_integration.py,562,wait for the queue to drain (max 90s),
localstack/tests/integration/test_integration.py,568,---------------,
localstack/tests/integration/test_integration.py,569,HELPER METHODS,
localstack/tests/integration/test_integration.py,570,---------------,
localstack/tests/integration/test_web_ui.py,6,"TODO: skipping this test for now, as it takes a relatively long time, with limited benefit",
localstack/tests/integration/test_web_ui.py,13,TODO add more tests/assertions,
localstack/tests/integration/test_kinesis.py,20,create stream and assert 0 consumers,
localstack/tests/integration/test_kinesis.py,24,create consumer and assert 1 consumer,
localstack/tests/integration/test_kinesis.py,31,delete non-existing consumer and assert 1 consumer,
localstack/tests/integration/test_kinesis.py,35,delete existing consumer and assert 0 remaining consumers,
localstack/tests/integration/test_kinesis.py,48,start Kinesis client,
localstack/tests/integration/test_secretsmanager.py,45,clean up,
localstack/tests/integration/test_secretsmanager.py,58,call list_secrets 1st,
localstack/tests/integration/test_secretsmanager.py,67,call list_secrets 2nd,
localstack/tests/integration/test_secretsmanager.py,76,clean up,
localstack/tests/integration/test_secretsmanager.py,104,clean up,
localstack/tests/integration/__init__.py,16,disable SSL verification for local tests,
localstack/tests/integration/__init__.py,18,start profiling,
localstack/tests/integration/__init__.py,20,start infrastructure services,
localstack/tests/integration/__init__.py,23,make sure to tear down the infrastructure,
localstack/tests/integration/__init__.py,41,keep profiler active until tests have finished,
localstack/tests/integration/test_elasticsearch.py,25,create ES domain,
localstack/tests/integration/test_elasticsearch.py,42,make sure domain deletion works,
localstack/tests/integration/test_elasticsearch.py,62,make sure we cannot re-create same domain name,
localstack/tests/integration/test_elasticsearch.py,65,get domain status,
localstack/tests/integration/test_elasticsearch.py,74,make sure we can fake adding tags to a domain,
localstack/tests/integration/test_elasticsearch.py,112,Pause to allow the document to be indexed,
localstack/tests/integration/test_elasticsearch.py,120,Pause to allow the document to be indexed,
localstack/tests/integration/test_notifications.py,20,make sure we can create *.fifo queues,
localstack/tests/integration/test_notifications.py,28,create topic and queue,
localstack/tests/integration/test_notifications.py,32,"subscribe SQS to SNS, publish message",
localstack/tests/integration/test_notifications.py,39,"receive, assert, and delete message from SQS",
localstack/tests/integration/test_notifications.py,42,make sure we receive the correct topic ARN in notifications,
localstack/tests/integration/test_notifications.py,44,make sure the notification contains message attributes,
localstack/tests/integration/test_notifications.py,54,create test bucket and queue,
localstack/tests/integration/test_notifications.py,58,create notification on bucket,
localstack/tests/integration/test_notifications.py,82,Add second dummy config to fix https://github.com/localstack/localstack/issues/450,
localstack/tests/integration/test_notifications.py,93,retrieve and check notification config,
localstack/tests/integration/test_notifications.py,100,upload file to S3 (this should NOT trigger a notification),
localstack/tests/integration/test_notifications.py,105,upload file to S3 (this should trigger a notification),
localstack/tests/integration/test_notifications.py,110,"receive, assert, and delete message from SQS",
localstack/tests/integration/test_notifications.py,114,delete notification config,
localstack/tests/integration/test_notifications.py,117,put notification config with single event type,
localstack/tests/integration/test_notifications.py,132,put notification config with single event type,
localstack/tests/integration/test_notifications.py,157,upload file to S3 (this should trigger a notification),
localstack/tests/integration/test_notifications.py,161,"receive, assert, and delete message from SQS",
localstack/tests/integration/test_notifications.py,165,delete notification config,
localstack/tests/integration/test_notifications.py,168,,
localstack/tests/integration/test_notifications.py,169,Tests s3->sns->sqs notifications,
localstack/tests/integration/test_notifications.py,170,,
localstack/tests/integration/test_notifications.py,193,verify subject and records,
localstack/tests/integration/lambdas/lambda_python3.py,1,"simple test function that uses python 3 features (e.g., f-strings)",
localstack/tests/integration/lambdas/lambda_python3.py,2,see https://github.com/localstack/localstack/issues/264,
localstack/tests/integration/lambdas/lambda_python3.py,6,the following line is Python 3.6+ specific,
localstack/tests/integration/lambdas/lambda_python3.py,7,noqa This code is Python 3.6+ only,
localstack/tests/integration/lambdas/lambda_integration.py,19,Subclass of boto's TypeDeserializer for DynamoDB,
localstack/tests/integration/lambdas/lambda_integration.py,20,to adjust for DynamoDB Stream format.,
localstack/tests/integration/lambdas/lambda_integration.py,26,already in Base64,
localstack/tests/integration/lambdas/lambda_integration.py,32,print test messages (to test CloudWatch Logs integration),
localstack/tests/integration/lambdas/lambda_integration.py,40,looks like this is a call from an AWS_PROXY API Gateway,
localstack/tests/integration/lambdas/lambda_integration.py,70,Deserialize into Python dictionary and extract the,
localstack/tests/integration/lambdas/lambda_integration.py,71,"""NewImage"" (the new version of the full ddb document)",
localstack/tests/integration/lambdas/lambda_integration.py,77,Place the raw event message document into the Kinesis message format,
localstack/tests/integration/lambdas/lambda_integration.py,97,Forward messages to Kinesis,
localstack/tests/integration/lambdas/lambda_integration.py,102,"Deserialize into Python dictionary and extract the ""NewImage"" (the new version of the full ddb document)",
localstack/tests/integration/lambdas/lambda_echo.py,5,Just print the event was passed to lambda,
localstack/tests/unit/test_sns.py,16,Reset subscriptions,
localstack/tests/unit/test_sns.py,99,Now add a subject,
localstack/tests/unit/test_s3.py,173,test all available hosts with the bucket_name in the path,
localstack/tests/unit/test_s3.py,180,test all available hosts with the bucket_name in the host and the path is only the s3_key,
localstack/tests/unit/test_s3.py,200,abort multipart upload is a delete with the same query string as a complete multipart upload,
localstack/tests/unit/test_s3.py,223,"if there is a parsable date in XML <LastModified>, use it",
localstack/tests/unit/test_s3.py,228,"otherwise, just fill the header with the currentdate",
localstack/tests/unit/test_s3.py,229,I will not test currentDate as it is not trivial without adding dependencies,
localstack/tests/unit/test_s3.py,230,"so, I'm testing for the presence of the header only",
localstack/tests/unit/test_lambda.py,27,"Default value, hardcoded",
localstack/tests/unit/test_lambda.py,69,Match source ARN,
localstack/tests/unit/test_lambda.py,74,No partial match on source ARN,
localstack/tests/unit/test_lambda.py,86,Do partial match on paths,
localstack/tests/unit/test_lambda.py,273,"we need to remove this, since this is random, so we cannot know its value",
localstack/tests/unit/test_lambda.py,274,"we need to remove this, since this is random, so we cannot know its value",
localstack/tests/unit/test_lambda.py,313,"we need to remove this, since this is random, so we cannot know its value",
localstack/tests/unit/test_lambda.py,357,"we need to remove this, since this is random, so we cannot know its value",
localstack/tests/unit/test_lambda.py,396,"we need to remove this, since this is random, so we cannot know its value",
localstack/tests/unit/test_lambda.py,428,"we need to remove this, since this is random, so we cannot know its value",
localstack/tests/unit/test_lambda.py,463,"we need to remove this, since this is random, so we cannot know its value",
localstack/tests/unit/test_lambda.py,495,note: PutFunctionConcurrency is mounted at: /2017-10-31,
localstack/tests/unit/test_lambda.py,496,NOT lambda_api.PATH_ROOT,
localstack/tests/unit/test_lambda.py,497,https://docs.aws.amazon.com/lambda/latest/dg/API_PutFunctionConcurrency.html,
localstack/tests/unit/test_lambda.py,508,note: PutFunctionConcurrency is mounted at: /2017-10-31,
localstack/tests/unit/test_lambda.py,509,NOT lambda_api.PATH_ROOT,
localstack/tests/unit/test_lambda.py,510,https://docs.aws.amazon.com/lambda/latest/dg/API_PutFunctionConcurrency.html,
localstack/tests/unit/test_lambda.py,635,plain old epoch secs,
localstack/tests/unit/test_lambda.py,636,epoch ms as a long-int like AWS,
localstack/tests/unit/test_lambda.py,638,pass t_ms millisecs to _store_logs,
localstack/tests/unit/test_lambda.py,641,expect the computed log-stream-name to having a prefix matching the date derived from t_sec,
localstack/tests/unit/test_lambda.py,694,creating a lambda function,
localstack/tests/unit/test_lambda.py,697,calling put_function_event_invoke_config,
localstack/tests/unit/test_lambda.py,710,checking if response is not None,
localstack/tests/unit/test_lambda.py,713,calling get_function_event_invoke_config,
localstack/tests/unit/test_lambda.py,716,verifying set values,
localstack/tests/unit/test_message_transformation.py,7,template used to transform incoming requests at the API Gateway (forward to Kinesis),
localstack/tests/unit/test_message_transformation.py,63,try rendering the template,
localstack/tests/unit/test_message_transformation.py,69,try again with context as string,
localstack/tests/unit/test_message_transformation.py,77,test with empty array,
localstack/tests/unit/test_message_transformation.py,82,try rendering the template,
localstack/tests/unit/test_misc.py,22,See: https://en.wikipedia.org/wiki/Chunked_transfer_encoding,
localstack/tests/unit/test_misc.py,62,"This test is not enabled in CI, it is just used for manual",
localstack/tests/unit/test_misc.py,63,testing to debug https://github.com/localstack/localstack/issues/213,
localstack/,4,LocalStack version,
localstack/,7,"constant to represent the ""local"" region, i.e., local machine",
localstack/,10,dev environment,
localstack/,13,HTTP headers used to forward proxy request URLs,
localstack/,17,"backend service ports, for services that are behind a proxy (counting down from 4566)",
localstack/,39,version of the Maven dependency with Java utility code,
localstack/,42,map of default service APIs and ports to be spun up (fetch map from localstack_client),
localstack/,45,host to bind to when starting the services,
localstack/,48,AWS user account ID used for tests,
localstack/,53,root code folder,
localstack/,56,virtualenv folder,
localstack/,59,assuming this package lives here: <python>/lib/pythonX.X/site-packages/localstack/,
localstack/,62,API Gateway path to indicate a user request sent to the gateway,
localstack/,65,name of LocalStack Docker image,
localstack/,68,backdoor API path used to retrieve or update config variables,
localstack/,71,environment variable name to tag local test runs,
localstack/,74,content types,
localstack/,81,strings to indicate truthy/falsy values,
localstack/,85,Lambda defaults,
localstack/,88,installation constants,
localstack/,90,See https://docs.aws.amazon.com/ja_jp/elasticsearch-service/latest/developerguide/aes-supported-plugins.html,
localstack/,93,Default ES modules to exclude (save apprx 66MB in the final image),
localstack/,100,"TODO: Temporarily using a fixed version of DDB in Alpine, as we're hitting a SIGSEGV JVM crash with latest",
localstack/,104,API endpoint for analytics events,
localstack/,107,environment variable to indicates that this process is running the Web UI,
localstack/,111,Hardcoded AWS account ID used by moto,
localstack/,114,Default lambda registry,
localstack/,15,java options to Lambda,
localstack/,18,limit in which to kinesalite will start throwing exceptions,
localstack/,21,delay in kinesalite response when making changes to streams,
localstack/,24,default AWS region,
localstack/,29,randomly inject faults to Kinesis,
localstack/,32,randomly inject faults to DynamoDB,
localstack/,35,expose services on a specific host internally,
localstack/,38,expose services on a specific host externally,
localstack/,41,expose SQS on a specific port externally,
localstack/,44,name of the host under which the LocalStack services are available,
localstack/,47,whether to remotely copy the lambda or locally mount a volume,
localstack/,50,network that the docker lambda container will be joining,
localstack/,53,default container registry for lambda execution images,
localstack/,56,whether to remove containers after Lambdas finished executing,
localstack/,59,directory for persisting data,
localstack/,62,folder for temporary files and data,
localstack/,65,create folders,
localstack/,71,this can happen due to a race condition when starting,
localstack/,72,multiple processes in parallel. Should be safe to ignore,
localstack/,75,"fix for Mac OS, to be able to mount /var/folders in Docker",
localstack/,79,temporary folder of the host (required when running in Docker). Fall back to local tmp folder if not set,
localstack/,82,whether to use SSL encryption for the services,
localstack/,85,default encoding used to convert strings to byte arrays (mainly for Python 3 compatibility),
localstack/,88,path to local Docker UNIX domain socket,
localstack/,91,"additional flags to pass to ""docker run"" when starting the stack in Docker",
localstack/,94,"command used to run Docker containers (e.g., set to ""sudo docker"" to run as sudo)",
localstack/,97,whether to start the web API,
localstack/,100,"port number for the edge service, the main entry point for all API invocations",
localstack/,102,fallback port for non-SSL HTTP edge service (in case HTTPS edge service cannot be used),
localstack/,105,port of Web UI,
localstack/,109,IP of the docker bridge used to enable access between containers,
localstack/,112,CORS settings,
localstack/,116,whether to disable publishing events to the API,
localstack/,138,whether to use Lambda functions in a Docker container,
localstack/,145,Fallback URL to use when a non-existing Lambda is invoked. If this matches,
localstack/,146,"`dynamodb://<table_name>`, then the invocation is recorded in the corresponding",
localstack/,147,"DynamoDB table. If this matches `http(s)://...`, then the Lambda invocation is",
localstack/,148,forwarded as a POST request to that URL.,
localstack/,151,list of environment variable names used for configuration.,
localstack/,152,Make sure to keep this in sync with the above!,
localstack/,153,"Note: do *not* include DATA_DIR in this list, as it is treated separately",
localstack/,184,determine IP of Docker bridge,
localstack/,194,determine route to Docker host from container,
localstack/,198,"If we're running outside docker, and would like the Lambda containers to be able",
localstack/,199,"to access services running on the local machine, set DOCKER_HOST_FROM_CONTAINER accordingly",
localstack/,202,update LOCALSTACK_HOSTNAME if host.docker.internal is available,
localstack/,210,make sure we default to LAMBDA_REMOTE_DOCKER=true if running in Docker,
localstack/,214,local config file path in home directory,
localstack/,217,"set variables no_proxy, i.e., run internal service calls directly",
localstack/,226,"additional CLI commands, can be set by plugins",
localstack/,229,set of valid regions,
localstack/,245,(1) set default port number,
localstack/,247,"(2) set port number from <SERVICE>_PORT environment, if present",
localstack/,250,"(3) set port number from <service>:<port> portion in $SERVICES, if present",
localstack/,253,"(4) try to parse as int, fall back to 0 (invalid port)",
localstack/,268,define service ports and URLs as environment variables,
localstack/,272,define PORT_* variables with actual service ports as per configuration,
localstack/,277,define TEST_*_URL variables with mock service endpoints,
localstack/,280,expose HOST_*_URL variables as environment variables,
localstack/,283,expose LOCALSTACK_HOSTNAME as env. variable,
localstack/,286,create variable aliases prefixed with LOCALSTACK_ (except LOCALSTACK_HOSTNAME),
localstack/,300,initialize config values,
localstack/,303,set log level,
localstack/,308,"whether to bundle multiple APIs into a single process, where possible",
localstack/,311,whether to use a CPU/memory profiler when running the integration tests,
localstack/,10,"skip loading plugins for Docker launching, to increase startup speed",
localstack/,16,add Docker flags for edge ports,
localstack/,30,register default plugins,
localstack/,21,set up logger,
localstack/,24,"maps plugin scope (""services"", ""commands"") to flags which indicate whether plugins have been loaded",
localstack/,27,"predefined list of plugin modules, to speed up the plugin loading at startup",
localstack/,30,marker for extended/ignored libs in requirements.txt,
localstack/,34,whether or not to manually fix permissions on /var/run/docker.sock (currently disabled),
localstack/,37,log format strings,
localstack/,41,plugin scopes,
localstack/,45,maps from API names to list of other API names that they depend on,
localstack/,51,"composites define an abstract name like ""serverless"" that maps to a set of services",
localstack/,57,name of main Docker container,
localstack/,60,environment variable that indicates that we're executing in,
localstack/,61,the context of the script that starts the Docker container,
localstack/,64,semaphore for locking access to Popen,
localstack/,77,determine requirements,
localstack/,141,"Use a predefined list of plugin modules for now, to speed up the plugin loading at startup",
localstack/,142,search_modules = pkgutil.iter_modules(),
localstack/,164,set global flag,
localstack/,167,debug plugin loading time,
localstack/,192,determine and set log level,
localstack/,196,set up werkzeug logger,
localstack/,212,disable some logs and warnings,
localstack/,224,--------------,
localstack/,225,INFRA STARTUP,
localstack/,226,--------------,
localstack/,243,resolve composites,
localstack/,249,resolve dependencies,
localstack/,255,remove duplicates and composite names,
localstack/,258,make sure we have port mappings for each API,
localstack/,343,load plugins before starting the docker container,
localstack/,346,prepare APIs,
localstack/,357,get run params,
localstack/,361,container for port mappings,
localstack/,364,get port ranges defined via DOCKER_FLAGS (if any),
localstack/,373,construct default port mappings,
localstack/,397,append space if parameter is set,
localstack/,439,fix permissions on /var/run/docker.sock,
localstack/,450,---------------,
localstack/,451,UTIL FUNCTIONS,
localstack/,452,---------------,
localstack/,497,don't use subprocess module in Python 2 as it is not thread-safe,
localstack/,498,http://stackoverflow.com/questions/21194380/is-subprocess-popen-not-thread-safe,
localstack/,499,"TODO: should be removed, now that Python 2 has reached its EOL",
localstack/,523,"subprocess.Popen is not thread-safe, hence use a mutex here.. (TODO: mutex still needed?)",
localstack/,529,"Note: leave the ""pty"" import here (not supported in Windows)",
localstack/,535,start the actual sub process,
localstack/,543,based on: https://stackoverflow.com/questions/41542960,
localstack/,586,Ignore rare 'File exists' race conditions.,
localstack/,18,Stack with flags to indicate whether we are currently re-playing API calls.,
localstack/,19,(We should not be re-playing and recording at the same time),
localstack/,22,file paths by API,
localstack/,25,set up logger,
localstack/,122,---------------,
localstack/,123,HELPER METHODS,
localstack/,124,---------------,
localstack/,6,Note: make sure we don't have imports at the root level here,
localstack/,27,Using the native command can be an order of magnitude faster on Travis-CI,
localstack/,34,Using the native command can be an order of magnitude faster on Travis-CI,
localstack/,49,create __init__.py files along the path to allow Python imports,
localstack/,54,copy libs,
localstack/,78,create zip file,
localstack/,89,Using the native zip command can be an order of magnitude faster on Travis-CI,
localstack/,114,create zip file,
localstack/,138,load zip file content if handler_file is specified,
localstack/,145,Delete function if one already exists,
localstack/,150,create function,
localstack/,174,create event source mapping,
localstack/,193,for Python 3 compatibility,
localstack/,197,wrap single item in an array,
localstack/,270,skip non-JSON or binary objects,
localstack/,308,create queue,
localstack/,311,get the queue arn,
localstack/,41,arrays for temporary files and resources,
localstack/,46,cache clean variables,
localstack/,53,misc. constants,
localstack/,58,chunk size for file downloads,
localstack/,61,set up logger,
localstack/,64,flag to indicate whether we've received and processed the stop signal,
localstack/,67,generic cache object,
localstack/,70,lock for creating certificate files,
localstack/,122,get stdout/stderr from child process and write to parent output,
localstack/,126,"`line` should contain a newline at the end as we're iterating,",
localstack/,127,hence we can safely break the loop if `line` is None or empty string,
localstack/,151,"Note: Do NOT import ""psutil"" at the root scope, as this leads",
localstack/,152,to problems when importing this file from our test Lambdas in Docker,
localstack/,153,(Error: libc.musl-x86_64.so.1: cannot open shared object file),
localstack/,158,"Note: Do NOT import ""psutil"" at the root scope, as this leads",
localstack/,159,to problems when importing this file from our test Lambdas in Docker,
localstack/,160,(Error: libc.musl-x86_64.so.1: cannot open shared object file),
localstack/,245,Note: import werkzeug here (not at top of file) to allow dependency pruning,
localstack/,261,reset pointers,
localstack/,263,get value from streams,
localstack/,268,close handles,
localstack/,297,----------------,
localstack/,298,UTILITY METHODS,
localstack/,299,----------------,
localstack/,433,truncating micorseconds to milliseconds. while leaving the Z,
localstack/,459,get node or create one,
localstack/,532,Ignore rare 'File exists' race conditions.,
localstack/,576,Running the native command can be an order of magnitude faster in Alpine on Travis-CI,
localstack/,582,Make sure all files are writeable and dirs executable to remove,
localstack/,584,"check if the file is either a normal file, or, e.g., a fifo",
localstack/,602,make sure we're creating a new session here to,
localstack/,603,enable parallel file downloads during installation!,
localstack/,606,check status code before attempting to read body,
localstack/,618,filter out keep-alive new chunks,
localstack/,657,"for int, long and float",
localstack/,765,clear lists,
localstack/,780,"file likely doesn't exist, or permission denied",
localstack/,814,Running the native command can be an order of magnitude faster in Alpine on Travis-CI,
localstack/,822,Make sure to preserve file permissions in the zip file,
localstack/,823,https://www.burgundywall.com/post/preserving-file-perms-with-python-zipfile-module,
localstack/,892,"Note: Do NOT import ""OpenSSL"" at the root scope",
localstack/,893,(Our test Lambdas are importing this file but don't have the module installed),
localstack/,903,extract key and cert from target_file and store into separate files,
localstack/,923,create a key pair,
localstack/,927,create a self-signed cert,
localstack/,933,noqa,
localstack/,936,Note: new requirements for recent OSX versions: https://support.apple.com/en-us/HT210176,
localstack/,937,More details: https://www.iol.unh.edu/blog/2019/10/10/macos-catalina-and-chrome-trust,
localstack/,964,check existence to avoid permission denied issues:,
localstack/,965,https://github.com/localstack/localstack/issues/1607,
localstack/,977,Fix for https://github.com/localstack/localstack/issues/1743,
localstack/,1013,check file age,
localstack/,1038,"text = unicode(text, ""utf-8"")",
localstack/,1040,"text = unicodedata.normalize('NFKD', text)",
localstack/,1069,create class-of-a-class,
localstack/,1131,Code that requires util functions from above,
localstack/,1,!/usr/bin/env python,
localstack/,28,define Java class names,
localstack/,31,set up log levels,
localstack/,38,default log level for the KCL log output,
localstack/,41,set up local logger,
localstack/,44,checkpointing settings,
localstack/,139,number of lines that make up a single log entry,
localstack/,141,determine log level,
localstack/,143,get log subscribers,
localstack/,149,regular expression to filter the printed output,
localstack/,151,create prefix and logger,
localstack/,185,notify subscribers,
localstack/,188,add line to buffer,
localstack/,211,deprecated,
localstack/,216,"empty if at EOF (non-empty, including newline, if not at EOF)",
localstack/,236,construct combined regex,
localstack/,239,"Semaphore.acquire does not provide timeout parameter, so we",
localstack/,240,use a Queue here which provides the required functionality,
localstack/,251,construct a stream info hash,
localstack/,256,construct stream info,
localstack/,269,set local connection,
localstack/,290,decide which credentials provider to use,
localstack/,294,use special credentials provider that can assume IAM roles and handle temporary STS auth tokens,
localstack/,296,pass through env variables to child process,
localstack/,302,"need to disable CBOR protocol, enforce use of plain JSON,",
localstack/,303,see https://github.com/mhart/kinesalite/issues/31,
localstack/,310,start log output reader thread which will read the KCL log,
localstack/,311,file and print each line to stdout of this process...,
localstack/,316,construct stream info,
localstack/,320,set kcl config options,
localstack/,325,set parameters for local connection,
localstack/,333,create config file,
localstack/,338,start stream consumer,
localstack/,422,start event reader thread (this process),
localstack/,426,Wait until the event reader thread is ready (to avoid 'Connection refused' error on the UNIX socket),
localstack/,428,start KCL client (background process),
localstack/,431,add log listener that notifies when KCL is started,
localstack/,442,Wait at most 90 seconds for initialization. Note that creating the DDB table can take quite a bit,
localstack/,447,wait at most 30 seconds for shard lease notification,
localstack/,451,this merely means that there is no shard available to take. Do nothing.,
localstack/,1,!/usr/bin/env python,
localstack/,41,First make all the user provided paths absolute,
localstack/,43,We add our paths after the user provided paths because this permits users to,
localstack/,44,potentially inject stuff before our paths (otherwise our stuff would always,
localstack/,45,take precedence).,
localstack/,48,Add the dir that the props file is in,
localstack/,51,add path of custom java code,
localstack/,86,Just need the basename because the path is added to the classpath,
localstack/,105,optional properties,
localstack/,8,set up local logger,
localstack/,41,end of socket input stream,
localstack/,17,maps API names to server details,
localstack/,20,network port for multiserver instance,
localstack/,23,API paths,
localstack/,26,whether to start the multiserver in a separate process,
localstack/,13,---------------,
localstack/,14,Lambda metrics,
localstack/,15,---------------,
localstack/,26,publish metric only if CloudWatch service is available,
localstack/,63,make sure that the log group exists,
localstack/,71,"this can happen in certain cases, possibly due to a race condition",
localstack/,76,create a new log stream for this lambda invocation,
localstack/,79,store new log events under the log stream,
localstack/,87,simple heuristic: assume log lines were emitted in regular intervals,
localstack/,100,---------------,
localstack/,101,Helper methods,
localstack/,102,---------------,
localstack/,145,TODO,
localstack/,146,time_after = now_utc(),
localstack/,22,list of resource types that can be updated,
localstack/,25,list of static attribute references to be replaced in {'Fn::Sub': '...'} strings,
localstack/,28,"create safe yaml loader that parses date strings as string, not date objects",
localstack/,146,prepare lambda/queue/topic notification configs,
localstack/,158,construct final result,
localstack/,183,Fix for https://github.com/localstack/localstack/issues/2022,
localstack/,184,"Convert any date instances to date strings, etc, Version: ""2012-10-17""",
localstack/,201,maps resource types to functions and parameters for creation,
localstack/,337,TODO add missing fields,
localstack/,538,----------------,
localstack/,539,UTILITY METHODS,
localstack/,540,----------------,
localstack/,559,---------------------,
localstack/,560,CF TEMPLATE HANDLING,
localstack/,561,---------------------,
localstack/,610,try to extract name from attributes,
localstack/,727,TODO possibly filter results by stage name or other criteria,
localstack/,752,TODO possibly find a better way to compare resource_id with queue URLs,
localstack/,783,TODO implement,
localstack/,829,"we expect this to be a ""not found"" exception",
localstack/,838,extract resource specific attributes,
localstack/,869,"first, check stack parameters",
localstack/,874,"second, resolve resource references",
localstack/,885,fetch resource details,
localstack/,900,process special operators,
localstack/,965,"TODO use RESOURCE_TO_FUNCTION mechanism for updates, instead of hardcoding here",
localstack/,1093,replace PLACEHOLDER_RESOURCE_NAME in params,
localstack/,1106,assign default values if empty,
localstack/,1109,"this is an indicator that we should skip this resource deployment, and return",
localstack/,1113,convert refs and boolean strings,
localstack/,1117,Convert to boolean (TODO: do this recursively?),
localstack/,1121,convert any moto account IDs (123456789012) in ARNs to our format (000000000000),
localstack/,1123,"convert data types (e.g., boolean strings to bool)",
localstack/,1125,"remove None values, as they usually raise boto3 errors",
localstack/,1128,invoke function,
localstack/,1137,some resources have attached/nested resources which we need to create recursively now,
localstack/,1175,TODO remove?,
localstack/,1190,get resource details,
localstack/,1214,--------,
localstack/,1215,Util methods for analyzing resource dependencies,
localstack/,1216,--------,
localstack/,1280,TODO: traverse dict instead of doing string search,
localstack/,15,Note: don't use flask's make_response(..) or jsonify(..) here as they,
localstack/,16,"can lead to ""RuntimeError: working outside of application context"".",
localstack/,18,AWS environment variable names,
localstack/,23,set up logger,
localstack/,26,cache local region,
localstack/,29,Use this field if you want to provide a custom boto3 session.,
localstack/,30,This field takes priority over CREATE_NEW_SESSION_PER_BOTO3_CONNECTION,
localstack/,32,Use this flag to enable creation of a new session for each boto3 connection.,
localstack/,33,This flag will be ignored if CUSTOM_BOTO3_SESSION is specified,
localstack/,36,Used in AWS assume role function,
localstack/,39,Boto clients cache,
localstack/,42,Assume role loop seconds,
localstack/,45,maps SQS queue ARNs to queue URLs,
localstack/,51,"target is the runtime environment to use, e.g.,",
localstack/,52,'local' for local mode,
localstack/,54,"prefix can be 'prod', 'stg', 'uat-1', etc.",
localstack/,156,return default session,
localstack/,161,TODO look up region from context,
localstack/,214,"Cache clients, as this is a relatively expensive operation",
localstack/,282,run a few fixes to properly prepare the template,
localstack/,305,Format is: <your-access-key-id>/<date>/<aws-region>/<aws-service>/aws4_request,
localstack/,306,See https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-auth-using-authorization-header.html,
localstack/,456,name is index #6 in pattern: arn:aws:lambda:.*:.*:function:.*,
localstack/,515,queue,
localstack/,615,Table already exists -> return table reference,
localstack/,684,list resources,
localstack/,688,add API resources and methods,
localstack/,690,create resources recursively,
localstack/,695,add methods to the API resource,
localstack/,704,create integrations for this API resource/method,
localstack/,708,deploy the API gateway,
localstack/,722,create integration,
localstack/,737,create response configs,
localstack/,739,create integration response,
localstack/,748,create method response,
localstack/,766,get endpoint from API,
localstack/,784,use ssl?,
localstack/,808,stream,
localstack/,51,"TODO catch stream already exists exception, otherwise rethrow",
localstack/,90,"swallowing this exception should be ok, as we are in a retry loop",
localstack/,107,128 times '1' binary as decimal,
localstack/,268,Example ARN: arn:aws:lambda:aws-region:acct-id:function:helloworld:1,
localstack/,9,set up logger,
localstack/,13,TODO activate as needed,
localstack/,14,"(str, 'lower'),",
localstack/,15,"(str, 'rpartition', False),",
localstack/,16,"(_io.BufferedReader, 'readline', True)",
localstack/,22,return profiled_via_yappi(lines),
localstack/,44,TODO print(''.join(stack)),
localstack/,14,event type constants,
localstack/,41,sender thread and queue,
localstack/,106,determine MACHINE_ID from config files,
localstack/,119,"if we can neither find NOR create the config files, fall back to process id",
localstack/,123,assign default id if empty,
localstack/,127,update MACHINE_ID in all config files,
localstack/,147,"silently fail, make collection of usage data as non-intrusive as possible",
localstack/,173,only store events if API key has been specified,
localstack/,26,path for test certificate,
localstack/,42,set up logger,
localstack/,92,List of `ProxyListener` instances that are enabled by default for all requests,
localstack/,116,"Required fix for Python 2 (otherwise S3 uploads are hanging), based on the Python 3 code:",
localstack/,117,https://sourcecodebrowser.com/python3.2/3.2.3/http_2server_8py_source.html#l00332,
localstack/,178,"If the Content-Length header is missing, try to read",
localstack/,179,content from the socket using a socket timeout.,
localstack/,185,TODO find a more efficient way to do this!,
localstack/,211,force close connection,
localstack/,233,"update original ""Host"" header (moto s3 relies on this behavior)",
localstack/,243,update listener (pre-invocation),
localstack/,264,"get status code from response, or use Bad Gateway status code",
localstack/,268,allow pre-flight CORS headers by default,
localstack/,273,perform the actual invocation of the backend service,
localstack/,286,prevent requests from processing response body,
localstack/,290,update listener (post-invocation),
localstack/,300,"some listeners (e.g., sqs_listener.py) require additional details like the original",
localstack/,301,"request port, hence we pass in a reference to this request handler as well.",
localstack/,307,copy headers and return response,
localstack/,312,filter out certain headers that we don't want to transmit,
localstack/,319,allow pre-flight CORS headers by default,
localstack/,337,"During a test run, we also want to print error messages, because",
localstack/,338,"log messages are delayed until the entire test run is over, and",
localstack/,339,hence we are missing messages if the test hangs for some reason.,
localstack/,341,bad gateway,
localstack/,343,force close connection,
localstack/,352,"Note: Use ""response is not None"" here instead of ""not response""!",
localstack/,390,set globally defined SSL socket implementation class,
localstack/,408,Required to enable 'Connection: keep-alive' for S3 uploads,
localstack/,416,make sure we have a cert generated,
localstack/,10,set up logger,
localstack/,13,"map of service plugins, mapping from service name to plugin details",
localstack/,16,maps service names to health status,
localstack/,20,-----------------,
localstack/,21,PLUGIN UTILITIES,
localstack/,22,-----------------,
localstack/,66,-------------------------,
localstack/,67,HEALTH CHECK API METHODS,
localstack/,68,-------------------------,
localstack/,82,-----------------------------,
localstack/,83,INFRASTRUCTURE HEALTH CHECKS,
localstack/,84,-----------------------------,
localstack/,91,loop through plugins and check service status,
localstack/,128,"ignore for now, if the service is not running",
localstack/,15,Header to indicate that the process should kill itself. This is required because if,
localstack/,16,"this process is started as root, then we cannot kill it from a non-root process",
localstack/,26,kill the process if we receive this header,
localstack/,34,extract API details,
localstack/,38,detect S3 presigned URLs,
localstack/,70,initialize result,
localstack/,73,https://docs.aws.amazon.com/general/latest/gr/sigv4-signed-request-examples.html,
localstack/,81,Fallback rules and route customizations applied below,
localstack/,107,"start local DNS server, if present",
localstack/,113,get port and start Edge,
localstack/,115,"use use=True here because our proxy allows both, HTTP and HTTPS traffic",
localstack/,145,process requires priviledged port but we're not root -> try running as sudo,
localstack/,157,make sure we can run sudo commands,
localstack/,160,register a signal handler to terminate the sudo process later on,
localstack/,163,start the process as sudo,
localstack/,1,!/usr/bin/env python,
localstack/,17,flake8: noqa: E402,
localstack/,38,"Target version for javac, to ensure compatibility with earlier JREs",
localstack/,41,"As of 2019-10-09, the DDB fix (see below) doesn't seem to be required anymore",
localstack/,43,"TODO: 2019-10-09: Temporarily overwriting DDB, as we're hitting a SIGSEGV JVM crash with the latest version",
localstack/,46,set up logger,
localstack/,54,download and extract archive,
localstack/,67,install default plugins,
localstack/,70,https://github.com/pires/docker-elasticsearch/issues/56,
localstack/,76,delete some plugins to free up space,
localstack/,81,disable x-pack-ml plugin (not working on Alpine),
localstack/,85,patch JVM options file - replace hardcoded heap size settings,
localstack/,98,download archive,
localstack/,135,download and extract archive,
localstack/,140,"fix for Alpine, otherwise DynamoDBLocal fails with:",
localstack/,141,DynamoDBLocal_lib/libsqlite4java-linux-amd64.so: __memcpy_chk: symbol not found,
localstack/,154,fix logging configuration for DynamoDBLocal,
localstack/,171,install KCL/STS JAR files,
localstack/,178,Compile Java files,
localstack/,189,"install LocalStack ""fat"" JAR file (contains all dependencies)",
localstack/,215,load plugins,
localstack/,218,install all components,
localstack/,222,-----------------,
localstack/,223,HELPER FUNCTIONS,
localstack/,224,-----------------,
localstack/,249,try deleting and re-downloading the zip file,
localstack/,264,Install additional libraries for testing,
localstack/,32,flag to indicate whether signal handlers have been set up already,
localstack/,35,default backend host address,
localstack/,38,set up logger,
localstack/,42,-----------------------,
localstack/,43,CONFIG UPDATE BACKDOOR,
localstack/,44,-----------------------,
localstack/,77,-----------------,
localstack/,78,API ENTRY POINTS,
localstack/,79,-----------------,
localstack/,156,---------------,
localstack/,157,HELPER METHODS,
localstack/,158,---------------,
localstack/,231,register signal handlers,
localstack/,254,check if we have a custom backend configured,
localstack/,313,TODO: optimize this (takes too long currently),
localstack/,314,"check_infra(retries=2, expect_shutdown=True)",
localstack/,325,set temporary dummy credentials,
localstack/,333,-------------,
localstack/,334,MAIN STARTUP,
localstack/,335,-------------,
localstack/,343,print a warning if we're not running in Docker but using Docker based LAMBDA_EXECUTOR,
localstack/,353,apply patches,
localstack/,356,load plugins,
localstack/,362,set up logging,
localstack/,365,prepare APIs,
localstack/,367,set environment,
localstack/,370,register signal handlers,
localstack/,373,"make sure AWS credentials are configured, otherwise boto3 bails on us",
localstack/,375,install libs if not present,
localstack/,377,Some services take a bit to come up,
localstack/,379,start services,
localstack/,382,loop through plugins and start each service,
localstack/,390,ensure that all infra components are up and running,
localstack/,392,restore persisted data,
localstack/,397,"this is a bit of an ugly hack, but we need to make sure that we",
localstack/,398,"stay in the execution context of the main thread, otherwise our",
localstack/,399,signal handlers don't work,
localstack/,53,"List of Lambda runtime names. Keep them in this list, mainly to silence the linter",
localstack/,59,default timeout in seconds,
localstack/,61,default handler and runtime,
localstack/,78,map ARN strings to lambda function objects,
localstack/,81,list of event source mappings for the API,
localstack/,84,logger,
localstack/,87,mutex for access to CWD and ENV,
localstack/,90,whether to use Docker for execution,
localstack/,93,start characters indicating that a lambda result should be parsed as JSON,
localstack/,109,SQS listener thread settings,
localstack/,113,lambda executor instance,
localstack/,116,IAM policy constants,
localstack/,120,Marker name to indicate that a bucket represents the local file system. This is used for testing,
localstack/,121,Serverless applications where we mount the Lambda code directly into the container from the host OS.,
localstack/,147,TODO implement!,
localstack/,255,TODO,
localstack/,283,Yield successive n-sized chunks from lst.,
localstack/,287,feed records into listening lambdas,
localstack/,318,Skip deleting messages from the queue in case of processing errors AND if,
localstack/,319,the message has not yet been sent to a dead letter queue (DLQ).,
localstack/,320,We'll pick them up and retry next time they become available on the queue.,
localstack/,345,"TODO implement retries, based on ""RedrivePolicy.maxReceiveCount"" in the queue settings",
localstack/,353,Temporarily disable polling if no event sources are configured,
localstack/,354,anymore. The loop will get restarted next time a message,
localstack/,355,arrives and if an event source is configured.,
localstack/,393,feed message into the first listening lambda (message should only get processed once),
localstack/,422,"Some types of ARNs can end with a path separated by slashes, for",
localstack/,423,example the ARN of a DynamoDB stream is tableARN/stream/ID. It's,
localstack/,424,a little counterintuitive that a more specific mapped ARN can,
localstack/,425,"match a less specific ARN on the event, but some integration tests",
localstack/,426,rely on it for things like subscribing to a stream and matching an,
localstack/,427,event labeled with the table ARN.,
localstack/,509,generate lambda file name,
localstack/,513,delete temporary .py and .pyc files on exit,
localstack/,522,the above import can bring files for the function,
localstack/,523,(eg settings.py) into the global namespace. subsequent,
localstack/,524,"calls can pick up file from another function, causing",
localstack/,525,general issues.,
localstack/,545,TODO: support Java Lambdas in the future,
localstack/,565,TODO: support Java Lambdas in the future,
localstack/,623,get metadata,
localstack/,632,Stop/remove any containers that this arn uses.,
localstack/,636,Mount or use a local folder lambda executors can reference,
localstack/,637,WARNING: this means we're pointing lambda_cwd to a local path in the user's,
localstack/,638,"file system! We must ensure that there is no data loss (i.e., we must *not* add",
localstack/,639,this folder to TMP_FILES or similar).,
localstack/,642,get file content,
localstack/,645,Save the zip file to a temporary file that the lambda executors can reference,
localstack/,676,Save the zip file to a temporary file that the lambda executors can reference,
localstack/,681,get local lambda working directory,
localstack/,687,Set the appropriate lambda handler.,
localstack/,692,"The Lambda executors for Docker subclass LambdaExecutorContainers, which",
localstack/,693,runs Lambda in Docker by passing all *.jar files in the function working,
localstack/,694,directory as part of the classpath. Obtain a Java handler function below.,
localstack/,698,Lambda code must be uploaded in Zip format,
localstack/,702,"Unzipping should only be required for (1) non-Java Lambdas, or (2) zip files containing JAR files",
localstack/,706,Obtain handler details for any non-Java Lambda function,
localstack/,713,"Raise an error if (1) this is not a local mount lambda, or (2) we're",
localstack/,714,"running Lambdas locally (not in Docker), or (3) we're using remote Docker.",
localstack/,715,-> We do *not* want to raise an error if we're using local mount in non-remote Docker,
localstack/,727,"make sure the file is actually readable, then read contents",
localstack/,730,extract handler,
localstack/,752,this can happen if we're accessing Lambdas from a different region (ARN mismatch),
localstack/,818,!TODO: Cache policy documents instead of running N+1 API calls here!,
localstack/,843,------------,
localstack/,844,API METHODS,
localstack/,845,------------,
localstack/,850,"fix to enable chunked encoding, as this is used by some Lambda clients",
localstack/,892,"remove content from code attribute, if present",
localstack/,894,prepare result,
localstack/,959,Stop/remove any containers that this arn uses.,
localstack/,1041,Stop/remove any containers that this arn uses.,
localstack/,1073,TODO: 'Principal' in policies not yet supported in upstream moto,
localstack/,1074,"'Principal': data.get('Principal') or {'AWS': TEST_AWS_ACCOUNT_ID},",
localstack/,1120,function here can either be an arn or a function name,
localstack/,1123,"arn can also contain a qualifier, extract it from there if so",
localstack/,1138,try to read chunked content,
localstack/,1144,Default invocation type is RequestResponse,
localstack/,1160,Try to parse parse payload as JSON,
localstack/,1169,Set error headers,
localstack/,1172,Construct response object,
localstack/,1182,check if this lambda function exists,
localstack/,1202,Assume the dry run always passes.,
localstack/,1371,"the version for put_concurrency != PATH_ROOT, at the time of this",
localstack/,1372,writing it's: /2017-10-31 for this endpoint,
localstack/,1373,https://docs.aws.amazon.com/lambda/latest/dg/API_PutFunctionConcurrency.html,
localstack/,1474,initialize the Lambda executor,
localstack/,14,for Python 2.7,
localstack/,23,constants,
localstack/,55,logger,
localstack/,58,maximum time a pre-allocated container can sit idle before getting killed,
localstack/,94,keeps track of each function arn and the last time it was invoked,
localstack/,100,set the invocation time in milliseconds,
localstack/,102,start the execution,
localstack/,114,"event source is SQS, send event back to dead letter queue",
localstack/,117,"event source is not SQS, send back to lambda dead letter queue",
localstack/,123,return final result,
localstack/,126,Inform users about asynchronous mode of the lambda execution.,
localstack/,154,"Note: The user's code may have been logging to stderr, in which case the logs",
localstack/,155,"will be part of the ""result"" variable here. Hence, make sure that we extract",
localstack/,156,"only the *last* line of ""result"" and consider anything above that as log output.",
localstack/,165,store log output - TODO get live logs from `process` above?,
localstack/,196,amend the environment variables for execution,
localstack/,206,configure USE_SSL in environment,
localstack/,210,prepare event body,
localstack/,229,custom command to execute in the container,
localstack/,232,"if running a Java Lambda, set up classpath arguments",
localstack/,236,copy executor jar into temp directory,
localstack/,240,TODO cleanup once we have custom Java Docker image,
localstack/,247,accept any self-signed certificates for outgoing calls from the Lambda,
localstack/,251,determine the command to be executed (implemented by subclasses),
localstack/,254,"lambci writes the Lambda result to stdout and logs to stderr, fetch it from there!",
localstack/,265,locking thread for creation/destruction of docker containers.,
localstack/,268,On each invocation we try to construct a port unlikely to conflict,
localstack/,269,with a previously invoked lambda function. This is a problem with at,
localstack/,270,"least the lambci/lambda:go1.x container, which execs a go program that",
localstack/,271,attempts to bind to the same default port.,
localstack/,277,check whether the Lambda has been invoked before,
localstack/,280,Choose a port for this invocation,
localstack/,285,create/verify the docker container is running.,
localstack/,289,"Note: currently ""docker exec"" does not support --env-file, i.e., environment variables can only be",
localstack/,290,"passed directly on the command line, using ""-e"" below. TODO: Update this code once --env-file is",
localstack/,291,"available for docker exec, to better support very large Lambda events (very long environment values)",
localstack/,297,determine files to be copied into the container,
localstack/,302,if this is the first invocation: copy the entire folder into the container,
localstack/,305,"otherwise, copy only the event file if it exists",
localstack/,311,env variables,
localstack/,312,container name,
localstack/,313,run cmd,
localstack/,321,start a process to remove idle containers,
localstack/,342,Get the container name and id.,
localstack/,352,Container is not running or doesn't exist.,
localstack/,354,Make sure the container does not exist in any form/state.,
localstack/,366,Create and start the container,
localstack/,370,--rm flag,
localstack/,372,Load bash when it starts.,
localstack/,374,Keeps the container running bash.,
localstack/,378,env_vars,
localstack/,379,network,
localstack/,398,give the container some time to start up,
localstack/,401,Get the entry point for the image.,
localstack/,431,Get the container name and id.,
localstack/,495,Get the container name and id.,
localstack/,498,Check if the container is already running,
localstack/,499,Note: filtering by *exact* name using regex filter '^...$' seems unstable on some,
localstack/,500,"systems. Therefore, we use a combination of filter and grep to get the results.",
localstack/,507,If the container doesn't exist. Create and start it.,
localstack/,526,container does not exist,
localstack/,530,Get the container name.,
localstack/,534,Get the container network,
localstack/,559,not enough idle time has passed,
localstack/,563,"container has been idle, destroy it.",
localstack/,592,Tell Lambci to use STDIN for the event,
localstack/,603,add Docker Lambda env vars,
localstack/,621,entrypoint,
localstack/,622,debug_docker_java_port,
localstack/,623,env,
localstack/,624,network,
localstack/,625,--rm flag,
localstack/,626,image and command,
localstack/,640,network,
localstack/,641,--rm flag,
localstack/,653,"execute the Lambda function in a forked sub-process, sync result via queue",
localstack/,659,"now we're executing in the child process, safe to change CWD and ENV",
localstack/,671,TODO: Interweaving stdout/stderr currently not supported,
localstack/,677,store logs to CloudWatch,
localstack/,702,Replace _debug_port_ with a random free port,
localstack/,708,Parse the debug port from opts,
localstack/,724,TODO: remove prefix once execution issues are fixed with dotnetcore/python lambdas,
localstack/,725,See https://github.com/lambci/docker-lambda/pull/218,
localstack/,754,make sure to append the localstack-utils.jar at the end of the classpath,
localstack/,755,https://github.com/localstack/localstack/issues/1160,
localstack/,761,--------------,
localstack/,762,GLOBAL STATE,
localstack/,763,--------------,
localstack/,769,the keys of AVAILABLE_EXECUTORS map to the LAMBDA_EXECUTOR config variable,
localstack/,12,max heap size allocated for the Java process,
localstack/,21,wait for port to be opened,
localstack/,23,check SQS,
localstack/,38,create config file,
localstack/,57,start process,
localstack/,20,"list of valid attribute names, and names not supported by the backend (elasticmq)",
localstack/,32,maps queue URLs to attributes set via the API,
localstack/,33,TODO: add region as first level in the map,
localstack/,47,Format attributes as a list. Example input:,
localstack/,48,{,
localstack/,49,"'AttributeName.1': ['Policy'],",
localstack/,50,'AttributeName.2': ['MessageRetentionPeriod'],
localstack/,51,},
localstack/,88,select only the attributes in UNSUPPORTED_ATTRIBUTE_NAMES,
localstack/,183,extract the external port used by the client to make the request,
localstack/,189,"If we cannot find the Host header, then fall back to the port of the proxy.",
localstack/,190,"(note that this could be incorrect, e.g., if running in Docker with a host port that",
localstack/,191,"is different from the internal container port, but there is not much else we can do.)",
localstack/,208,make sure we only forward the supported attributes to the backend,
localstack/,233,Allow CORS preflight requests to succeed.,
localstack/,249,patch the response and add missing attributes,
localstack/,253,patch the response and return the correct endpoint URLs / ARNs,
localstack/,256,return https://... if we're supposed to use SSL,
localstack/,258,expose external hostname:port,
localstack/,263,fix queue ARN,
localstack/,271,instruct listeners to fetch new SQS message,
localstack/,276,"if changes have been made, return patched response",
localstack/,285,Fix an issue in moto where data types like 'Number.java.lang.Integer' are,
localstack/,286,"not supported: Keep track of the original data type, and temporarily change",
localstack/,287,"it to the short form (e.g., 'Number'), before changing it back again.",
localstack/,309,instantiate listener,
localstack/,25,logger,
localstack/,28,maps stream names to details,
localstack/,31,dynamodb deserializer,
localstack/,69,DirectPut,
localstack/,72,KinesisAsSource,
localstack/,90,DirectPut,
localstack/,93,KinesisAsSource,
localstack/,106,See https://aws.amazon.com/kinesis/data-firehose/faqs/#Data_delivery,
localstack/,107,Path prefix pattern: myApp/YYYY/MM/DD/HH/,
localstack/,108,Object name pattern: DeliveryStreamName-DeliveryStreamVersion-YYYY-MM-DD-HH-MM-SS-RandomString,
localstack/,170,record event,
localstack/,188,record event,
localstack/,39,check Kinesis,
localstack/,11,action headers,
localstack/,20,list of stream consumer details,
localstack/,59,"'ConsumerCreationTimestamp': number,",
localstack/,112,"Currently kinesalite, which backs the Kinesis implementation for localstack, does",
localstack/,113,not support UpdateShardCount:,
localstack/,114,https://github.com/mhart/kinesalite/issues/61,
localstack/,115,,
localstack/,116,[Terraform](https://www.terraform.io) makes the call to UpdateShardCount when it,
localstack/,117,applies Kinesis resources. A Terraform run fails when this is not present.,
localstack/,118,,
localstack/,119,"The code that follows just returns a successful response, bypassing the 400",
localstack/,120,response that kinesalite returns.,
localstack/,121,,
localstack/,134,instantiate listener,
localstack/,45,instantiate listener,
localstack/,25,Patch _put_targets  #2101 Events put-targets does not respond,
localstack/,50,fix hardcoded account ID in ARNs returned from this API,
localstack/,52,fix dates returned from this API (fixes an issue with Terraform),
localstack/,54,fix content-length header,
localstack/,83,instantiate listener,
localstack/,12,regex path patterns,
localstack/,18,template for SQS inbound data,
localstack/,21,maps (API id) -> [authorizers],
localstack/,61,This function returns either a list or a single authorizer (depending on the path),
localstack/,110,"terraform sends this as a string in patch, so convert to int",
localstack/,182,Looks for '{' in the tokenized extracted path,
localstack/,213,"TODO: for now we simply return ""allow-all"" CORS headers, but in the future",
localstack/,214,"we should implement custom headers for CORS rules, as supported by API Gateway:",
localstack/,215,http://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-cors.html,
localstack/,245,check if we have an exact match,
localstack/,23,set up logger,
localstack/,26,regex path patterns,
localstack/,31,Maps API IDs to list of gateway responses,
localstack/,68,fix backend issue (missing support for API documentation),
localstack/,73,publish event,
localstack/,85,------------,
localstack/,86,API METHODS,
localstack/,87,------------,
localstack/,129,"Note: Looks like the format required by aws CLI (""item"" at top level) differs from the docs:",
localstack/,130,https://docs.aws.amazon.com/apigateway/api-reference/resource/gateway-responses/,
localstack/,144,TODO implement authorizers,
localstack/,159,run gateway authorizers for this request,
localstack/,175,default to returning CORS headers if this is an OPTIONS request,
localstack/,189,forward records to target kinesis stream,
localstack/,221,Sample request context:,
localstack/,222,https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-api-as-simple-proxy-for-lambda.html#api-gateway-create-api-as-simple-proxy-for-lambda-test,
localstack/,285,instantiate listener,
localstack/,16,"this can happen, as CidrIpv6 is not yet supported by moto",
localstack/,26,create kinesis stream as a backend,
localstack/,41,record event,
localstack/,77,get stream details,
localstack/,85,Replace Kinesis ShardIDs with ones that mimic actual,
localstack/,86,DynamoDBStream ShardIDs.,
localstack/,95,forward request to Kinesis API,
localstack/,110,-----------------,
localstack/,111,HELPER FUNCTIONS,
localstack/,112,-----------------,
localstack/,40,"Maps (stack_name,resource_logical_id) -> Bool to indicate which resources are currently being updated",
localstack/,43,whether to start the API in a separate process,
localstack/,46,maximum depth of the resource dependency tree,
localstack/,49,map of additional model classes,
localstack/,97,check if physical_resource_id is present,
localstack/,100,check ID attribute candidates,
localstack/,116,fall back to classes that use params as the dict of entity parameters,
localstack/,174,add model mappings to moto,
localstack/,177,Patch clean_json in moto,
localstack/,192,Patch parse_and_create_resource method in moto to deploy resources in LocalStack,
localstack/,216,"If the current stack is being updated, avoid infinite recursion",
localstack/,222,parse and get final resource JSON,
localstack/,228,add some missing default props which otherwise cause deployments to fail,
localstack/,233,check if this resource already exists in the resource map,
localstack/,238,"fix resource ARNs, make sure to convert account IDs 000000000000 to 123456789012",
localstack/,242,create resource definition and store CloudFormation metadata in moto,
localstack/,255,check whether this resource needs to be deployed,
localstack/,260,check for moto creation errors and raise an exception if needed,
localstack/,268,Fix for moto which sometimes hard-codes region name as 'us-east-1',
localstack/,273,check whether this resource needs to be deployed,
localstack/,276,This resource is either not deployable or already exists. Check if it can be updated,
localstack/,291,Return if this resource already exists and can/need not be updated yet,
localstack/,292,"NOTE: We should always return the resource here, to avoid duplicate",
localstack/,293,creation of resources in moto!,
localstack/,296,"Apply some fixes/patches to the resource names, then deploy resource in LocalStack",
localstack/,309,skip the parts below for update requests,
localstack/,320,update resource IDs to avoid mismatch between CF moto and LocalStack backend resources,
localstack/,331,update physical_resource_id field,
localstack/,346,"NOTE: this is a bit of a hack, which is required because",
localstack/,347,of the order of events when CloudFormation resources are created.,
localstack/,348,When we process a request to create a CF resource that's part of a,
localstack/,349,"stack, say, an API Gateway Resource, then we (1) create the object",
localstack/,350,"in memory in moto, which generates a random ID for the resource, and",
localstack/,351,(2) create the actual resource in the backend service using,
localstack/,352,template_deployer.deploy_resource(..) (see above).,
localstack/,353,The resource created in (2) now has a different ID than the resource,
localstack/,354,"created in (1), which leads to downstream problems. Hence, we need",
localstack/,355,"the logic below to reconcile the ids, i.e., apply IDs from (2) to (1).",
localstack/,361,We also need to fetch the resources to replace the root resource,
localstack/,362,that moto automatically adds to newly created RestAPI objects,
localstack/,365,make sure no resources have been added in addition to the root /,
localstack/,394,patch CloudFormation parse_output(..) method to fix a bug in moto,
localstack/,403,Make sure output includes export name,
localstack/,411,Make sure the export name is returned for stack outputs,
localstack/,421,Patch CloudFormationBackend.update_stack method in moto,
localstack/,427,update stack exports,
localstack/,437,Patch DynamoDB get_cfn_attribute(..) method in moto,
localstack/,449,Patch generate_stack_id(..) method in moto,
localstack/,457,Patch DynamoDB get_cfn_attribute(..) method in moto,
localstack/,469,Patch SQS get_cfn_attribute(..) method in moto,
localstack/,478,Patch S3 Bucket get_cfn_attribute(..) method in moto,
localstack/,487,Patch SQS physical_resource_id(..) method in moto,
localstack/,492,convert ID to queue URL,
localstack/,499,Patch LogGroup get_cfn_attribute(..) method in moto,
localstack/,511,Patch Lambda get_cfn_attribute(..) method in moto,
localstack/,525,Patch DynamoDB get_cfn_attribute(..) method in moto,
localstack/,539,Patch IAM get_cfn_attribute(..) method in moto,
localstack/,551,Patch IAM Role model,
localstack/,552,https://github.com/localstack/localstack/issues/925,
localstack/,568,Patch SNS Topic get_cfn_attribute(..) method in moto,
localstack/,578,Patch LambdaFunction create_from_cloudformation_json(..) method in moto,
localstack/,587,Patch EventSourceMapping create_from_cloudformation_json(..) method in moto,
localstack/,599,Patch LambdaFunction update_from_cloudformation_json(..) method in moto,
localstack/,609,patch ApiGateway Deployment,
localstack/,617,patch Lambda Version,
localstack/,625,add CloudFormation types,
localstack/,681,"TODO: add support for AWS::ApiGateway::Model, AWS::ApiGateway::RequestValidator, ...",
localstack/,683,fix AttributeError in moto's CloudFormation describe_stack_resource,
localstack/,698,Note: Line below has been patched,
localstack/,699,if stack_resource.logical_resource_id == logical_resource_id:,
localstack/,712,fix moto's describe_stack_events jinja2.exceptions.UndefinedError,
localstack/,718,"Also return stack events for deleted stacks, specified by stack name",
localstack/,728,fix Lambda regions in moto - see https://github.com/localstack/localstack/issues/1961,
localstack/,733,patch FakeStack.initialize_resources,
localstack/,740,"NOTE: We're adding this additional loop, as it seems that in some cases moto",
localstack/,741,"does not consider resource dependencies (e.g., if a ""DependsOn"" resource property",
localstack/,742,is defined). This loop allows us to incrementally resolve such dependencies.,
localstack/,753,Re-trigger the resource creation,
localstack/,756,looks like no more resources can be resolved -> bail,
localstack/,763,"NOTE: We're running the loop in the background, as it might take some time to complete",
localstack/,779,patch Kinesis Stream get_cfn_attribute(..) method in moto,
localstack/,788,patch cloudformation backend create_change_set(..),
localstack/,789,#760 cloudformation deploy invalid xml error,
localstack/,825,TODO: move this utility method to a shared file and enable it for all API endpoints,
localstack/,849,patch moto implementation,
localstack/,852,add memory profiling endpoint,
localstack/,861,make sure all API names and ports are mapped properly,
localstack/,864,start API,
localstack/,55,TODO implement actual validation logic,
localstack/,79,"SAM Transformer expects this map to be non-empty, but apparently the content doesn't matter (?)",
localstack/,81,"'AWSLambdaBasicExecutionRole': 'arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole',",
localstack/,89,"Note: we need to fix boto3 region, otherwise AWS SAM transformer fails",
localstack/,109,"check error codes, and code 301 - fixes https://github.com/localstack/localstack/issues/1884",
localstack/,112,"check if this is an S3 URL, then get the file directly from there",
localstack/,142,note: make sure to normalize the bucket name here!,
localstack/,149,TODO: remove once this is fixed upstream,
localstack/,196,fix an issue where moto cannot handle ARNs as stack names (or missing names),
localstack/,266,instantiate listener,
localstack/,19,Fix Incorrect response content-type header from cloudwatch logs #1343,
localstack/,28,Fix for https://github.com/localstack/localstack/issues/1527,
localstack/,35,Fix for https://github.com/localstack/localstack/issues/1527,
localstack/,41,instantiate listener,
localstack/,19,fix hardcoded account ID in ARNs returned from this API,
localstack/,21,fix dates returned from this API (fixes an issue with Terraform),
localstack/,23,fix content-length header,
localstack/,51,instantiate listener,
localstack/,10,max heap size allocated for the Java process,
localstack/,32,TODO: local port is currently hard coded in Step Functions Local :/,
localstack/,21,publish event,
localstack/,30,instantiate listener,
localstack/,13,max heap size allocated for the Java process,
localstack/,20,wait for backend port to be opened,
localstack/,22,check DynamoDB,
localstack/,16,cache table definitions - used for testing,
localstack/,19,cache table taggings,
localstack/,22,action header prefix,
localstack/,25,set up logger,
localstack/,28,list of actions subject to throughput limitations,
localstack/,63,"Check if table exists, to avoid error log output from DynamoDBLocal",
localstack/,69,"find an existing item and store it in a thread-local, so we can access it in return_response,",
localstack/,70,in order to determine whether an item already existed (MODIFY) or not (INSERT),
localstack/,78,Fix incorrect values if ReturnValues==ALL_OLD and ReturnConsumedCapacity is,
localstack/,79,"empty, see https://github.com/localstack/localstack/issues/2049",
localstack/,85,"Check if table exists, to avoid error log output from DynamoDBLocal",
localstack/,91,"Check if table exists, to avoid error log output from DynamoDBLocal",
localstack/,116,TODO: TTL status is maintained/mocked but no real expiry is happening for items,
localstack/,141,TTL for dynamodb table not set,
localstack/,150,returns an empty body on success.,
localstack/,174,update table definitions,
localstack/,179,"fix the table and latest stream ARNs (DynamoDBLocal hardcodes ""ddblocal"" as the region)",
localstack/,228,fix response,
localstack/,232,prepare record keys,
localstack/,242,"make sure we append 'ConsumedCapacity', which is properly",
localstack/,243,"returned by dynalite, but not by AWS's DynamoDBLocal",
localstack/,247,TODO hardcoded,
localstack/,310,nothing to do,
localstack/,420,schemas.append(index['KeySchema']),
localstack/,530,instantiate listener,
localstack/,19,max file size for S3 objects (in MB),
localstack/,22,temporary state,
localstack/,29,wait for port to be opened,
localstack/,31,check S3,
localstack/,66,fix for - https://github.com/localstack/localstack/issues/1733,
localstack/,67,- https://github.com/localstack/localstack/issues/1170,
localstack/,82,patch Bucket.create_from_cloudformation_json in moto,
localstack/,86,"remove the bucket from the backend, as our template_deployer will take care of creating the resource",
localstack/,94,patch S3Bucket.create_bucket(..),
localstack/,102,patch S3Bucket.get_bucket(..),
localstack/,112,patch S3Bucket.get_bucket(..),
localstack/,120,patch _key_response_post(..),
localstack/,130,patch _key_response_put(..),
localstack/,140,patch DeleteObjectTagging,
localstack/,142,Fixes https://github.com/localstack/localstack/issues/1083,
localstack/,157,patch max-keys,
localstack/,165,patch _bucket_response_delete_keys(..),
localstack/,166,https://github.com/localstack/localstack/issues/2077,
localstack/,224,Patch _handle_range_header(..),
localstack/,225,https://github.com/localstack/localstack/issues/2146,
localstack/,30,mappings for S3 bucket notifications,
localstack/,33,mappings for bucket CORS settings,
localstack/,36,maps bucket name to lifecycle settings,
localstack/,39,maps bucket name to replication settings,
localstack/,42,maps bucket name to encryption settings,
localstack/,45,maps bucket name to object lock settings,
localstack/,48,set up logger,
localstack/,51,XML namespace constants,
localstack/,54,see https://stackoverflow.com/questions/50480924/regex-for-s3-bucket-name#50484916,
localstack/,58,list of destination types for bucket notifications,
localstack/,61,prefix for object metadata keys in headers and query params,
localstack/,64,response header overrides the client may request,
localstack/,114,Based on: http://docs.aws.amazon.com/AmazonS3/latest/dev/notification-content-structure.html,
localstack/,127,TODO determine real source IP,
localstack/,131,Amazon S3 host that processed the request,
localstack/,160,"TODO: support more detailed methods, e.g., DeleteMarkerCreated",
localstack/,161,http://docs.aws.amazon.com/AmazonS3/latest/dev/NotificationHowTo.html,
localstack/,188,build event message,
localstack/,213,CloudFunction and LambdaFunction are semantically identical,
localstack/,216,make sure we don't run into a socket timeout,
localstack/,291,add allow-origin header,
localstack/,309,TimeFormat,
localstack/,323,"if cannot parse any LastModified, just continue",
localstack/,364,Fix content type for Range requests - https://github.com/localstack/localstack/issues/1259,
localstack/,378,Deleting non-existing keys should not result in errors.,
localstack/,379,Fixes https://github.com/localstack/localstack/issues/1893,
localstack/,401,fix for https://github.com/localstack/localstack/issues/1790,
localstack/,428,Fix for https://github.com/localstack/localstack/issues/1978,
localstack/,449,--------------,
localstack/,450,HELPER METHODS,
localstack/,451,for lifecycle/replication/encryption/...,
localstack/,452,--------------,
localstack/,460,TODO: check if bucket actually exists,
localstack/,477,TODO: check if bucket actually exists,
localstack/,494,TODO: check if bucket actually exists,
localstack/,511,TODO: check if bucket actually exists,
localstack/,525,"TODO: check if bucket exists, otherwise return 404-like error",
localstack/,534,"TODO: check if bucket exists, otherwise return 404-like error",
localstack/,543,"TODO: check if bucket exists, otherwise return 404-like error",
localstack/,552,"TODO: check if bucket exists, otherwise return 404-like error",
localstack/,559,-------------,
localstack/,560,UTIL METHODS,
localstack/,561,-------------,
localstack/,565,"For clients that use streaming v4 authentication, the request contains chunk signatures",
localstack/,566,in the HTTP body (see example below) which we need to strip as moto cannot handle them,
localstack/,567,,
localstack/,568,17;chunk-signature=6e162122ec4962bea0b18bc624025e6ae4e9322bdc632762d909e87793ac5921,
localstack/,569,<payload data ...>,
localstack/,570,0;chunk-signature=927ab45acd82fc90a3c210ca7314d59fedc77ce0c914d79095f8cc9563cf2c70,
localstack/,641,AWS appears to automatically convert upper to lower case chars in bucket names,
localstack/,663,try pick the bucket_name from the path,
localstack/,666,is the hostname not starting with a bucket name?,
localstack/,670,matches the common endpoints like,
localstack/,671,- '<bucket_name>.s3.<region>.amazonaws.com',
localstack/,672,- '<bucket_name>.s3-<region>.amazonaws.com.cn',
localstack/,675,matches dualstack endpoints like,
localstack/,676,- <bucket_name>.s3.dualstack.<region>.amazonaws.com',
localstack/,677,- <bucket_name>.s3.dualstack.<region>.amazonaws.com.cn',
localstack/,680,matches legacy endpoints like,
localstack/,681,- '<bucket_name>.s3.amazonaws.com',
localstack/,682,- '<bucket_name>.s3-external-1.amazonaws.com.cn',
localstack/,685,"if any of the above patterns match, the first captured group",
localstack/,686,will be returned as the bucket name,
localstack/,694,"we're either returning the original bucket_name,",
localstack/,695,or a pattern matched the host and we're returning that name instead,
localstack/,704,TODO check if bucket exists,
localstack/,735,make sure FilterRule is an array,
localstack/,739,create final details dict,
localstack/,757,parse path and query params,
localstack/,760,"Make sure we use 'localhost' as forward host, to ensure moto uses path style addressing.",
localstack/,761,Note that all S3 clients using LocalStack need to enable path style addressing.,
localstack/,765,check content md5 hash integrity if not a copy request,
localstack/,773,check bucket name,
localstack/,782,"TODO: For some reason, moto doesn't allow us to put a location constraint on us-east-1",
localstack/,787,"If this request contains streaming v4 authentication signatures, strip them from the message",
localstack/,788,Related isse: https://github.com/localstack/localstack/issues/98,
localstack/,789,TODO we should evaluate whether to replace moto s3 with scality/S3:,
localstack/,790,https://github.com/scality/S3/issues/237,
localstack/,795,"POST requests to S3 may include a ""${filename}"" placeholder in the",
localstack/,796,"key, which should be replaced with an actual file name before storing.",
localstack/,803,"If no content-type is provided, 'binary/octet-stream' should be used",
localstack/,804,src: https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html,
localstack/,808,parse query params,
localstack/,814,remap metadata query params (not supported in moto) to request headers,
localstack/,817,apply fixes,
localstack/,821,handle and return response for ?notification request,
localstack/,880,make sure to convert any bucket names to lower case,
localstack/,896,persist this API call to disk,
localstack/,899,No path-name based bucket name? Try host-based,
localstack/,904,POST requests to S3 may include a success_action_redirect or,
localstack/,905,"success_action_status field, which should be used to redirect a",
localstack/,906,client to a new location.,
localstack/,931,"check if this is an actual put object request, because it could also be",
localstack/,932,a put bucket request with a path like this: /bucket_name/,
localstack/,937,get subscribers and send bucket notifications,
localstack/,939,"if we already have a good key, use it, otherwise examine the path",
localstack/,951,publish event for creation/deletion of buckets:,
localstack/,957,fix an upstream issue in moto S3 (see https://github.com/localstack/localstack/issues/382),
localstack/,963,emulate ErrorDocument functionality if a website is configured,
localstack/,969,"Verify the bucket exists in the first place--if not, we want normal processing of the 404",
localstack/,980,Pass on the 404 as usual,
localstack/,986,append CORS headers and other annotations/patches to response,
localstack/,997,Remove body from PUT response on presigned URL,
localstack/,998,https://github.com/localstack/localstack/issues/1317,
localstack/,1010,Honor response header overrides,
localstack/,1011,https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectGET.html,
localstack/,1024,"We need to un-pretty-print the XML, otherwise we run into this issue with Spark:",
localstack/,1025,https://github.com/jserver/mock-s3/pull/9/files,
localstack/,1026,https://github.com/localstack/localstack/issues/183,
localstack/,1027,"Note: yet, we need to make sure we have a newline after the first line: <?xml ...>\n",
localstack/,1028,Note: make sure to return XML docs verbatim: https://github.com/localstack/localstack/issues/1037,
localstack/,1032,update Location information in response payload,
localstack/,1035,convert back to bytes,
localstack/,1039,fix content-type: https://github.com/localstack/localstack/issues/618,
localstack/,1040,https://github.com/localstack/localstack/issues/549,
localstack/,1041,https://github.com/localstack/localstack/issues/854,
localstack/,1048,update content-length headers (fix https://github.com/localstack/localstack/issues/541),
localstack/,1067,Generally if there is a query (some/path/with?query) we don't want to send notifications,
localstack/,1070,Except we do want to notify on multipart and presigned url upload completion,
localstack/,1077,instantiate listener,
localstack/,15,Fall back in case of Python 2.x,
localstack/,22,"Ran off the end, stop.",
localstack/,26,Real parts have headers and a value separated by '\r\n'.,
localstack/,60,"Found nothing, return unaltered",
localstack/,53,noqa: E501,
localstack/,101,noqa: E501,
localstack/,105,noqa: E501,
localstack/,170,Note: keep imports here to avoid circular dependencies,
localstack/,176,sleep some time to give Elasticsearch enough time to come up,
localstack/,179,ensure that all infra components are up and running,
localstack/,185,Note: keep imports here to avoid circular dependencies,
localstack/,205,start actual Elasticsearch instance,
localstack/,209,record event,
localstack/,254,record event,
localstack/,38,delete Elasticsearch data that may be cached locally from a previous test run,
localstack/,49,"Elasticsearch 5.x cannot be bound to 0.0.0.0 in some Docker environments,",
localstack/,50,hence we use the default bind address 127.0.0.0 and put a proxy in front of it,
localstack/,64,fix permissions,
localstack/,70,start proxy and ES process,
localstack/,83,check Elasticsearch,
localstack/,24,mappings for SNS topic subscriptions,
localstack/,27,mappings for subscription status,
localstack/,30,mappings for SNS tags,
localstack/,33,set up logger,
localstack/,42,check region,
localstack/,50,parse payload and extract fields,
localstack/,106,No need to create a topic to send SMS or single push notifications with SNS,
localstack/,107,but we can't mock a sending so we only return that it went well,
localstack/,114,return response here because we do not want the request to be forwarded to SNS backend,
localstack/,172,convert account IDs in ARNs,
localstack/,176,"remove ""None"" strings from result",
localstack/,180,parse request and extract data,
localstack/,201,publish event,
localstack/,207,publish event,
localstack/,215,instantiate listener,
localstack/,282,AWS headers according to,
localstack/,283,https://docs.aws.amazon.com/sns/latest/dg/sns-message-and-json-formats.html#http-header,
localstack/,316,An endpoint may only be subscribed to a topic once. Subsequent,
localstack/,317,subscribe calls do nothing (subscribe is idempotent).,
localstack/,323,http://docs.aws.amazon.com/cli/latest/reference/sns/get-subscription-attributes.html,
localstack/,343,"Send out confirmation message for HTTP(S), fix for https://github.com/localstack/localstack/issues/881",
localstack/,403,---------------,
localstack/,404,HELPER METHODS,
localstack/,405,---------------,
localstack/,413,TODO maintain separate map instead of traversing all items,
localstack/,434,TODO move to utils!,
localstack/,453,fix non-ascii unicode characters under Python 2,
localstack/,475,TODO Add a more sophisticated solution with an actual signature,
localstack/,476,Hardcoded,
localstack/,104,"TODO: this should be moved into a separate service, once the dashboard UI is removed",
localstack/,16,TODO: CLI commands in this file need to be replaced with SDK calls!,
localstack/,19,5 seconds,
localstack/,20,5 minutes,
localstack/,26,time delta for recent Kinesis events,
localstack/,29,logger,
localstack/,91,TODO: use boto3 instead of running aws-cli commands here!,
localstack/,161,TODO move to util,
localstack/,169,TODO move to util,
localstack/,174,Elasticsearch references,
localstack/,182,Elasticsearch references,
localstack/,190,DynamoDB references,
localstack/,191,TODO fix pattern to be generic,
localstack/,200,S3 references,
localstack/,286,traverse subdirectories and get script sources,
localstack/,296,cleanup cache,
localstack/,300,TODO: delete only if cache_time is over,
localstack/,440,Make sure we load components in the right order:,
localstack/,441,"(ES,DynamoDB,S3) -> (Kinesis,Lambda)",
localstack/,1,TODO: This file should be moved to moto!,
localstack/,2,This code needs to live in this folder because moto/core/models.py contains this on line 445:,
localstack/,3,"service = cls.__module__.split(""."")[1]",
localstack/,4,"i.e., there is a hard constraint on the name of the module",
